<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>README</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}

kbd {
  display: inline-block;
  padding: 3px 5px;
  font-size: 11px;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb
}

* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>


</head>

<body>

<p><a name="table-of-contents"></a></p>

<h2 id="toc_0">Table of contents</h2>

<ul>
<li><a href="#get-started">Get Started</a></li>
<li><a href="#api-authentication">API Authentication</a></li>
<li><a href="#callback-integration">Callback Integration</a></li>
<li><a href="#callback-state-change">Callback State Change</a></li>
<li><a href="#in-pool-transaction-callback">In-pool Transaction Callback</a></li>
<li><a href="#cryptocurrency-unit-conversion">Cryptocurrency Unit Conversion</a></li>
<li><a href="#api-response-validation">API Response Validation</a></li>
<li>REST API

<ul>
<li>Deposit API

<ul>
<li><a href="#create-deposit-addresses">Create Deposit Addresses</a></li>
<li><a href="#verify-deposit-addresses">Verify Deposit Addresses</a></li>
<li><a href="#query-deposit-addresses">Query Deposit Addresses</a></li>
<li><a href="#query-deployed-contract-deposit-addresses">Query Deployed Contract Deposit Addresses</a></li>
<li><a href="#query-pool-address">Query Pool Address</a></li>
<li><a href="#query-pool-address-balance">Query Pool Address Balance</a></li>
<li><a href="#query-invalid-deposit-addresses">Query Invalid Deposit Addresses</a></li>
<li><a href="#query-deposit-callback-detail">Query Deposit Callback Detail</a></li>
<li><a href="#resend-deposit-callbacks">Resend Deposit/Collection Callbacks</a></li>
<li><a href="#query-deposit-wallet-balance">Query Deposit Wallet Balance</a></li>
<li><a href="#update-deposit-address-label">Update Deposit Address Label</a></li>
<li><a href="#query-deposit-address-label">Query Deposit Address Label</a></li>
<li><a href="#query-delegated-address-balance">Query Delegated Address Balance</a></li>
</ul></li>
<li>Withdrawal API

<ul>
<li><a href="#withdraw-assets">Withdraw Assets</a></li>
<li><a href="#cancel-withdrawal-request">Cancel Withdrawal Request</a></li>
<li><a href="#query-latest-withdrawal-transaction-state">Query Latest Withdrawal Transaction State</a></li>
<li><a href="#query-all-withdrawal-transaction-states">Query All Withdrawal Transaction States</a></li>
<li><a href="#query-withdrawal-transaction-event-logs">Query Withdrawal Transaction Event Logs</a></li>
<li><a href="#query-withdrawal-wallet-balance">Query Withdrawal Wallet Balance</a></li>
<li><a href="#query-withdrawal-callback-detail">Query Withdrawal Callback Detail</a></li>
<li><a href="#set-withdrawal-request-acl">Set Withdrawal Request ACL</a></li>
<li><a href="#resend-withdrawal-callbacks">Resend Withdrawal Callbacks</a></li>
<li><a href="#query-withdrawal-whitelist-configuration">Query Withdrawal Whitelist Configuration</a></li>
<li><a href="#add-withdrawal-whitelist-entry">Add Withdrawal Whitelist Entry</a></li>
<li><a href="#remove-withdrawal-whitelist-entry">Remove Withdrawal Whitelist Entry</a></li>
<li><a href="#check-withdrawal-whitelist">Check Withdrawal Whitelist</a></li>
<li><a href="#query-withdrawal-whitelist">Query Withdrawal Whitelist</a></li>
<li><a href="#query-withdrawal-wallet-transaction-history">Query Withdrawal Wallet Transaction History</a></li>
<li><a href="#sign-message">Sign Message</a></li>
<li><a href="#call-contract-read-abi">Call Contract Read ABI</a></li>
<li><a href="#arweave-sign-transaction">Arweave Sign Transaction</a></li>
</ul></li>
<li>Deposit / Withdraw Common API

<ul>
<li><a href="#query-callback-history">Query Callback History</a></li>
<li><a href="#query-callback-detail">Query Callback Detail</a></li>
<li><a href="#query-wallet-synchronization-info">Query Wallet Synchronization Info</a></li>
<li><a href="#query-transaction-average-fee">Query Transaction Average Fee</a></li>
<li><a href="#batch-query-transaction-average-fees">Batch Query Transaction Average Fees</a></li>
</ul></li>
<li>Vault API

<ul>
<li><a href="#query-vault-wallet-transaction-history">Query Vault Wallet Transaction History</a></li>
<li><a href="#query-vault-wallet-balance">Query Vault Wallet Balance</a></li>
</ul></li>
<li>Common API

<ul>
<li><a href="#activate-api-code">Activate API Code</a></li>
<li><a href="#query-api-code-status">Query API Code Status</a></li>
<li><a href="#refresh-api-code">Refresh API Code</a></li>
<li><a href="#query-wallet-info">Query Wallet Info</a></li>
<li><a href="#verify-addresses">Verify Addresses</a></li>
<li><a href="#inspect-callback-endpoint">Inspect Callback Endpoint</a></li>
</ul></li>
<li>Read-only API code API

<ul>
<li><a href="#list-wallets">List Wallets</a></li>
<li><a href="#query-wallets-balance">Query Wallets Balance</a></li>
<li><a href="#query-currency-prices">Query Currency Prices</a></li>
<li><a href="#query-contract-token-meta">Query Contract Token Meta</a></li>
<li><a href="#query-service-health-status">Query Service Health Status</a></li>
</ul></li>
</ul></li>
<li>Testing

<ul>
<li><a href="#mock-server">Mock Server</a></li>
<li><a href="#curl-testing-commands">cURL Testing Commands</a></li>
<li><a href="#other-language-versions">Other Language Versions</a></li>
</ul></li>
<li>Appendix

<ul>
<li><a href="#callback-definition">Callback Definition</a></li>
<li><a href="#transaction-state-definition">Transaction State Definition</a></li>
<li><a href="#callback-type-definition">Callback Type Definition</a></li>
<li><a href="#currency-definition">Currency Definition</a></li>
<li><a href="#support-unconfirmed-balance-currency">Support Unconfirmed Balance Currency</a></li>
<li><a href="#memo-requirement">Memo Requirement</a></li>
<li><a href="#wallet-type-definition">Wallet Type Definition</a></li>
<li><a href="#delegated-wallet-supported-currency">Delegated Wallet Supported Currency</a></li>
<li><a href="#evm-compatible-currency">EVM Compatible Currency</a></li>
</ul></li>
</ul>

<p><a name="get-started"></a></p>

<h1 id="toc_1">Get Started</h1>

<h3 id="toc_2">How to deposit?</h3>

<ul>
<li>Setup a deposit wallet and configure it (via web control panel)

<ul>
<li>Refer to CYBAVO VAULT SOFA User Manual for detailed steps.</li>
</ul></li>
<li>Request an API code/secret (via web control panel)</li>
<li>Create deposit addresses (via CYBAVO SOFA API)

<ul>
<li>Refer to <a href="#create-deposit-addresses">Create deposit addresses</a> API</li>
</ul></li>
<li>Waiting for the CYBAVO SOFA system detecting transactions to those deposit addresses</li>
<li>Handle the deposit callback

<ul>
<li>Use the callback data to update certain data on your system.</li>
<li><b>Security Enhancement</b>: Use the Query Callback Detail API to confirm the callback is sent from the CYBAVO SOFA system.</li>
<li>Refer to <a href="#callback-integration">Callback Integration</a> for detailed information.</li>
</ul></li>
</ul>

<h3 id="toc_3">How to withdraw?</h3>

<ul>
<li>Setup a withdrawal wallet and configure it (via web control panel)

<ul>
<li>Refer to CYBAVO VAULT SOFA User Manual for detailed steps.</li>
</ul></li>
<li>Request an API code/secret (via web control panel)</li>
<li>Make withdraw request (via CYBAVI SOFA API)

<ul>
<li>Refer to <a href="#withdraw-assets">Withdraw Assets</a> API</li>
<li><b>Security Enhancement</b>: Also set the withdrawal authentication callback URL to authorize the withdrawal requests sent to the CYBAVO SOFA system.</li>
</ul></li>
<li>Waiting for the CYBAVO SOFA system broadcasting transactions to blockchain</li>
<li>Handle the withdrawal callback

<ul>
<li>Use the callback data to update certain data on your system.</li>
<li>Refer to <a href="#callback-integration">Callback Integration</a> for detailed information.</li>
</ul></li>
</ul>

<h3 id="toc_4">Try it now</h3>

<ul>
<li>Use <a href="#mock-server">mock server</a> to test CYBAVO SOFA API right away.</li>
</ul>

<h3 id="toc_5">Start integration</h3>

<ul>
<li>To make a correct API call, refer to <a href="#api-authentication">API Authentication</a>.</li>
<li>To handle callback correctly, refer to <a href="#callback-integration">Callback Integration</a>.</li>
</ul>

<p><a name="api-authentication"></a></p>

<h1 id="toc_6">API Authentication</h1>

<ul>
<li>The CYBAVO SOFA system verifies all incoming requests. All requests must include X-API-CODE, X-CHECKSUM headers otherwise caller will get a 403 Forbidden error.</li>
</ul>

<h3 id="toc_7">How to acquire and refresh API code and secret</h3>

<ul>
<li>Request the API code/secret from the <strong>Wallet Details</strong> page on the web control panel for the first time.</li>
<li>A paired refresh code can be used in the <a href="#refresh-api-code">refresh API</a> to acquire the new inactive API code/secret of the wallet.

<ul>
<li>Before the inactive API code is activated, the currently activated API code is still valid.</li>
<li>Once the paired API code becomes invalid, the paired refresh code will also become invalid.</li>
</ul></li>
</ul>

<h3 id="toc_8">How to make a correct request?</h3>

<ul>
<li>Put the API code in the X-API-CODE header.

<ul>
<li>Use the inactivated API code in any request will activate it automatically. Once activated, the currently activated API code will immediately become invalid.</li>
<li>Or you can explicitly call the <a href="#activate-api-code">activation API</a> to activate the API code before use</li>
</ul></li>
<li>Calculate the checksum with the corresponding API secret and put the checksum in the X-CHECKSUM header.

<ul>
<li>The checksum calculation will use all the query parameters, the current timestamp, user-defined random string and the post body (if any).</li>
</ul></li>
<li>Please refer to the code snippet on the github project to know how to calculate the checksum.

<ul>
<li><a href="https://github.com/CYBAVO/API_CHECKSUM_CALC/blob/main/go/checksum.go#L40">Go</a></li>
<li><a href="https://github.com/CYBAVO/API_CHECKSUM_CALC/blob/main/java/checksum.java#L49">Java</a></li>
<li><a href="https://github.com/CYBAVO/API_CHECKSUM_CALC/blob/main/javascript/checksum.js#L27">Javascript</a></li>
<li><a href="https://github.com/CYBAVO/API_CHECKSUM_CALC/blob/main/php/checksum.php#L27">PHP</a></li>
<li><a href="https://github.com/CYBAVO/API_CHECKSUM_CALC/blob/main/c%23/checksum.cs#L55">C#</a></li>
<li><a href="https://github.com/CYBAVO/API_CHECKSUM_CALC/blob/main/python/checksum.py#L29">Python</a></li>
</ul></li>
</ul>

<p><a name="readonly-api-code"></a></p>

<h1 id="toc_9">Read-only API Code</h1>

<ul>
<li>A read-only API code can be used to call all the read functions of wallets.

<ul>
<li>All the read functions will be labeled <code>VIEW</code> in front of the API definition.</li>
</ul></li>
<li>Use <a href="#activate-api-code">activation API</a> with the <code>WALLET_ID</code> set as <code>readonly</code> to activate a read-only API code.

<ul>
<li>The full API path is <code>/v1/sofa/wallets/readonly/apisecret/activate</code></li>
<li>After activation, the API code will remain valid until it is replaced by a newly activated read-only API code.</li>
</ul></li>
<li>Use <a href="#list-wallets">listing API</a> to list all wallets that can be accessed through a read-only API code.</li>
</ul>

<p><a name="callback-integration"></a></p>

<h1 id="toc_10">Callback Integration</h1>

<ul>
<li>Please note that the wallet must have an activated API code, otherwise no callback will be sent.

<ul>
<li>Use the <a href="#activate-api-code">activation API</a> to activate an API code.</li>
</ul></li>
<li>How to distinguish between deposit and withdrawal callbacks?

<ul>
<li>Deposit Callback (callback type 1)

<ul>
<li>The combination of <strong>txid</strong> and <strong>vout_index</strong> of the callback is unique, use this combined ID to identify the deposit request, not to use only the transaction ID (txid field). Because multiple deposit callbacks may have the same transaction ID, for example, BTC many-to-many transactions.</li>
</ul></li>
<li>Withdrawal Callback (callback type 2)

<ul>
<li>The <strong>order_id</strong> of the callback is unique, use this ID to identify the withdrawal request.</li>
</ul></li>
</ul></li>
</ul>

<div class="alert alert-warning">
It is important to distinguish between unique callbacks to avoid improper handling of deposit / withdrawal requests.
</div>

<ul>
<li><p>To ensure that the callbacks have processed by callback handler, the CYBAVO SOFA system will continue to send the callbacks to the callback URL until a callback confirmation (HTTP/1.1 200 OK) is received or exceeds the number of retries (retry time interval: 1-3-5-15-45 mins).</p>

<ul>
<li>If all attempts fail, the callback will be set to a failed state, the callback handler can call the <a href="#resend-deposit-callbacks">resend deposit callback</a> or <a href="#resend-withdrawal-callbacks">resend withdrawal callback</a> API to request CYBAVO SOFA system to resend such kind of callback(s) or through the web control panel.</li>
</ul></li>
<li><p>Refer to <a href="#callback-definition">Callback Definition</a>, <a href="#callback-type-definition">Callback Type Definition</a> for detailed definition.</p></li>
<li><p>Please refer to the code snippet on the github project to know how to validate the callback payload.</p>

<ul>
<li><a href="https://github.com/CYBAVO/SOFA_MOCK_SERVER/blob/master/controllers/OuterController.go#L197">Go</a></li>
<li><a href="https://github.com/CYBAVO/SOFA_MOCK_SERVER_JAVA/blob/master/src/main/java/com/cybavo/sofa/mock/MockController.java#L93">Java</a></li>
<li><a href="https://github.com/CYBAVO/SOFA_MOCK_SERVER_JAVASCRIPT/blob/master/routes/wallets.js#L352">Javascript</a></li>
<li><a href="https://github.com/CYBAVO/SOFA_MOCK_SERVER_PHP/blob/master/index.php#L207">PHP</a></li>
<li><a href="https://github.com/CYBAVO/API_CHECKSUM_CALC/blob/main/c%23/checksum.cs#L89">C#</a></li>
<li><a href="https://github.com/CYBAVO/API_CHECKSUM_CALC/blob/main/python/checksum.py#L64">Python</a></li>
</ul></li>
<li><p>Best practice:</p>

<ul>
<li>While processing a deposit callback, in addition to verifying the checksum of the callback, use <a href="#query-callback-detail">Query Callback Detail</a> API with the serial ID of the callback to perform an additional confirmation.</li>
</ul></li>
</ul>

<p><a name="callback-state-change"></a></p>

<h1 id="toc_11">Callback State Change</h1>

<h4 id="toc_12">The state of a successful withdrawal request is changed as follows:</h4>

<p>processing state(1) -&gt; transaction in pool state(2) -&gt; transaction in chain state(3) -&gt; repeats state 3 until the confirmation count is met</p>

<h4 id="toc_13">The state of a successful deposit request is changed as follows:</h4>

<p>transaction in chain state(3) -&gt; repeats state 3 until the confirmation count is met</p>

<blockquote>
<p>Refer to <a href="#transaction-state-definition">Transaction State Definition</a> for all transaction states definition.</p>
</blockquote>

<p><a name="in-pool-transaction-callback"></a></p>

<h1 id="toc_14">In-pool Transaction Callback</h1>

<p>Currently, only BTC supports in-pool transaction callbacks. The callback type is <strong>In-pool Transaction Callback</strong>(127), which is a one-time callback.</p>

<p>The following is an in-pool transaction callback example:</p>

<div><pre><code class="language-javascript">{
  &quot;type&quot;: 127,
  &quot;serial&quot;: 0,
  &quot;order_id&quot;: &quot;&quot;,
  &quot;currency&quot;: &quot;BTC&quot;,
  &quot;txid&quot;: &quot;675959d855da3a194d7f9d32b347ec2702d29677f23c563bc2c31aefaa274739&quot;,
  &quot;block_height&quot;: 0,
  &quot;tindex&quot;: 0,
  &quot;vout_index&quot;: 0,
  &quot;amount&quot;: &quot;1000&quot;,
  &quot;fees&quot;: &quot;&quot;,
  &quot;memo&quot;: &quot;&quot;,
  &quot;broadcast_at&quot;: 0,
  &quot;chain_at&quot;: 0,
  &quot;from_address&quot;: &quot;&quot;,
  &quot;to_address&quot;: &quot;2Mw6znX6LgyFRhE9iM2d1TXBTP7MQiKD36y&quot;,
  &quot;wallet_id&quot;: 367628,
  &quot;state&quot;: 2,
  &quot;confirm_blocks&quot;: 0,
  &quot;processing_state&quot;: 0,
  &quot;addon&quot;: {
    &quot;fee_decimal&quot;: 8,
    &quot;token_id&quot;: &quot;&quot;
  },
  &quot;decimal&quot;: 8,
  &quot;currency_bip44&quot;: 0,
  &quot;token_address&quot;: &quot;&quot;
}</code></pre></div>

<blockquote>
<p>The <code>processing_state</code> always be 0 (In fullnode mempool) and <code>state</code> always be 2 (TXID in pool).</p>
</blockquote>

<p><a name="cryptocurrency-unit-conversion"></a></p>

<h1 id="toc_15">Cryptocurrency Unit Conversion</h1>

<h4 id="toc_16">For callback</h4>

<ul>
<li>The amount and fees fields in the callback are in the smallest cryptocurrency unit, use <code>decimal</code> and <code>fee_decimal</code>(in the addon field) fields of callback data to convert the unit.</li>
</ul>

<h4 id="toc_17">For API</h4>

<ul>
<li>Refer to decimals of <a href="#currency-definition">Currency Definition</a> to convert main cryptocurrency unit.</li>
<li>For the cryptocurrency token, use the token_decimals field of the <a href="#query-wallet-info">Wallet Info</a> API to convert cryptocurrency token unit.</li>
</ul>

<p><a name="api-response-validation"></a></p>

<h1 id="toc_18">API Response Validation</h1>

<ul>
<li><p>A succuessful API response (status code 200) will contain an <code>X-CHECKSUM</code> header for integrity and security checks.</p>

<ul>
<li>Calculate the checksum with the corresponding wallet&#39;s API secret to double confirm the integrity of the response and the validity of the source.</li>
</ul></li>
<li><p>Please refer to the code snippet on the github project to know how to validate the API response.</p>

<ul>
<li><a href="https://github.com/CYBAVO/SOFA_MOCK_SERVER/blob/master/api/apicaller.go#L100">Go</a></li>
<li><a href="https://github.com/CYBAVO/SOFA_MOCK_SERVER_JAVA/blob/master/src/main/java/com/cybavo/sofa/mock/Api.java#L177">Java</a></li>
<li><a href="https://github.com/CYBAVO/SOFA_MOCK_SERVER_JAVASCRIPT/blob/master/helper/apicaller.js#L108">Javascript</a></li>
<li><a href="https://github.com/CYBAVO/SOFA_MOCK_SERVER_PHP/blob/master/helper/apicaller.php#L73">PHP</a></li>
</ul></li>
</ul>

<h1 id="toc_19">REST API</h1>

<h1 id="toc_20">Deposit Wallet API</h1>

<p><a name="create-deposit-addresses"></a></p>

<h3 id="toc_21">Create Deposit Addresses</h3>

<p>Create deposit addresses on certain wallet. Once addresses are created, the CYBAVO SOFA system will callback when transactions are detected on these addresses.</p>

<blockquote>
<p>TIP: Use the <a href="#verify-deposit-addresses">Verification API</a> to verify the address before depositing assets.</p>
</blockquote>

<h5 id="toc_22">Request</h5>

<p><strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/addresses</p>

<blockquote>
<p><code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-create-deposit-addresses">Sample curl command</a></li>
</ul>

<h5 id="toc_23">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_24">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/107950/addresses</code></pre></div>

<h6 id="toc_25">Post body</h6>

<p>For BNB, XLM, XRP or EOS wallet:</p>

<div><pre><code class="language-javascript">{
  &quot;count&quot;: 2,
  &quot;memos&quot;: [
    &quot;10001&quot;,
    &quot;10002&quot;
  ],
  &quot;labels&quot;: [
    &quot;note-for-001&quot;,
    &quot;note-for-002&quot;
  ]
}</code></pre></div>

<p>For wallet excepts BNB, XLM, XRP and EOS:</p>

<div><pre><code class="language-javascript">{
  &quot;count&quot;: 2,
   &quot;labels&quot;: [
    &quot;note-for-address-1&quot;,
    &quot;note-for-address-2&quot;
  ]
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_26">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">count</td>
<td style="text-align: left">int</td>
<td style="text-align: left">required, max <code>1000</code></td>
<td style="text-align: left">Specify address count</td>
</tr>
<tr>
<td style="text-align: left">memos</td>
<td style="text-align: left">array</td>
<td style="text-align: left">required (creating BNB, XLM, XRP or EOS wallet)</td>
<td style="text-align: left">Specify memos for BNB, XLM, XRP or EOS deposit wallet. Refer to <a href="#memo-requirement">Memo Requirement</a></td>
</tr>
<tr>
<td style="text-align: left">labels</td>
<td style="text-align: left">array</td>
<td style="text-align: left">optional</td>
<td style="text-align: left">Specify the labels of the generated addresses or memos</td>
</tr>
</tbody>
</table>

<blockquote>
<p>NOTE: The length of <code>memos</code> must equal to <code>count</code> while creating addresses for BNB, XLM, XRP or EOS wallet.</p>

<p>NOTE: The memos(or called destination tags) of XRP must be strings that can be converted to numbers.</p>

<p>If use the <code>labels</code> to assign labels, the array length of the labels must equal to <code>count</code>.
The label will be automatically synced to the child wallet.</p>
</blockquote>

<h5 id="toc_27">Response Format</h5>

<p>An example of a successful response:</p>

<p>For BNB, XLM, XRP or EOS wallet:</p>

<div><pre><code class="language-javascript">{
  &quot;addresses&quot;: [
    &quot;10001&quot;,
    &quot;10002&quot;
  ]
}</code></pre></div>

<p>For wallet excepts BNB, XLM, XRP or EOS:</p>

<div><pre><code class="language-javascript">{
  &quot;addresses&quot;: [
    &quot;0x2E7248BBCD61Ad7C33EA183A85B1856bc02C40b6&quot;,
    &quot;0x4EB990D527c96c64eC5Bfb0D1e304840052d4975&quot;,
    &quot;0x86434604FF857702fbE11cBFf5aC7689Af19c4Ed&quot;
  ]
}</code></pre></div>

<p>For the ETH wallet that uses contract collection:</p>

<div><pre><code class="language-javascript">{
  &quot;txids&quot;: [
    &quot;0xe6dfe0d283690f636df5ea4b9df25552e6b576b88887bfb5837016cdd696e754&quot;,
    &quot;0xdb18fd33c9a6809bfc341a1c0b2c092be5a360f394c85367f9cf316579281ab4&quot;,
    &quot;0x18075ff1693026f93722f8b2cc0e29bf148ded5bce4dc173c8118951eceabe60&quot;,
    &quot;0x7c6acb506ef033c09f781cc5ad6b2d0a216346758d7f955e720d6bc7a52731a5&quot;,
    &quot;0x7da19f8c0d82cde16636da3307a6bef46eb9f398af3eb2362d230ce300509d63&quot;
  ]
}</code></pre></div>

<p>For the delegated wallet:</p>

<div><pre><code class="language-javascript">  &quot;address_indexes&quot;: [
    1,
    2,
    3,
    4,
    5
  ],
  &quot;addresses&quot;: [
    &quot;0xB02B189b423f58E1c035f02786eA5BC6E7762718&quot;,
    &quot;0xace596bfd34E86d15F28b1743B99B26FAFcCC9F5&quot;,
    &quot;0x22505d4E113aE8b7A7ACdAECABfD9601E0c41ca8&quot;,
    &quot;0x219028837aB831077D2F12EC134cE3C59266EDfd&quot;,
    &quot;0x4C2216980B2883234C0C71ef272a195344f206BE&quot;
  ]</code></pre></div>

<p>Use <a href="#query-deployed-contract-deposit-addresses">Query Deployed Contract Deposit Addresses</a> API to query deployed contract addresses.</p>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">addresses</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Array of just created deposit addresses</td>
</tr>
<tr>
<td style="text-align: left">txids</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Array of transaction IDs used to deploy collection contract</td>
</tr>
<tr>
<td style="text-align: left">address_indexes</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Array of address index*</td>
</tr>
</tbody>
</table>

<blockquote>
<p>* The address indexes are mapping to the array of address. For example, the index of 0xB02B189b423f58E1c035f02786eA5BC6E7762718 is 1, and so on.</p>

<p>The index and address must be specified when calling <a href="#withdraw-assets">Withdraw Assets</a> API on the delegated wallet.</p>

<p>Use the <a href="#query-deposit-addresses">Query Deposit Addresses</a> API to retrieve the index of the delegated address.</p>
</blockquote>

<h5 id="toc_28">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The count and the count of memos mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">706</td>
<td style="text-align: left">Exceed max allow wallet limitation, Upgrade your SKU to get more wallets</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the total number of deposit addresses</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">421</td>
<td style="text-align: left">Mapped(Token) wallet not allow to create deposit addresses, please create the deposit wallet in parent wallet, the address will be synced to mapped wallet automatically</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Only the parent wallet can create deposit addresses</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">500</td>
<td style="text-align: left">insufficient fund</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Insufficient balance to deploy collection contract</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">Error message returned by JSON parser</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">818</td>
<td style="text-align: left">Destination Tag must be integer</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Wrong XRP destination tag format</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">945</td>
<td style="text-align: left">The max length of BNB memo is 256 chars</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the length of BNB memo</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">946</td>
<td style="text-align: left">The max length of EOS memo is 128 chars</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the length of EOS memo</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">947</td>
<td style="text-align: left">The max length of XRP destination tag is 20 chars</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the length of XRP destination tag</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">948</td>
<td style="text-align: left">The max length of XLM memo is 20 chars</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the length of XLM memo</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">archived wallet or wrong wallet type</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_29"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="verify-deposit-addresses"></a></p>

<h3 id="toc_30">Verify Deposit Addresses</h3>

<p>Verify that these addresses belong to a deposit wallet.</p>

<h5 id="toc_31">Request</h5>

<p><code>VIEW</code> <strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/receiver/addresses/verify</p>

<blockquote>
<p><code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-verify-deposit-addresses">Sample curl command</a></li>
</ul>

<h5 id="toc_32">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_33">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/98675/receiver/addresses/verify</code></pre></div>

<h6 id="toc_34">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;addresses&quot;: [
    &quot;0x46d4AD967F68253f61D45a044dC7dC7B13E5A4B3&quot;,
    &quot;0x107FF19Ea5fB7de78392e7AcC2A2C7eace891bDc&quot;
  ]
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_35">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">addresses</td>
<td style="text-align: left">array</td>
<td style="text-align: left">required</td>
<td style="text-align: left">Specify the addresses to be verified</td>
</tr>
</tbody>
</table>

<blockquote>
<p>If the address can not be found or invalid, it will not be listed in the response.</p>
</blockquote>

<h5 id="toc_36">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;addresses&quot;: {
    &quot;0x107FF19Ea5fB7de78392e7AcC2A2C7eace891bDc&quot;: {
      &quot;create_time&quot;: &quot;2021-12-05T16:23:20Z&quot;,
      &quot;label&quot;: &quot;987444413&quot;
    },
    &quot;0x46d4AD967F68253f61D45a044dC7dC7B13E5A4B3&quot;: {
      &quot;create_time&quot;: &quot;2021-12-05T16:23:20Z&quot;,
      &quot;label&quot;: &quot;&quot;
    }
  }
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">addresses</td>
<td style="text-align: left">key-value pairs</td>
<td style="text-align: left">The address-info pairs</td>
</tr>
<tr>
<td style="text-align: left">label</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Associated label</td>
</tr>
<tr>
<td style="text-align: left">create_time</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Address creation time (UTC)</td>
</tr>
</tbody>
</table>

<h5 id="toc_37">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_38"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-deposit-addresses"></a></p>

<h3 id="toc_39">Query Deposit Addresses</h3>

<p>Query the deposit addresses created by the <a href="#create-deposit-addresses">Create Deposit Addresses</a> API.</p>

<h5 id="toc_40">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/addresses?start_index=<code>from</code>&amp;request_number=<code>count</code></p>

<blockquote>
<p><code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-deposit-addresses">Sample curl command</a></li>
</ul>

<h5 id="toc_41">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_42">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/179654/addresses?start_index=0&amp;request_number=3</code></pre></div>

<p>The request includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">start_index</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, default <code>0</code></td>
<td style="text-align: left">Specify address start index</td>
</tr>
<tr>
<td style="text-align: left">request_number</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, default <code>1000</code>, max <code>5000</code></td>
<td style="text-align: left">Request address count</td>
</tr>
</tbody>
</table>

<h5 id="toc_43">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;wallet_id&quot;: 179654,
  &quot;wallet_count&quot;: 6,
  &quot;wallet_address&quot;: [
    {
      &quot;currency&quot;: 60,
      &quot;token_address&quot;: &quot;&quot;,
      &quot;address&quot;: &quot;0x8c42fD03A5cfba7C3Cd97AB8a09e1a3137Ef33C3&quot;,
      &quot;memo&quot;: &quot;&quot;
    },
    {
      &quot;currency&quot;: 60,
      &quot;token_address&quot;: &quot;&quot;,
      &quot;address&quot;: &quot;0x4d3EB54b602BF4985CE457089F9fB084Af597A2C&quot;,
      &quot;memo&quot;: &quot;&quot;
    },
    {
      &quot;currency&quot;: 60,
      &quot;token_address&quot;: &quot;&quot;,
      &quot;address&quot;: &quot;0x74dc3fB523295C87C0b93E48744Ce94fe3a8Ef5e&quot;,
      &quot;memo&quot;: &quot;&quot;
    }
  ]
}</code></pre></div>

<p>An example of a successful response of the delegated wallet:</p>

<div><pre><code class="language-javascript">{
  &quot;wallet_id&quot;: 132342,
  &quot;wallet_count&quot;: 7,
  &quot;wallet_address&quot;: [
    {
      &quot;address&quot;: &quot;0xB02B189b423f58E1c035f02786eA5BC6E7762718&quot;,
      &quot;address_index&quot;: 1,
      &quot;currency&quot;: 99999999997,
      &quot;memo&quot;: &quot;&quot;,
      &quot;token_address&quot;: &quot;&quot;
    },
    {
      &quot;address&quot;: &quot;0xace596bfd34E86d15F28b1743B99B26FAFcCC9F5&quot;,
      &quot;address_index&quot;: 2,
      &quot;currency&quot;: 99999999997,
      &quot;memo&quot;: &quot;&quot;,
      &quot;token_address&quot;: &quot;&quot;
    },
    {
      &quot;address&quot;: &quot;0x22505d4E113aE8b7A7ACdAECABfD9601E0c41ca8&quot;,
      &quot;address_index&quot;: 3,
      &quot;currency&quot;: 99999999997,
      &quot;memo&quot;: &quot;&quot;,
      &quot;token_address&quot;: &quot;&quot;
    }
  ]
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">wallet_id</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">ID of request wallet</td>
</tr>
<tr>
<td style="text-align: left">wallet_address</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Array of wallet addresses</td>
</tr>
<tr>
<td style="text-align: left">wallet_count</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Total count of deposit addresses</td>
</tr>
<tr>
<td style="text-align: left">address_index</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">The corresponding index of the address</td>
</tr>
</tbody>
</table>

<blockquote>
<p>Refer to <a href="#currency-definition">Currency Definition</a> or <a href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md">here</a> for more detailed currency definitions</p>

<p>If this is an ETH contract collection deposit wallet, only the deployed address will be returned.</p>
</blockquote>

<h5 id="toc_44">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_45"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-deployed-contract-deposit-addresses"></a></p>

<h3 id="toc_46">Query Deployed Contract Deposit Addresses</h3>

<p>Query deployed contract deposit addresses created by the <a href="#create-deposit-addresses">Create Deposit Addresses</a> API.</p>

<h5 id="toc_47">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/addresses/contract_txid?txids=<code>txid1,txid2</code></p>

<blockquote>
<p>For the ETH contract collection deposit walle. Only deployed addresses will be returned.</p>
</blockquote>

<ul>
<li><a href="#curl-query-deployed-contract-deposit-addresses">Sample curl command</a></li>
</ul>

<h5 id="toc_48">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_49">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/179654/addresses/contract_txid?txids=0xe6dfe0d283690f636df5ea4b9df25552e6b576b88887bfb5837016cdd696e754,0xdb18fd33c9a6809bfc341a1c0b2c092be5a360f394c85367f9cf316579281ab4</code></pre></div>

<p>The request includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">txids</td>
<td style="text-align: left">string</td>
<td style="text-align: left">requried, max <code>10</code> transaction IDs</td>
<td style="text-align: left">Transaction ID used to deploy collection contract</td>
</tr>
</tbody>
</table>

<h5 id="toc_50">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;addresses&quot;: {
    &quot;0xdb18fd33c9a6809bfc341a1c0b2c092be5a360f394c85367f9cf316579281ab4&quot;: {
      &quot;address&quot;: &quot;0x00926cE2BbF56317c72234a0Fb8A65A1A15F7103&quot;,
      &quot;currency&quot;: 60,
      &quot;memo&quot;: &quot;&quot;,
      &quot;token_address&quot;: &quot;&quot;
    },
    &quot;0xe6dfe0d283690f636df5ea4b9df25552e6b576b88887bfb5837016cdd696e754&quot;: {
      &quot;address&quot;: &quot;0xf3747e3edbd8B8414718dd51330415c171e79208&quot;,
      &quot;currency&quot;: 60,
      &quot;memo&quot;: &quot;&quot;,
      &quot;token_address&quot;: &quot;&quot;
    }
  }
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">addresses</td>
<td style="text-align: left">map object</td>
<td style="text-align: left">The map KEY is Transaction ID used to deploy collection contract and the map VALUE is the address information</td>
</tr>
</tbody>
</table>

<h5 id="toc_51">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_52"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-pool-address"></a></p>

<h3 id="toc_53">Query Pool Address</h3>

<p>Get the pool address of a deposit wallet. The pool address has different functionality in different cryptocurrencies.</p>

<blockquote>
<p>In BTC or ETH, the cryptocurrency in the pool address will be used to pay for token transfer(ex. USDT-Omni, ERC20).</p>

<p>BCH/BSV need at least 0.01 BCH/BSV in the pool address for polluting the non-fork coin and make the collection successfully.</p>

<p>In EOS, XRP, XLM or BNB, the pool address is the user&#39;s deposit address. All user deposits will be distinguished by memo / tag field.</p>

<p>LTC, DOGE, DASH, DOT(WND), FIL. SOL and ADA does not support pool address.</p>
</blockquote>

<h5 id="toc_54">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/pooladdress</p>

<blockquote>
<p><code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-get-pool-address">Sample curl command</a></li>
</ul>

<h5 id="toc_55">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_56">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/179654/pooladdress</code></pre></div>

<h5 id="toc_57">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;address&quot;: &quot;0x36099775afa8d6363aC8e5d0fC698306C021a858&quot;
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Pool address of wallet</td>
</tr>
</tbody>
</table>

<h5 id="toc_58">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">this wallet does not support pool address</td>
<td style="text-align: left">-</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_59"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-pool-address-balance"></a></p>

<h3 id="toc_60">Query Pool Address Balance</h3>

<p>Get the pool address balance of a deposit wallet.</p>

<h5 id="toc_61">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/pooladdress/balance</p>

<blockquote>
<p><code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-pool-address-balance">Sample curl command</a></li>
</ul>

<h5 id="toc_62">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_63">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/179654/pooladdress/balance</code></pre></div>

<h5 id="toc_64">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;balance&quot;: &quot;0.515&quot;,
  &quot;currency&quot;: 60,
  &quot;unconfirm_balance&quot;: &quot;0&quot;,
  &quot;wallet_address&quot;: &quot;0xb6ad80c96D093EA584AfcB9443927812d3e4Bd94&quot;
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Pool address balance</td>
</tr>
<tr>
<td style="text-align: left">unconfirm_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Unconfirmed pool address balance</td>
</tr>
<tr>
<td style="text-align: left">currency</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Cryptocurrency of the wallet</td>
</tr>
<tr>
<td style="text-align: left">wallet_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Pool address of the wallet</td>
</tr>
</tbody>
</table>

<h5 id="toc_65">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_66"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-invalid-deposit-addresses"></a></p>

<h3 id="toc_67">Query Invalid Deposit Addresses</h3>

<p>When an abnormal deposit is detected, the CYBAVO SOFA system will set the deposit address to invalid. Use this API to obtain the all invalid deposit addresses for further usage.</p>

<h5 id="toc_68">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/addresses/invalid-deposit</p>

<blockquote>
<p><code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-invalid-deposit-addresses">Sample curl command</a></li>
</ul>

<h5 id="toc_69">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_70">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/179654/addresses/invalid-deposit</code></pre></div>

<h5 id="toc_71">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;addresses&quot;: [&quot;0x5dB3d8C70dAa9C919F9962221c2fDDbe8EBAa5F2&quot;]
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">addresses</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Array of invalid deposit address</td>
</tr>
</tbody>
</table>

<h5 id="toc_72">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_73"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-deposit-callback-detail"></a></p>

<h3 id="toc_74">Query Deposit Callback Detail</h3>

<p>Query the detailed information of the deposit callback by the tx ID and the vout index.</p>

<h5 id="toc_75">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/receiver/notifications/txid/<code>TX_ID</code>/<code>VOUT_INDEX</code></p>

<blockquote>
<p><code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-deposit-callback-detail">Sample curl command</a></li>
</ul>

<h5 id="toc_76">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_77">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/179654/receiver/notifications/txid/0xb72a81976f780445decd13a35c24974c4e32665cb57d79b3f7a601c775f6a7d8/0</code></pre></div>

<h5 id="toc_78">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;notification&quot;: {
    &quot;addon&quot;: {},
    &quot;amount&quot;: &quot;2000000000000000000&quot;,
    &quot;block_height&quot;: 7757485,
    &quot;broadcast_at&quot;: 1587441501,
    &quot;chain_at&quot;: 1587441501,
    &quot;confirm_blocks&quot;: 166027,
    &quot;currency&quot;: &quot;ETH&quot;,
    &quot;fees&quot;: &quot;126000000000000&quot;,
    &quot;from_address&quot;: &quot;0x8382Cc1B05649AfBe179e341179fa869C2A9862b&quot;,
    &quot;memo&quot;: &quot;&quot;,
    &quot;order_id&quot;: &quot;&quot;,
    &quot;processing_state&quot;: 2,
    &quot;serial&quot;: 90000000547,
    &quot;state&quot;: 3,
    &quot;tindex&quot;: 27,
    &quot;to_address&quot;: &quot;0x32d638773cB85965422b3B98e9312Fc9392307BC&quot;,
    &quot;txid&quot;: &quot;0xb72a81976f780445decd13a35c24974c4e32665cb57d79b3f7a601c775f6a7d8&quot;,
    &quot;type&quot;: 1,
    &quot;vout_index&quot;: 0,
    &quot;wallet_id&quot;: 179654
  }
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">notification</td>
<td style="text-align: left">object</td>
<td style="text-align: left">Refer to <a href="#callback-definition">Callback Definition</a></td>
</tr>
</tbody>
</table>

<h5 id="toc_79">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request or the callback (txid+vout_index) not found</td>
</tr>
</tbody>
</table>

<h5 id="toc_80"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="resend-deposit-callbacks"></a></p>

<h3 id="toc_81">Resend Deposit/Collection Callbacks</h3>

<p>The callback handler can call this API to resend pending, risk-controlled or failed deposit/collection callbacks.</p>

<p>Refer to <a href="#callback-integration">Callback Integration</a> for callback rules.</p>

<blockquote>
<p>The resend operation could be requested on the web control panel as well.</p>
</blockquote>

<h5 id="toc_82">Request</h5>

<p><strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/collection/notifications/manual</p>

<blockquote>
<p><code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-resend-deposit-callbacks">Sample curl command</a></li>
</ul>

<h5 id="toc_83">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_84">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/179654/collection/notifications/manual</code></pre></div>

<h6 id="toc_85">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;notification_id&quot;: 0
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_86">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">notification_id</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">required, 0 means all</td>
<td style="text-align: left">Specify callback ID to resend</td>
</tr>
</tbody>
</table>

<blockquote>
<p>This ID equal to the serial field of callback data.</p>
</blockquote>

<h5 id="toc_87">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;count&quot;: 0
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">count</td>
<td style="text-align: left">int</td>
<td style="text-align: left">Count of callbacks just resent</td>
</tr>
</tbody>
</table>

<h5 id="toc_88">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_89"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-deposit-wallet-balance"></a></p>

<h3 id="toc_90">Query Deposit Wallet Balance</h3>

<p>Get the deposit wallet balance.</p>

<h5 id="toc_91">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/receiver/balance</p>

<blockquote>
<p><code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-deposit-wallet-balance">Sample curl command</a></li>
</ul>

<h5 id="toc_92">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_93">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/959272/receiver/balance</code></pre></div>

<h5 id="toc_94">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;currency&quot;: 60,
  &quot;token_address&quot;: &quot;&quot;,
  &quot;balance&quot;: &quot;0.619673333517576&quot;,
  &quot;token_balance&quot;: &quot;&quot;
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">currency</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Registered coin types. Refer to <a href="#currency-definition">Currency Definition</a></td>
</tr>
<tr>
<td style="text-align: left">token_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token contract address</td>
</tr>
<tr>
<td style="text-align: left">balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Deposit wallet balance</td>
</tr>
<tr>
<td style="text-align: left">token_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Deposit wallet token balance</td>
</tr>
</tbody>
</table>

<h5 id="toc_95">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_96"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="update-deposit-address-label"></a></p>

<h3 id="toc_97">Update Deposit Address Label</h3>

<p>Update the label of the deposit address.</p>

<h5 id="toc_98">Request</h5>

<p><strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/addresses/label</p>

<blockquote>
<p><code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>

<p>The label will be automatically synced between the parent and child wallet.</p>
</blockquote>

<ul>
<li><a href="#curl-update-deposit-address-label">Sample curl command</a></li>
</ul>

<h5 id="toc_99">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_100">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/98675/addresses/label</code></pre></div>

<h6 id="toc_101">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;address&quot;: &quot;0x2B974a3De0b491bB26e0bF146E6cDaC36EFD574a&quot;,
  &quot;label&quot;: &quot;take-some-notes&quot;
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_102">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required</td>
<td style="text-align: left">Specify address to update the label</td>
</tr>
<tr>
<td style="text-align: left">label</td>
<td style="text-align: left">string</td>
<td style="text-align: left">optional, set empty to clear the label</td>
<td style="text-align: left">Specify the label of the address</td>
</tr>
</tbody>
</table>

<h5 id="toc_103">Response Format</h5>

<p>Status code 200 represnts a successful operation</p>

<h5 id="toc_104">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The address can not be found</td>
</tr>
</tbody>
</table>

<h5 id="toc_105"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-deposit-address-label"></a></p>

<h3 id="toc_106">Query Deposit Address Label</h3>

<p>Query the labels of the deposit addresses.</p>

<h5 id="toc_107">Request</h5>

<p><code>VIEW</code> <strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/addresses/get_labels</p>

<blockquote>
<p><code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-deposit-address-label">Sample curl command</a></li>
</ul>

<h5 id="toc_108">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_109">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/98675/addresses/get_labels</code></pre></div>

<h6 id="toc_110">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;addresses&quot;: [
    &quot;0x2B974a3De0b491bB26e0bF146E6cDaC36EFD574a&quot;,
    &quot;0xF401AC94D9672e79c68e56A6f822b666E5A7d644&quot;
  ]
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_111">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">addresses</td>
<td style="text-align: left">array</td>
<td style="text-align: left">required</td>
<td style="text-align: left">Specify the addresses to query labels</td>
</tr>
</tbody>
</table>

<h5 id="toc_112">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;labels&quot;: {
    &quot;0x2B974a3De0b491bB26e0bF146E6cDaC36EFD574a&quot;: &quot;take-some-notes&quot;,
    &quot;0xF401AC94D9672e79c68e56A6f822b666E5A7d644&quot;: &quot;&quot;
  }
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">labels</td>
<td style="text-align: left">key-value pairs</td>
<td style="text-align: left">The address-label pairs</td>
</tr>
</tbody>
</table>

<blockquote>
<p>If the address can not be found, it will not be listed in the response.</p>
</blockquote>

<h5 id="toc_113">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_114"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-delegated-address-balance"></a></p>

<h3 id="toc_115">Query Delegated Address Balance</h3>

<p>Query the balace of delegated addresses.</p>

<h5 id="toc_116">Request</h5>

<p><code>VIEW</code> <strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/receiver/get-balances</p>

<blockquote>
<p><code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-delegated-address-balance">Sample curl command</a></li>
</ul>

<h5 id="toc_117">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_118">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/708453/receiver/get-balances</code></pre></div>

<h6 id="toc_119">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;addresses&quot;: [
    &quot;0x6A2969E4496d5b27967a68b411D7e0218943c1B6&quot;,
    &quot;0x1EA22Ed0347E6C9f852cfcBEFE752A026450164b&quot;,
    &quot;0x2baB9B3af6041960322a248d5315850fc79a3881&quot;
  ]
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_120">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">addresses</td>
<td style="text-align: left">array</td>
<td style="text-align: left">required</td>
<td style="text-align: left">Specify the addresses to query balance</td>
</tr>
</tbody>
</table>

<blockquote>
<p>Maximum 10 addresses per inquiry, more than 10 addresses will be discarded automatically. If the address can not be found, it will not be listed in the response.</p>
</blockquote>

<h5 id="toc_121">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;balances&quot;: {
    &quot;0x1EA22Ed0347E6C9f852cfcBEFE752A026450164b&quot;: {
      &quot;balance&quot;: &quot;0.009979649723530324&quot;,
      &quot;token_balance&quot;: &quot;1&quot;,
      &quot;token_id_balances&quot;: [
        {
          &quot;token_id&quot;: &quot;9901&quot;
        }
      ]
    },
    &quot;0x2baB9B3af6041960322a248d5315850fc79a3881&quot;: {
      &quot;balance&quot;: &quot;0&quot;,
      &quot;token_balance&quot;: &quot;0&quot;
    },
    &quot;0x6A2969E4496d5b27967a68b411D7e0218943c1B6&quot;: {
      &quot;balance&quot;: &quot;0.019979076967554852&quot;,
      &quot;token_balance&quot;: &quot;2&quot;,
      &quot;token_id_balances&quot;: [
        {
          &quot;token_id&quot;: &quot;9903&quot;
        },
        {
          &quot;token_id&quot;: &quot;9902&quot;
        }
      ]
    }
  }
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">balances</td>
<td style="text-align: left">key-value pairs</td>
<td style="text-align: left">Listed addresses&#39; balance</td>
</tr>
<tr>
<td style="text-align: left">balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Address balance. For token wallet this is the mapped wallet&#39;s balance.</td>
</tr>
<tr>
<td style="text-align: left">token_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Wallet token balance</td>
</tr>
<tr>
<td style="text-align: left">token<em>id</em>balances</td>
<td style="text-align: left">array</td>
<td style="text-align: left">For ERC1155, ERC721 token wallet</td>
</tr>
</tbody>
</table>

<h5 id="toc_122">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_123"><a href="#table-of-contents">Back to top</a></h5>

<h1 id="toc_124">Withdrawal Wallet API</h1>

<p><a name="withdraw-assets"></a></p>

<h3 id="toc_125">Withdraw Assets</h3>

<p>To withdraw assets from an withdrawal wallet, the caller must to provide an unique <strong>order_id</strong> for each request, the CYBAVO SOFA system will send the callback with the unique <strong>order_id</strong> when the withdrawal is success (from <code>in pool</code> state to <code>in chain</code> state). </p>

<p>By default, the withdraw API will perform the address check to verify that the outgoing address is good or not. If the address in the request is marked as a problematic address, the request will be aborted. The error message will identify the problematic addresses. Set the <code>ignore_black_list</code> to true to skip the address check.</p>

<p>The withdrawal API can also interact with the contracts (ERC/BEP 721/1155) deployed in the SOFA system.</p>

<blockquote>
<p><strong>⚠️ Alert:</strong> Use the <a href="#query-latest-withdrawal-transaction-state">query API</a> to confirm the current withdrawal status when uncertain (e.g. request timeout) to prevent fund loss due to repetitive transaction.</p>
</blockquote>

<h5 id="toc_126">Request</h5>

<p><strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/transactions</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>

<p>The order_id must be prefixed. <strong>Find prefix from corresponding wallet detail on web control panel.</strong></p>

<p>If withdraw BNB or XRP, this API will check whether the destination addresse needs memo / destination tag or not. If the address does need memo / destination tag, the API will fail without memo / destination tag specified.</p>
</blockquote>

<ul>
<li><a href="#curl-withdraw-assets">Sample curl command</a></li>
</ul>

<h5 id="toc_127">Request Format</h5>

<p>An example of the request:</p>

<blockquote>
<p>The prefix is 888888_ in following sample request.</p>
</blockquote>

<h6 id="toc_128">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/68451/sender/transactions</code></pre></div>

<h6 id="toc_129">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;requests&quot;: [
    {
      &quot;order_id&quot;: &quot;888888_1&quot;,
      &quot;address&quot;: &quot;0x83eE561B2aBD000FF00d6ca22f38b29d4a760d4D&quot;,
      &quot;amount&quot;: &quot;0.0001&quot;,
      &quot;memo&quot;: &quot;memo-001&quot;,
      &quot;user_id&quot;: &quot;USER01&quot;,
      &quot;message&quot;: &quot;message-001&quot;,
      &quot;block_average_fee&quot;: 5
    },
    {
      &quot;order_id&quot;: &quot;888888_2&quot;,
      &quot;address&quot;: &quot;0xf16B7B8900F0d2f682e0FFe207a553F52B6C7015&quot;,
      &quot;amount&quot;: &quot;0.0002&quot;,
      &quot;manual_fee&quot;: 50
    },
    {
      &quot;order_id&quot;: &quot;888888_3&quot;,
      &quot;address&quot;: &quot;0x9638fa816ccd35389a9a98a997ee08b5321f3eb9&quot;,
      &quot;amount&quot;: &quot;0.0002&quot;,
      &quot;message&quot;: &quot;message-003&quot;
    },
    {
      &quot;order_id&quot;: &quot;888888_4&quot;,
      &quot;address&quot;: &quot;0x2386b18e76184367b844a402332703dd2eec2a90&quot;,
      &quot;amount&quot;: &quot;0&quot;,
      &quot;contract_abi&quot;:&quot;create:0x000000000000000000000000000000000000000000000000000000000000138800000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000&quot;,
      &quot;user_id&quot;: &quot;USER04&quot;,
      &quot;ignore_gas_estimate_fail&quot;: true
    },
    {
      &quot;order_id&quot;: &quot;888888_5&quot;,
      &quot;address&quot;: &quot;0x6A2969E4496d5b27967a68b411D7e0218943c1B6&quot;,
      &quot;amount&quot;: &quot;1&quot;,
      &quot;token_id&quot;: &quot;985552421&quot;
    }
  ],
  &quot;ignore_black_list&quot;: false
}</code></pre></div>

<p>For delegated wallet</p>

<div><pre><code class="language-javascript">{
  &quot;requests&quot;: [
    {
      &quot;order_id&quot;: &quot;132342_1001&quot;,
      &quot;address&quot;: &quot;0x480A8507C63A27f05cd29BfB3Bb4F7bA1B6ba102&quot;,
      &quot;from_address&quot;: &quot;0xEb0e93980Cd0C5D3868B7da32A5604085f9F813C&quot;,
      &quot;from_address_index&quot;: 7,
      &quot;amount&quot;: &quot;0.1&quot;
    },
    {
      &quot;order_id&quot;: &quot;132342_1002&quot;,
      &quot;address&quot;: &quot;0xfe67e5b57ecccaa3f95bb90466651391024f25fc&quot;,
      &quot;amount&quot;: &quot;0&quot;,
      &quot;contract_abi&quot;: &quot;transferFrom:0x0000000000000000000000006a2969e4496d5b27967a68b411d7e0218943c1b60000000000000000000000001ea22ed0347e6c9f852cfcbefe752a026450164b00000000000000000000000000000000000000000000000000000000000026ac&quot;,
      &quot;from_address&quot;: &quot;0x1EA22Ed0347E6C9f852cfcBEFE752A026450164b&quot;,
      &quot;from_address_index&quot;: 20
    }
  ]
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_130">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">order_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required, max <code>255</code> chars</td>
<td style="text-align: left">Specify an unique ID, order ID must be prefixed</td>
</tr>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required</td>
<td style="text-align: left">Outgoing address (<code>address</code> must be a contract address, if the contract_abi is not empty)</td>
</tr>
<tr>
<td style="text-align: left">amount</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required</td>
<td style="text-align: left">Withdrawal amount</td>
</tr>
<tr>
<td style="text-align: left">contract_abi</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required, if calls contract ABI</td>
<td style="text-align: left">Specify the ABI method and the parameters, in the format <code>ABI_method:parameters</code></td>
</tr>
<tr>
<td style="text-align: left">memo</td>
<td style="text-align: left">string</td>
<td style="text-align: left">optional</td>
<td style="text-align: left">Memo on blockchain (This memo will be sent to blockchain). Refer to <a href="#memo-requirement">Memo Requirement</a></td>
</tr>
<tr>
<td style="text-align: left">user_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">optional</td>
<td style="text-align: left">Specify certain user</td>
</tr>
<tr>
<td style="text-align: left">message</td>
<td style="text-align: left">string</td>
<td style="text-align: left">optional</td>
<td style="text-align: left">Message (This message only saved on CYBAVO, not sent to blockchain)</td>
</tr>
<tr>
<td style="text-align: left">block_average_fee</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, range <code>1~100</code></td>
<td style="text-align: left">Use average blockchain fee within latest N blocks. This option does not work for XRP, XLM, BNB, DOGE, EOS, TRX, ADA, DOT and SOL cryptocurrencies.</td>
</tr>
<tr>
<td style="text-align: left">manual_fee</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, range <code>1~2000</code></td>
<td style="text-align: left">Specify blockchain fee in smallest unit of wallet currency <strong><code>(For ETH/BSC/HECO/OKT/OP/ARB/CELO/FTM/PALM, the unit is gwei. The unit returned by the Query Average Fee API is wei, divided by 1000000000 to get the correct unit.</code></strong>. This option does not work for XRP, XLM, BNB, DOGE, EOS, TRX, ADA, DOT and SOL cryptocurrencies.</td>
</tr>
<tr>
<td style="text-align: left">token_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">optional</td>
<td style="text-align: left">Specify the token ID to be transferred</td>
</tr>
<tr>
<td style="text-align: left">from_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required, for delegated wallet</td>
<td style="text-align: left">Specify the delegated address for the request</td>
</tr>
<tr>
<td style="text-align: left">from_address_index</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">required, for delegated wallet</td>
<td style="text-align: left">Specify the corresponding index of the <code>from_address</code></td>
</tr>
<tr>
<td style="text-align: left">ignore_gas_estimate_fail</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">optional, default <code>false</code></td>
<td style="text-align: left"><strong>FOR DEBUG PURPOSE ONLY</strong>. After setting, the ABI EVM gas estimation will not be performed(<strong>Apply to individual order</strong>).</td>
</tr>
<tr>
<td style="text-align: left">ignore_black_list</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">optional, default <code>false</code></td>
<td style="text-align: left">After setting, the address check will not be performed. <strong>Apply to all orders</strong>.</td>
</tr>
</tbody>
</table>

<blockquote>
<p>The order_id must be prefixed. Find prefix from corresponding wallet detail on web control panel</p>

<p>block_average_fee and manual_fee are mutually exclusive configurations. If neither of these fields is set, the fee will refer to corresponding withdrawal policy of the withdrawal wallet.</p>

<p>The format of the <code>contract_abi</code> is <code>ABI_method:hex_parameters</code>, for example: create:0x000000000000000000000000000000000000000000000000000000000000138800000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000. The parameters must be encoded by <a href="https://web3js.readthedocs.io/en/v1.3.4/web3-eth-abi.html#encodeparameters">web3.eth.abi.encodeParameters() of web3.js</a>.</p>

<p>Only mapped wallets can use <code>contract_abi</code> to call ABI on smart contracts.</p>

<p>Only ERC721/1155 token wallet can use <code>token_id</code> to transfer token. For ERC721 wallets, if <code>token_id</code> is specified, the amount will be treated as 1.</p>

<p>The <code>block_average_fee</code> and <code>manual_fee</code> do not work for XRP, XLM, BNB, DOGE, EOS, TRX, ADA, DOT and SOL cryptocurrencies.</p>
</blockquote>

<h5 id="toc_131">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;results&quot;: {
    &quot;1&quot;: 20000000001,
    &quot;2&quot;: 20000000002
  }
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">results</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Array of withdraw result (order ID/withdraw transaction ID pair), if succeeds</td>
</tr>
</tbody>
</table>

<p>An example response of the request contains problematic addresses:</p>

<div><pre><code class="language-javascript">{
    &quot;error_code&quot;: 827,
    &quot;error&quot;: &quot;Outgoing address in black list, abort transaction&quot;,
    &quot;blacklist&quot;: {
        &quot;0x83eE561B2aBD000FF00d6ca22f38b29d4a760d4D&quot;: [
            &quot;Involve phishing activity&quot;,
            &quot;Involve cybercrime related&quot;
        ]
    }
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">error_code</td>
<td style="text-align: left">int</td>
<td style="text-align: left">The error code</td>
</tr>
<tr>
<td style="text-align: left">error</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The error message</td>
</tr>
<tr>
<td style="text-align: left">blacklist</td>
<td style="text-align: left">object</td>
<td style="text-align: left">The object describes all problematic addresses and their causes.</td>
</tr>
</tbody>
</table>

<h5 id="toc_132">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">827</td>
<td style="text-align: left">Outgoing address in black list, abort transaction</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Some outgoing addresses are blacklisted, examine the response &#39;blacklist&#39; field for detailed information</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">the maximum request limit is exceeded</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">955</td>
<td style="text-align: left">There is no content in your withdrawal request, please check your input</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The post body of request doesn&#39;t conform the API request specification</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">order_id must start with {ORDERID_PREFIX}</td>
<td style="text-align: left">The prefix of order_id is incorrect</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">order_id: {ORDER_ID} - the character \ or / is prohibited</td>
<td style="text-align: left">{ORDER_ID} is invalid</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">order_id: {ORDER_ID} is invalid</td>
<td style="text-align: left">{ORDER_ID} is invalid</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">order_id: {ORDER_ID} - memo is required</td>
<td style="text-align: left">The outgoing address of {ORDER_ID} needs memo specified</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">order_id: {ORDER_ID} - destination tag is required</td>
<td style="text-align: left">The outgoing address of {ORDER_ID} needs destination tag specified</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">order_id: {ORDER_ID} - invalid block_average_fee</td>
<td style="text-align: left">The block_average_fee is out of range</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">order_id: {ORDER_ID} - invalid manual_fee</td>
<td style="text-align: left">The manual_fee is out of range</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">order_id: {ORDER_ID} - from_address is required</td>
<td style="text-align: left"><code>from_address</code> is a required parameter</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">order_id: {ORDER_ID} - from_address_index is required</td>
<td style="text-align: left"><code>from_address_index</code> is a required parameter</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">order_id: {ORDER_ID} - from_address_index not match</td>
<td style="text-align: left"><code>from_address_index</code> is not consistent with the index of the <code>from_address</code></td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">order_id: {ORDER_ID} - invalid from_address</td>
<td style="text-align: left"><code>from_address</code> does not exist</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">order_id: {ORDER_ID} - from_address not support</td>
<td style="text-align: left"><code>from_address</code> cannot be used in non-delegated wallets</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">399</td>
<td style="text-align: left">Duplicated entry: {ORDER_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The {ORDER_ID} is duplicated</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">945</td>
<td style="text-align: left">The max length of BNB memo is 256 chars</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the length of BNB memo</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">946</td>
<td style="text-align: left">The max length of EOS memo is 128 chars</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the length of EOS memo</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">947</td>
<td style="text-align: left">The max length of XRP destination tag is 20 chars</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the length of XRP destination tag</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">948</td>
<td style="text-align: left">The max length of XLM memo is 20 chars</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the length of XLM memo</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">818</td>
<td style="text-align: left">Destination Tag must be integer</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Wrong XRP destination tag format</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">944</td>
<td style="text-align: left">The max length of order id is 255 chars</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the length of order_id</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">Detailed error message</td>
<td style="text-align: left">Failed to connect to authentication callback URL</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">The withdrawal request has been rejected, {RESPONSE_BODY}</td>
<td style="text-align: left">The withdrawal request has been rejected by the authentication callback</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">The withdrawal request has been rejected, unexpected response {HTTP_CODE}: {RESPONSE_BODY}</td>
<td style="text-align: left">The authentication callback URL returned status code other than 200 or 400</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">Unrecognized response: {RESPONSE_BODY}, &#39;OK&#39; expected</td>
<td style="text-align: left">The returned status code is 200 but the body is not <strong>OK</strong></td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">request IP ({IPv4}) not in ACL</td>
<td style="text-align: left">The request IP not in the withdrawal ACL</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">invalid amount {AMOUNT}</td>
<td style="text-align: left">The requested amount is not a valid number</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">invalid amount decimals {AMOUNT}</td>
<td style="text-align: left">The decimals of the requested amount exceeds the valid range</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">955</td>
<td style="text-align: left">There is no content in your withdrawal request, please check your input</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No orders found in the request that may be caused by an incorrectly formatted post body</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">312</td>
<td style="text-align: left">Policy not found</td>
<td style="text-align: left">no active withdrawal policy found</td>
<td style="text-align: left">No active withdrawal policy found</td>
</tr>
</tbody>
</table>

<h5 id="toc_133"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="cancel-withdrawal-request"></a></p>

<h3 id="toc_134">Cancel Withdrawal Request</h3>

<p>To cancel the withdrawal request which state is <code>Init</code> or <code>Failed</code>. The request state can be checked on web control panel or query through this <a href="#query-withdrawal-callback-detail">API</a> (represents <code>state</code> = 0 or 5 ).</p>

<h5 id="toc_135">Request</h5>

<p><strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/transactions/<code>ORDER_ID</code>/cancel</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-cancel-withdrawal-request">Sample curl command</a></li>
</ul>

<h5 id="toc_136">Request Format</h5>

<p>An example of the request:</p>

<blockquote>
<p>The prefix is 888888_ in following sample request.</p>
</blockquote>

<h6 id="toc_137">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/68451/sender/transactions/88888_1/cancel</code></pre></div>

<h5 id="toc_138">Response Format</h5>

<p>The HTTP 200 means the withdrawal request has been cancelled successfully.</p>

<h5 id="toc_139">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">177</td>
<td style="text-align: left">Illegal state</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The {ORDER_ID} withdrawal request is not in <code>Init</code> or <code>Failed</code> state</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The {ORDER_ID} not found</td>
</tr>
</tbody>
</table>

<h5 id="toc_140"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-latest-withdrawal-transaction-state"></a></p>

<h3 id="toc_141">Query Latest Withdrawal Transaction State</h3>

<p>Check the latest withdrawal transaction state of certain order ID.</p>

<blockquote>
<p>The order ID is used in the <a href="#withdraw-assets">withdraw assets</a> API.</p>
</blockquote>

<h5 id="toc_142">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/transactions/<code>ORDER_ID</code></p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-latest-withdrawal-transaction-state">Sample curl command</a></li>
</ul>

<h5 id="toc_143">Request Format</h5>

<p>An example of the request:</p>

<blockquote>
<p>The prefix is 888888_ in following sample request.</p>
</blockquote>

<h6 id="toc_144">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/68451/sender/transactions/888888_1</code></pre></div>

<h5 id="toc_145">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;order_id&quot;: &quot;888888_1&quot;,
  &quot;address&quot;: &quot;0xaa0cA2f9bA3A33a915a27e289C9719adB2ad7d73&quot;,
  &quot;amount&quot;: &quot;1.11&quot;,
  &quot;memo&quot;: &quot;&quot;,
  &quot;in_chain_block&quot;: 1016603,
  &quot;txid&quot;: &quot;db0f3a27de564a411aeff1d2cb3234c54817de1ecc2258a510a50c5a1063d41c&quot;,
  &quot;create_time&quot;: &quot;2020-03-16T10:27:57Z&quot;
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">order_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The unique ID specified in <code>sender/transactions</code> API</td>
</tr>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Outgoing address</td>
</tr>
<tr>
<td style="text-align: left">amount</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Withdrawal amount</td>
</tr>
<tr>
<td style="text-align: left">memo</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Memo on blockchain</td>
</tr>
<tr>
<td style="text-align: left">in_chain_block</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">The block that contains this transaction</td>
</tr>
<tr>
<td style="text-align: left">txid</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Transaction ID</td>
</tr>
<tr>
<td style="text-align: left">create_time</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The withdrawal time in UTC</td>
</tr>
</tbody>
</table>

<h5 id="toc_146">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The {ORDER_ID} not found</td>
</tr>
</tbody>
</table>

<h5 id="toc_147"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-all-withdrawal-transaction-states"></a></p>

<h3 id="toc_148">Query All Withdrawal Transaction States</h3>

<p>Check the all withdrawal transaction states of certain order ID.</p>

<blockquote>
<p>The order ID is used in the <a href="#withdraw-assets">withdraw assets</a> API.</p>
</blockquote>

<h5 id="toc_149">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/transactions/<code>ORDER_ID</code>/all</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-all-withdrawal-transaction-states">Sample curl command</a></li>
</ul>

<h5 id="toc_150">Request Format</h5>

<p>An example of the request:</p>

<blockquote>
<p>The prefix is 888888_ in following sample request.</p>
</blockquote>

<h6 id="toc_151">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/68451/sender/transactions/888888_1/all</code></pre></div>

<h5 id="toc_152">Response Format</h5>

<p>An example of a successful response:</p>

<blockquote>
<p>The sample shows the states of a resent transaction</p>
</blockquote>

<div><pre><code class="language-javascript">{
  &quot;transactions&quot;: [
    {
      &quot;address&quot;: &quot;0x36a49c68EF1e3f39CDbaE2f5636C74BA10815cea&quot;,
      &quot;amount&quot;: &quot;0.105&quot;,
      &quot;create_time&quot;: &quot;2020-09-24T03:43:17Z&quot;,
      &quot;in_chain_block&quot;: 0,
      &quot;memo&quot;: &quot;&quot;,
      &quot;order_id&quot;: &quot;888888_1&quot;,
      &quot;state&quot;: 6,
      &quot;txid&quot;: &quot;0x2a8a44f1cfed9cd7b86d86170e2418566765f88c5186246f571374df218fd1a1&quot;
    },
    {
      &quot;address&quot;: &quot;0x36a49c68EF1e3f39CDbaE2f5636C74BA10815cea&quot;,
      &quot;amount&quot;: &quot;0.105&quot;,
      &quot;create_time&quot;: &quot;2020-09-24T03:44:35Z&quot;,
      &quot;in_chain_block&quot;: 8742982,
      &quot;memo&quot;: &quot;&quot;,
      &quot;order_id&quot;: &quot;888888_1&quot;,
      &quot;state&quot;: 4,
      &quot;txid&quot;: &quot;0xfbeaae4b87f977bcce8ef44672e035d287b96be24e779757c1a7f598501881ef&quot;
    }
  ]
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">order_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The unique ID specified in <code>sender/transactions</code> API</td>
</tr>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Outgoing address</td>
</tr>
<tr>
<td style="text-align: left">amount</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Withdrawal amount</td>
</tr>
<tr>
<td style="text-align: left">memo</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Memo on blockchain</td>
</tr>
<tr>
<td style="text-align: left">in_chain_block</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">The block that contains this transaction</td>
</tr>
<tr>
<td style="text-align: left">txid</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Transaction ID</td>
</tr>
<tr>
<td style="text-align: left">create_time</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The withdrawal time in UTC</td>
</tr>
<tr>
<td style="text-align: left">state</td>
<td style="text-align: left">int</td>
<td style="text-align: left">Refer to <a href="#transaction-state-definition">Transaction State Definition</a></td>
</tr>
</tbody>
</table>

<h5 id="toc_153">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The {ORDER_ID} not found</td>
</tr>
</tbody>
</table>

<h5 id="toc_154"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-withdrawal-transaction-event-logs"></a></p>

<h3 id="toc_155">Query Withdrawal Transaction Event Logs</h3>

<p>Query event logs of a withdrawal transaction by transaction hash. Only <a href="#evm-compatible-currency">EVM Compatible Currencies</a> are supported. </p>

<h5 id="toc_156">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/transactions/eventlog?txid=<code>TXID</code></p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-withdrawal-transaction-event-logs">Sample curl command</a></li>
</ul>

<h5 id="toc_157">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_158">API with parameters</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/345312/sender/transactions/eventlog?txid=0xe82f0be9b30d840eca64e28e6f7562b7352b3b54519a7e63fb8f6d4609194bb9</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_159">Query Parameters</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">txid</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required</td>
<td style="text-align: left">Representing the transaction hash to query the event log</td>
</tr>
</tbody>
</table>

<h5 id="toc_160">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;logs&quot;: [
    {
      &quot;address&quot;: &quot;0xeCb258697e1A4B1fE11A43fC93bD4907f1EC8c04&quot;,
      &quot;block_hash&quot;: &quot;0x37b6b94b8fac1eb810ddda89ceedabd37f1017f671fe41a245dc6558a25cb4bf&quot;,
      &quot;block_number&quot;: 11173598,
      &quot;data&quot;: &quot;000000000000000000000000000000000000000000000000000000003b9aca00&quot;,
      &quot;index&quot;: 0,
      &quot;removed&quot;: false,
      &quot;topics&quot;: [
        &quot;0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef&quot;,
        &quot;0x000000000000000000000000a952d7fc7965bec3cb03c79084236534ee2ab3cd&quot;,
        &quot;0x000000000000000000000000d5909bacfc1fad78e4e45e9e2fef8b4e61c8fd0d&quot;
      ],
      &quot;tx_hash&quot;: &quot;0xe82f0be9b30d840eca64e28e6f7562b7352b3b54519a7e63fb8f6d4609194bb9&quot;,
      &quot;tx_index&quot;: 0
    }
  ]
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">logs</td>
<td style="text-align: left">array</td>
<td style="text-align: left">The event logs</td>
</tr>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">From which this event originated from</td>
</tr>
<tr>
<td style="text-align: left">block_hash</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Hash of the block where this transaction was in</td>
</tr>
<tr>
<td style="text-align: left">block_number</td>
<td style="text-align: left">uint64</td>
<td style="text-align: left">Block number where this transaction was in</td>
</tr>
<tr>
<td style="text-align: left">data</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The data containing non-indexed log parameter</td>
</tr>
<tr>
<td style="text-align: left">index</td>
<td style="text-align: left">uint</td>
<td style="text-align: left">Integer of the event index position in the block</td>
</tr>
<tr>
<td style="text-align: left">removed</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">Indicate the log is removed (due to chain reorg)</td>
</tr>
<tr>
<td style="text-align: left">topics</td>
<td style="text-align: left">array</td>
<td style="text-align: left">An array of values which must each appear in the log entries</td>
</tr>
<tr>
<td style="text-align: left">tx_hash</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Hash of the transaction</td>
</tr>
<tr>
<td style="text-align: left">tx_index</td>
<td style="text-align: left">uint</td>
<td style="text-align: left">Integer of the transactions index position in the block</td>
</tr>
</tbody>
</table>

<h5 id="toc_161">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing necessary parameters</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">{TXID} not found</td>
<td style="text-align: left">No relevant withdrawal request to TXID</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">{TXID} not in blockchain</td>
<td style="text-align: left">Only in-chain withdrawal transactions allowed to query event log</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">303</td>
<td style="text-align: left">Invalid currency</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Not supported cryptocurrency to query event log</td>
</tr>
</tbody>
</table>

<h5 id="toc_162"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-withdrawal-wallet-balance"></a></p>

<h3 id="toc_163">Query Withdrawal Wallet Balance</h3>

<p>Get the withdrawal wallet balance. Facilitate to establish a real-time balance monitoring mechanism.</p>

<h5 id="toc_164">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/balance</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-withdrawal-wallet-balance">Sample curl command</a></li>
</ul>

<h5 id="toc_165">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_166">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/632543/sender/balance</code></pre></div>

<h5 id="toc_167">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;currency&quot;: 60,
  &quot;wallet_address&quot;: &quot;0xaa0cA2f9bA3A33a915a27e289C9719adB2ad7d73&quot;,
  &quot;token_address&quot;: &quot;&quot;,
  &quot;balance&quot;: &quot;0.619673333517576&quot;,
  &quot;token_balance&quot;: &quot;&quot;,
  &quot;unconfirm_balance&quot;: &quot;0&quot;,
  &quot;unconfirm_token_balance&quot;: &quot;&quot;
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">currency</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Registered coin types. Refer to <a href="#currency-definition">Currency Definition</a></td>
</tr>
<tr>
<td style="text-align: left">wallet_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Wallet address</td>
</tr>
<tr>
<td style="text-align: left">token_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token contract address</td>
</tr>
<tr>
<td style="text-align: left">balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Withdrawal wallet balance</td>
</tr>
<tr>
<td style="text-align: left">token_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Withdrawal wallet token balance</td>
</tr>
<tr>
<td style="text-align: left">unconfirm_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Unconfirmed withdrawal wallet balance</td>
</tr>
<tr>
<td style="text-align: left">unconfirm_token_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Unconfirmed withdrawal wallet token balance</td>
</tr>
<tr>
<td style="text-align: left">err_reason</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Error message if fail to get balance</td>
</tr>
</tbody>
</table>

<blockquote>
<p>The currencies that support the unconfirmed balance are BTC, LTC, ETH, BCH, BSV, DASH</p>
</blockquote>

<h5 id="toc_168">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_169"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-withdrawal-callback-detail"></a></p>

<h3 id="toc_170">Query Withdrawal Callback Detail</h3>

<p>Query the detailed information of the withdrawal callback by the order ID.</p>

<blockquote>
<p>This API only provides in-chain transactions query, for those not in-chain transactions use <a href="#query-all-withdrawal-transaction-states">Query All Withdrawal Transaction States</a> API instead.</p>
</blockquote>

<h5 id="toc_171">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/notifications/order_id/<code>ORDER_ID</code></p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-withdrawal-callback-detail">Sample curl command</a></li>
</ul>

<h5 id="toc_172">Request Format</h5>

<p>An example of the request:</p>

<blockquote>
<p>The prefix is 888888_ in following sample request.</p>
</blockquote>

<h6 id="toc_173">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/68451/sender/notifications/order_id/888888_1</code></pre></div>

<h5 id="toc_174">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;notification&quot;: {
    &quot;addon&quot;: {},
    &quot;amount&quot;: &quot;100000000000000&quot;,
    &quot;block_height&quot;: 7813953,
    &quot;broadcast_at&quot;: 1588211126,
    &quot;chain_at&quot;: 1588211126,
    &quot;confirm_blocks&quot;: 109490,
    &quot;currency&quot;: &quot;ETH&quot;,
    &quot;fees&quot;: &quot;21000000000000&quot;,
    &quot;from_address&quot;: &quot;0xaa0cA2f9bA3A33a915a27e289C9719adB2ad7d73&quot;,
    &quot;memo&quot;: &quot;&quot;,
    &quot;order_id&quot;: &quot;888888_1&quot;,
    &quot;processing_state&quot;: 2,
    &quot;serial&quot;: 90000000554,
    &quot;state&quot;: 3,
    &quot;tindex&quot;: 30,
    &quot;to_address&quot;: &quot;0x60589A749AAC632e9A830c8aBE042D1899d8Dd15&quot;,
    &quot;txid&quot;: &quot;0x471c11f139ce1a7e0627a05cea50d64e47e797c94fd72025f1978cc919e07aa9&quot;,
    &quot;type&quot;: 2,
    &quot;vout_index&quot;: 0,
    &quot;wallet_id&quot;: 68451
  }
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">notification</td>
<td style="text-align: left">object</td>
<td style="text-align: left">Refer to <a href="#callback-definition">Callback Definition</a></td>
</tr>
</tbody>
</table>

<h5 id="toc_175">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request or the {ORDER_ID} is not found</td>
</tr>
</tbody>
</table>

<h5 id="toc_176"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="set-withdrawal-request-acl"></a></p>

<h3 id="toc_177">Set Withdrawal Request ACL</h3>

<p>Set an authorized IP to the withdrawal request ACL dynamically.</p>

<blockquote>
<p>If a static ACL has been set in web control panel, the API will fail.</p>
</blockquote>

<h5 id="toc_178">Request</h5>

<p><strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/transactions/acl</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-set-withdrawal-request-acl">Sample curl command</a></li>
</ul>

<h5 id="toc_179">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_180">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/632543/sender/transactions/acl</code></pre></div>

<h6 id="toc_181">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;acl&quot;: &quot;192.168.101.55&quot;
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_182">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">acl</td>
<td style="text-align: left">string</td>
<td style="text-align: left">requried</td>
<td style="text-align: left">Specify an authorized IP in IPv4 format</td>
</tr>
</tbody>
</table>

<h5 id="toc_183">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;result&quot;: 1
}
</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">result</td>
<td style="text-align: left">int</td>
<td style="text-align: left">Specify a successful API call</td>
</tr>
</tbody>
</table>

<h5 id="toc_184">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is invalid to perform this API call</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">180</td>
<td style="text-align: left">Invalid format</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The acl field is empty or does not conform to the IPv4 format</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">180</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">ACL has been set via web</td>
<td style="text-align: left">The static ACL is not empty</td>
</tr>
</tbody>
</table>

<h5 id="toc_185"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="resend-withdrawal-callbacks"></a></p>

<h3 id="toc_186">Resend Withdrawal Callbacks</h3>

<p>The callback handler can call this API to resend pending, risk-controlled or failed withdrawal callbacks.</p>

<p>Refer to <a href="#callback-integration">Callback Integration</a> for callback rules.</p>

<blockquote>
<p>The resend operation could be requested on the web control panel as well.</p>
</blockquote>

<h5 id="toc_187">Request</h5>

<p><strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/notifications/manual</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-resend-withdrawal-callbacks">Sample curl command</a></li>
</ul>

<h5 id="toc_188">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_189">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/55743/sender/notifications/manual</code></pre></div>

<h6 id="toc_190">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;notification_id&quot;: 0
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_191">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">notification_id</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">required, 0 means all</td>
<td style="text-align: left">Specify callback ID to resend</td>
</tr>
</tbody>
</table>

<blockquote>
<p>This ID equal to the serial field of callback data.</p>
</blockquote>

<h5 id="toc_192">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;count&quot;: 3
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">count</td>
<td style="text-align: left">int</td>
<td style="text-align: left">Count of callbacks just resent</td>
</tr>
</tbody>
</table>

<h5 id="toc_193">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_194"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-withdrawal-whitelist-configuration"></a></p>

<h3 id="toc_195">Query Withdrawal Whitelist Configuration</h3>

<p>Query the whitelist configuration of the withdrawal wallet.</p>

<h5 id="toc_196">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/whitelist/config</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-withdrawal-whitelist-configuration">Sample curl command</a></li>
</ul>

<h5 id="toc_197">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_198">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/55743/sender/whitelist/config</code></pre></div>

<h5 id="toc_199">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;effective_latency&quot;: 0,
  &quot;whitelist_check&quot;: true
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">effective_latency</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">The effective latency of the whitelist entry, 0 means the whitelist entry will take effect immediately.</td>
</tr>
<tr>
<td style="text-align: left">whitelist_check</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">Indicate whether the withdrawal wallet has enabled whitelist checking.</td>
</tr>
</tbody>
</table>

<h5 id="toc_200">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_201"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="add-withdrawal-whitelist-entry"></a></p>

<h3 id="toc_202">Add Withdrawal Whitelist Entry</h3>

<p>Add an outgoing address to the withdrawal wallet&#39;s whitelist.</p>

<h5 id="toc_203">Request</h5>

<p><strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/whitelist</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-add-withdrawal-whitelist-entry">Sample curl command</a></li>
</ul>

<h5 id="toc_204">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_205">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/55743/sender/whitelist</code></pre></div>

<h6 id="toc_206">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;items&quot;: [
    {
      &quot;address&quot;: &quot;GCIFMEYIEWSX3K6EOPMEJ3FHW5AAPD6NW76J7LPBRAKD4JZKTISKUPHJ&quot;,
      &quot;memo&quot;: &quot;865314&quot;,
      &quot;user_id&quot;: &quot;USER001&quot;
    }
  ]
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_207">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">items</td>
<td style="text-align: left">array</td>
<td style="text-align: left">required</td>
<td style="text-align: left">Specify the whitelist entries</td>
</tr>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required</td>
<td style="text-align: left">The outgoing address</td>
</tr>
<tr>
<td style="text-align: left">memo</td>
<td style="text-align: left">string</td>
<td style="text-align: left">optional</td>
<td style="text-align: left">The memo of the outgoing address</td>
</tr>
<tr>
<td style="text-align: left">user_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">optional, max length <code>255</code></td>
<td style="text-align: left">The custom user ID of the outgoing address</td>
</tr>
</tbody>
</table>

<h5 id="toc_208">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;added_items&quot;: [
    {
      &quot;address&quot;: &quot;GCIFMEYIEWSX3K6EOPMEJ3FHW5AAPD6NW76J7LPBRAKD4JZKTISKUPHJ&quot;,
      &quot;memo&quot;: &quot;865314&quot;,
      &quot;user_id&quot;: &quot;USER001&quot;
    }
  ]
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">added_items</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Array of added whitelist entries</td>
</tr>
</tbody>
</table>

<h5 id="toc_209">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">invalid address: {INVALID_ADDRESS}</td>
<td style="text-align: left">The address format does not comply with the cryptocurrency specification</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">invalid user id: {INVALID<em>USER</em>ID}</td>
<td style="text-align: left">The length of the user ID exceeds 255 characters</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">this wallet does not support memo</td>
<td style="text-align: left">The cryptocurrency does not support memo</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">945</td>
<td style="text-align: left">The max length of BNB memo is 256 chars</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the length of BNB memo</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">946</td>
<td style="text-align: left">The max length of EOS memo is 128 chars</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the length of EOS memo</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">947</td>
<td style="text-align: left">The max length of XRP destination tag is 20 chars</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the length of XRP destination tag</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">948</td>
<td style="text-align: left">The max length of XLM memo is 20 chars</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Reached the limit of the length of XLM memo</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">818</td>
<td style="text-align: left">Destination Tag must be integer</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Wrong XRP destination tag format</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_210"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="remove-withdrawal-whitelist-entry"></a></p>

<h3 id="toc_211">Remove Withdrawal Whitelist Entry</h3>

<p>Remove an outgoing address from the withdrawal wallet&#39;s whitelist.</p>

<h5 id="toc_212">Request</h5>

<p><strong>DELETE</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/whitelist</p>

<blockquote>
<p><code>WALLET_ID</code> must be a withdrawal wallet ID</p>

<p>Only the entries exactly matches all the fields will be removed.</p>
</blockquote>

<ul>
<li><a href="#curl-remove-withdrawal-whitelist-entry">Sample curl command</a></li>
</ul>

<h5 id="toc_213">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_214">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/55743/sender/whitelist</code></pre></div>

<h6 id="toc_215">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;items&quot;: [
    {
      &quot;address&quot;: &quot;GCIFMEYIEWSX3K6EOPMEJ3FHW5AAPD6NW76J7LPBRAKD4JZKTISKUPHJ&quot;,
      &quot;memo&quot;: &quot;865314&quot;,
      &quot;user_id&quot;: &quot;USER001&quot;
    }
  ]
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_216">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">items</td>
<td style="text-align: left">array</td>
<td style="text-align: left">required</td>
<td style="text-align: left">Specify the whitelist entries</td>
</tr>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required</td>
<td style="text-align: left">The outgoing address</td>
</tr>
<tr>
<td style="text-align: left">memo</td>
<td style="text-align: left">string</td>
<td style="text-align: left">optional</td>
<td style="text-align: left">The memo of the outgoing address</td>
</tr>
<tr>
<td style="text-align: left">user_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">optional</td>
<td style="text-align: left">The custom user ID of the outgoing address</td>
</tr>
</tbody>
</table>

<h5 id="toc_217">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;removed_items&quot;: [
    {
      &quot;address&quot;: &quot;GCIFMEYIEWSX3K6EOPMEJ3FHW5AAPD6NW76J7LPBRAKD4JZKTISKUPHJ&quot;,
      &quot;memo&quot;: &quot;865314&quot;,
      &quot;user_id&quot;: &quot;USER001&quot;
    }
  ]
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">removed_items</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Array of removed whitelist entries</td>
</tr>
</tbody>
</table>

<h5 id="toc_218">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_219"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="check-withdrawal-whitelist"></a></p>

<h3 id="toc_220">Check Withdrawal Whitelist</h3>

<p>Check the withdrawal whitelist entry status in the withdrawal whitelist.</p>

<h5 id="toc_221">Request</h5>

<p><code>VIEW</code> <strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/whitelist/check</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-check-withdrawal-whitelist">Sample curl command</a></li>
</ul>

<h5 id="toc_222">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_223">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/557432/sender/whitelist/check</code></pre></div>

<h6 id="toc_224">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;address&quot;: &quot;GCIFMEYIEWSX3K6EOPMEJ3FHW5AAPD6NW76J7LPBRAKD4JZKTISKUPHJ&quot;,
  &quot;memo&quot;: &quot;865314&quot;,
  &quot;user_id&quot;: &quot;USER001&quot;
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_225">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required</td>
<td style="text-align: left">The inquiry whitelist entry address</td>
</tr>
<tr>
<td style="text-align: left">memo</td>
<td style="text-align: left">string</td>
<td style="text-align: left">optional</td>
<td style="text-align: left">The memo of the whitelist entry</td>
</tr>
<tr>
<td style="text-align: left">user_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">optional</td>
<td style="text-align: left">The custom user ID of the whitelist entry</td>
</tr>
</tbody>
</table>

<h5 id="toc_226">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;address&quot;: &quot;0x79D6660b2aB1d37AD5D11C2ca2B3EBba7Efd13F6&quot;,
  &quot;create_time&quot;: &quot;2020-12-30T13:09:39Z&quot;,
  &quot;effective&quot;: true,
  &quot;effective_time&quot;: &quot;2020-12-30T13:09:39Z&quot;,
  &quot;memo&quot;: &quot;&quot;,
  &quot;state&quot;: 1,
  &quot;update_time&quot;: &quot;2020-12-30T13:09:39Z&quot;,
  &quot;user_id&quot;: &quot;USER001&quot;
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The inquiry whitelist entry address</td>
</tr>
<tr>
<td style="text-align: left">create_time</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The creation time in UTC</td>
</tr>
<tr>
<td style="text-align: left">effective</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">Indicate whether the whitelist entry has taken effect</td>
</tr>
<tr>
<td style="text-align: left">effective_time</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The effective time in UTC</td>
</tr>
<tr>
<td style="text-align: left">memo</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The memo of the whitelist entry</td>
</tr>
<tr>
<td style="text-align: left">state</td>
<td style="text-align: left">int</td>
<td style="text-align: left"><code>1</code> means the entry is active, <code>2</code> means the entry is removed</td>
</tr>
<tr>
<td style="text-align: left">update_time</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Last modification time in UTC</td>
</tr>
<tr>
<td style="text-align: left">user_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The custom user ID of the whitelist entry</td>
</tr>
</tbody>
</table>

<h5 id="toc_227">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">not found</td>
<td style="text-align: left">Cannot find the inquiry whitelist entry</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">invalid address: {INVALID_ADDRESS}</td>
<td style="text-align: left">The address format does not comply with the cryptocurrency specification</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">invalid user id: {INVALID<em>USER</em>ID}</td>
<td style="text-align: left">The length of the user ID exceeds 255 characters</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">this wallet does not support memo</td>
<td style="text-align: left">The cryptocurrency does not support memo</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_228"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-withdrawal-whitelist"></a></p>

<h3 id="toc_229">Query Withdrawal Whitelist</h3>

<p>Used to query some kind of callbacks within a time interval.</p>

<h5 id="toc_230">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/whitelist?from_time=<code>from</code>&amp;to_time=<code>to</code>&amp;start_index=<code>offset</code>&amp;request_number=<code>count</code>&amp;state=<code>state</code></p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-withdrawal-whitelist">Sample curl command</a></li>
</ul>

<h5 id="toc_231">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_232">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/557432/sender/whitelist</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_233">Query Parameters</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">from_time</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">optional, default <code>0</code></td>
<td style="text-align: left">Start date (unix time in UTC)</td>
</tr>
<tr>
<td style="text-align: left">to_time</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">optional, default <code>current time</code></td>
<td style="text-align: left">End date (unix time in UTC)</td>
</tr>
<tr>
<td style="text-align: left">start_index</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">optional, default <code>0</code></td>
<td style="text-align: left">The offset to the first entry</td>
</tr>
<tr>
<td style="text-align: left">request_number</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">optional, default <code>1000</code>, max <code>2000</code></td>
<td style="text-align: left">The count to request</td>
</tr>
<tr>
<td style="text-align: left">state</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, default <code>-1</code></td>
<td style="text-align: left">Use <code>1</code> to query the active entries and <code>2</code> to query the removed entries, <code>-1</code> means all entries</td>
</tr>
</tbody>
</table>

<h5 id="toc_234">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;items&quot;: [
    {
      &quot;address&quot;: &quot;GCIFMEYIEWSX3K6EOPMEJ3FHW5AAPD6NW76J7LPBRAKD4JZKTISKUPHJ&quot;,
      &quot;create_time&quot;: &quot;2020-12-30T06:02:25Z&quot;,
      &quot;effective&quot;: false,
      &quot;effective_time&quot;: &quot;2020-12-30T13:27:37Z&quot;,
      &quot;memo&quot;: &quot;&quot;,
      &quot;state&quot;: 1,
      &quot;update_time&quot;: &quot;2020-12-30T06:02:25Z&quot;,
      &quot;user_id&quot;: &quot;USER001&quot;
    },
  ],
  &quot;total_count&quot;: 1
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">items</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Arrary of the whitelist entries</td>
</tr>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The whitelist entry address</td>
</tr>
<tr>
<td style="text-align: left">create_time</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The creation time in UTC</td>
</tr>
<tr>
<td style="text-align: left">effective</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">Indicate whether the whitelist entry has taken effect</td>
</tr>
<tr>
<td style="text-align: left">effective_time</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The effective time in UTC</td>
</tr>
<tr>
<td style="text-align: left">memo</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The memo of the whitelist entry</td>
</tr>
<tr>
<td style="text-align: left">state</td>
<td style="text-align: left">int</td>
<td style="text-align: left"><code>1</code> means the entry is active, <code>2</code> means the entry is removed</td>
</tr>
<tr>
<td style="text-align: left">update_time</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Last modification time in UTC</td>
</tr>
<tr>
<td style="text-align: left">user_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The custom user ID of the whitelist entry</td>
</tr>
</tbody>
</table>

<h5 id="toc_235">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_236"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-withdrawal-wallet-transaction-history"></a></p>

<h3 id="toc_237">Query Withdrawal Wallet Transaction History</h3>

<p>Get transaction history of withdrawal wallets.</p>

<h5 id="toc_238">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/sender/transactions?from_time=<code>from</code>&amp;to_time=<code>to</code>&amp;start_index=<code>start</code>&amp;request_number=<code>count</code></p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-withdrawal-wallet-transaction-history">Sample curl command</a></li>
</ul>

<h5 id="toc_239">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_240">API with parameters</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/345312/sender/transactions?from_time=1559664000&amp;to_time=1562255999&amp;start_index=0&amp;request_number=10</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_241">Query Parameters</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">from_time</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">optional, default <code>0</code></td>
<td style="text-align: left">Start date (unix time in UTC)</td>
</tr>
<tr>
<td style="text-align: left">to_time</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">optional, default <code>current time</code></td>
<td style="text-align: left">End date (unix time in UTC)</td>
</tr>
<tr>
<td style="text-align: left">start_index</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, default <code>0</code></td>
<td style="text-align: left">Index of starting transaction record</td>
</tr>
<tr>
<td style="text-align: left">request_number</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, default <code>10</code>, max <code>500</code></td>
<td style="text-align: left">Count of returning transaction record</td>
</tr>
</tbody>
</table>

<h5 id="toc_242">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;total_count&quot;: 169,
  &quot;transactions&quot;: [
    {
      &quot;amount&quot;: &quot;0.1&quot;,
      &quot;block_height&quot;: 10813730,
      &quot;block_time&quot;: &quot;2021-08-11T06:13:01Z&quot;,
      &quot;blocklist_tags&quot;: [],
      &quot;fee&quot;: &quot;0.000693&quot;,
      &quot;from_address&quot;: &quot;0xaa0cA2f9bA3A33a915a27e289C9719adB2ad7d73&quot;,
      &quot;memo&quot;: &quot;&quot;,
      &quot;out&quot;: true,
      &quot;source&quot;: &quot;&quot;,
      &quot;state&quot;: 1,
      &quot;to_address&quot;: &quot;0x79D6660b2aB1d37AD5D11C2ca2B3EBba7Efd13F6&quot;,
      &quot;txid&quot;: &quot;0xe3607325e3b7c0190089d1fb41ce9fa059858c6b2e5dd220e55ba46707fc38f0&quot;
    },
    {
      &quot;amount&quot;: &quot;1&quot;,
      &quot;block_height&quot;: 10811102,
      &quot;block_time&quot;: &quot;2021-08-10T17:24:21Z&quot;,
      &quot;blocklist_tags&quot;: [],
      &quot;fee&quot;: &quot;0.000021&quot;,
      &quot;from_address&quot;: &quot;0xaa0cA2f9bA3A33a915a27e289C9719adB2ad7d73&quot;,
      &quot;memo&quot;: &quot;&quot;,
      &quot;out&quot;: true,
      &quot;source&quot;: &quot;withdraw-api&quot;,
      &quot;state&quot;: 1,
      &quot;to_address&quot;: &quot;0x8382Cc1B05649AfBe179e341179fa869C2A9862b&quot;,
      &quot;txid&quot;: &quot;0x19657382aa16520c32eef0dacc0f16d78e9105e83d37d126b4f6687c0d651859&quot;
    },
  ]
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">total_count</td>
<td style="text-align: left">int</td>
<td style="text-align: left">Total transactions in specified date duration</td>
</tr>
<tr>
<td style="text-align: left">transactions</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Array of transaction record</td>
</tr>
<tr>
<td style="text-align: left">txid</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Transaction ID</td>
</tr>
<tr>
<td style="text-align: left">from_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Sender address of the transaction</td>
</tr>
<tr>
<td style="text-align: left">to_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Recipient address of the transaction</td>
</tr>
<tr>
<td style="text-align: left">out</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">True means outgoing transaction</td>
</tr>
<tr>
<td style="text-align: left">amount</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Transaction amount</td>
</tr>
<tr>
<td style="text-align: left">blocklist_tags</td>
<td style="text-align: left">array</td>
<td style="text-align: left">The tags of CYBAVO AML detection. If <code>out</code> is true, the <code>to_address</code> is tagged. Otherwise, the <code>from_address</code> is tagged</td>
</tr>
<tr>
<td style="text-align: left">block_height</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">The block height</td>
</tr>
<tr>
<td style="text-align: left">block_time</td>
<td style="text-align: left">time</td>
<td style="text-align: left">When was the transaction packed into block (in chain) in UTC time</td>
</tr>
<tr>
<td style="text-align: left">fee</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Transaction blockchain fee</td>
</tr>
<tr>
<td style="text-align: left">memo</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Memo of the transaction</td>
</tr>
<tr>
<td style="text-align: left">source</td>
<td style="text-align: left">string</td>
<td style="text-align: left"><code>withdraw-api</code> means that the transaction was triggered by the withdrawal API, otherwise it was triggered from the web withdrawal UI</td>
</tr>
<tr>
<td style="text-align: left">state</td>
<td style="text-align: left">int</td>
<td style="text-align: left">Refer to <a href="#state-definition">State Definition</a> bellow</td>
</tr>
</tbody>
</table>

<p><a name="state-definition"></a></p>

<h6 id="toc_243">State Definition</h6>

<table>
<thead>
<tr>
<th style="text-align: left">ID</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">1</td>
<td style="text-align: left">Success, the transaction status is successful</td>
</tr>
<tr>
<td style="text-align: left">2</td>
<td style="text-align: left">Failed, the transaction status is failed</td>
</tr>
<tr>
<td style="text-align: left">3</td>
<td style="text-align: left">Invalid, the transaction status is successful but is identified as invalid by the SOFA system</td>
</tr>
</tbody>
</table>

<h5 id="toc_244">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>from_time</code> or <code>to_time</code> is invalid</td>
</tr>
</tbody>
</table>

<h5 id="toc_245"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="sign-message"></a></p>

<h3 id="toc_246">Sign Message</h3>

<p>Sign message, equivalent to <code>eth_sign</code>.</p>

<h5 id="toc_247">Request</h5>

<p><strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/signmessage</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-sign-message">Sample curl command</a></li>
</ul>

<h5 id="toc_248">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_249">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/557432/signmessage</code></pre></div>

<h6 id="toc_250">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;message&quot;: &quot;This is proof that I, user A, have access to this address.&quot;
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_251">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">message</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required</td>
<td style="text-align: left">Message to be signed</td>
</tr>
<tr>
<td style="text-align: left">is_hex</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">optional</td>
<td style="text-align: left">Treat the message as a hexadecimal string that will be decoded before signing</td>
</tr>
<tr>
<td style="text-align: left">eip155</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">optional</td>
<td style="text-align: left">Sign the message in EIP-155 format</td>
</tr>
<tr>
<td style="text-align: left">wallet_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required, for delegated wallet</td>
<td style="text-align: left">Specify the delegated address for the request</td>
</tr>
<tr>
<td style="text-align: left">index</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">required, for delegated wallet</td>
<td style="text-align: left">Specify the corresponding index of the <code>wallet_address</code></td>
</tr>
</tbody>
</table>

<h5 id="toc_252">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;signed_message&quot;: &quot;0xf296a678ce1d577acbee25119b7be821db70e960d6e65ef73fb1e50fa832759d27d35df2dd309be07cb5a9b9f6c87f5eeae11ff56b995e0b32d6288b1039555b2a&quot;
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">signed_message</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Signed message</td>
</tr>
</tbody>
</table>

<h5 id="toc_253">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">wallet_address is required</td>
<td style="text-align: left"><code>wallet_address</code> is a required parameter</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">703</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">index not match</td>
<td style="text-align: left"><code>index</code> is not consistent with the index of the <code>wallet_address</code></td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">303</td>
<td style="text-align: left">Invalid currency</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">mapped wallet not supported</td>
<td style="text-align: left">-</td>
</tr>
</tbody>
</table>

<h5 id="toc_254"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="call-contract-read-abi"></a></p>

<h3 id="toc_255">Call Contract Read ABI</h3>

<p>Executes a contract read ABI call.</p>

<h5 id="toc_256">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/contract/read?contract=<code>contract_address</code>&amp;data=<code>data</code></p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-call-contract-read-abi">Sample curl command</a></li>
</ul>

<h5 id="toc_257">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_258">API with parameters</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/345312/contract/read?contract=0xad6d458402f60fd3bd25163575031acdce07538d&amp;data=0xdd62ed3e000000000000000000000000d11bd6e308b8dc1c5243d54cf41a427ca0f46943000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_259">Query Parameters</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">contract</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required</td>
<td style="text-align: left">Representing the contract to interact with</td>
</tr>
<tr>
<td style="text-align: left">data</td>
<td style="text-align: left">string</td>
<td style="text-align: left">requried</td>
<td style="text-align: left">The hash of the method signature and encoded parameters</td>
</tr>
</tbody>
</table>

<blockquote>
<p>The <code>data</code> must be encoded by <a href="https://web3js.readthedocs.io/en/v1.3.4/web3-eth-abi.html#encodeFunctionCall">web3.eth.abi.encodeFunctionCall() of web3.js</a>.</p>
</blockquote>

<h5 id="toc_260">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;output&quot;: &quot;ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff&quot;
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">output</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The output of read ABI call</td>
</tr>
</tbody>
</table>

<blockquote>
<p>The <code>output</code> can be decoded by <a href="https://web3js.readthedocs.io/en/v1.3.4/web3-eth-abi.html#decodeparameters">web3.eth.abi.decodeparameters() of web3.js</a>.</p>
</blockquote>

<h5 id="toc_261">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">wrong wallet type</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">archived wallet</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">mapped wallet not supported</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing necessary parameters</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Operation failed</td>
<td style="text-align: left">invalid address: {contract_address}</td>
<td style="text-align: left">The contract address does not conform to the cryptocurrency format</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">no contract policy</td>
<td style="text-align: left">There is no contract policy of the given wallet</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">unsupported contract</td>
<td style="text-align: left">There is no contract policy of the given contract address</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">303</td>
<td style="text-align: left">Invalid currency</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Not supported cryptocurrency to call contract read ABI</td>
</tr>
</tbody>
</table>

<h5 id="toc_262"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="arweave-sign-transaction"></a></p>

<h3 id="toc_263">Arweave Sign Transaction</h3>

<p>Sign Arweave transaction for uploading data. This API is dedicated to the Arweave withdrawal wallet.</p>

<h5 id="toc_264">Request</h5>

<p><strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/signtransaction</p>

<blockquote>
<p><code>Withdrawal Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-arweave-sign-transaction">Sample curl command</a></li>
</ul>

<h5 id="toc_265">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_266">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/557432/signtransaction</code></pre></div>

<h6 id="toc_267">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;ar_tx&quot;: &quot;{\&quot;format\&quot;:2,\&quot;id\&quot;:\&quot;\&quot;,\&quot;last_tx\&quot;:\&quot;4z4iqqw4j_bBC1jXvm-pbMDg5eSYOGPjRz2fB1nsai6cVtvTd7Ucn-_Qau_bZh\&quot;,\&quot;owner\&quot;:\&quot;KkTVKjrry_aieBmqNOuUGtJam-3yT6zMABY89pinlcY\&quot;,\&quot;tags\&quot;:[{\&quot;name\&quot;:\&quot;Q29udGVudC1UeXBl\&quot;,\&quot;value\&quot;:\&quot;aW1hZ2UvanBlZw\&quot;}],\&quot;target\&quot;:\&quot;\&quot;,\&quot;quantity\&quot;:\&quot;0\&quot;,\&quot;data\&quot;:\&quot;\&quot;,\&quot;data_size\&quot;:\&quot;23782\&quot;,\&quot;data_root\&quot;:\&quot;Ve1yivS-iMklYK6xyPT58IeZRu-TtnAYkW5Ih4pb-S4\&quot;,\&quot;reward\&quot;:\&quot;73874553\&quot;,\&quot;signature\&quot;:\&quot;\&quot;,\&quot;chunks\&quot;:\&quot;\&quot;}&quot;
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_268">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">ar_tx</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required</td>
<td style="text-align: left">Transaction JSON string to be signed</td>
</tr>
</tbody>
</table>

<blockquote>
<p>The owner field is the address of the withdrawal wallet. The owner field of the response is the public key of the wallet address.</p>
</blockquote>

<h5 id="toc_269">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;id&quot;: &quot;j06PW1hWTS2keWOl6X_oIKdUMV29MllMlO2rSRDhkzg&quot;,
  &quot;signature&quot;: &quot;v56Dgg-V--ZQANyhyc00Pgd2nywB9NFv7YOgY4ngv7WlHCydDNzlKIvTGCrJvC0xmnuQv-O4XAHM4NbQCKEOfqU8kpwPvo59lQA1yCIjQeNw3rGvlg832MvyAR71FjME5KI84vz-IcDOGpqJs-GApjPpbTren5NKfkVMA9TAnTUhd3wQafQdTdbaGnBbccuHxEFBqR3xWkjt6r2dsmtUZkyVz41MAjMJyQ8u7_131AexJXNBX0U-wDXxJ6eu6kydMPrdsYqU6no8wEEl3XTdsOmJ5J1jy9uiCyN5Ri2II2VzTvKgP8xVOquAo2EZGQLHo2nJU4sVOXHA1ZJ9l0U2ny5ZMyqqh3tFqEsk5dDwBJumoCbMo0bFOKSXiG7iez8WEi57kdLy5PJBizW5jFYITm1fXnJ8ERyk8wTHu0f1_5FQLZtinl6sbwsb_xCyy2siPYc5CpwR5u6yR7hCbBxt9WJ3nDeMfKTRk2_vnEYagC_HzMk3aG1oqohaA8_J7t8UNli8idLS7LpxTWdZuU32rIU8mv9lVpEbxjGpRQFqvwS32AUxLM6llG5svswgb38_y7GEajWZkeAuZ4-dvK7r91evzkbrKbpI_mnOGnMgPopiyCl6wEOoiJYtfo5IbAXi5YJITZ7KbwtoWh-MzJFPE_9UnZ9eXY8GKJU-mZC23NA&quot;,
  &quot;owner&quot;: &quot;teNsEXXHfFdY2TM-ZGpNXzAoSqNND2cZ2TW-Xnc7-yl4SjFJmMpLiYhgeunSJGaVe08ZMDCHDnYykj91E5f1ZApL7y_W3WkCDEoWeRnm69M-SUPCw35oo1HF_hvwgfnX3H14zifIWHTKJq1vxSD7y2EGRVUBn5xZlWjoUJ5Gbbn2BRDQ_Fob7x_ckTbLvDBomdTFQeAntXH99OxE9pH88SI6OkmkYzZXjYmJYaGIP6q81y6CCxfmzWdLRGNXNYimacNuJAJxh4ZsWr-tRewVPPrj3f30Iybmb_VIlhuI9r6sA_rhwyigL1qTvuXZ6b47tpY7idnU8Ea0X3KIVNt-C2flWebczWBz1pcljBtHcxrGHhewOp2gO3_I3nsm5MRwtaR1512iewsEZQj7apJe5EY6kZIG_YBRbv8YRZEhvmkHcCO4lKuNqjw9lrbsFI-atZ61z_jVeWJrBB6Lwyp9v6VOs09lsHoBDjFR9eCOy1nfn6a26iKLMPj9X5xRukvicQ5ZWUU8zbtGDskyUtvhkH4uXGNjkjE7d-WaAR4cj7Ni6mrFA2iHcqIUODpu8DR-bZ5yxENQjjIgm6Rr--v-kRltu4iEADdQBfUzY1hYOo6GtgyYLUnHPFB7IDMULyolo_31yUIAblHbNOuBF9fRue-ODY_MZKvOS1Qq7GH0_sE&quot;
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">ID field of the signed transaction</td>
</tr>
<tr>
<td style="text-align: left">signature</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Signature filed of the signed transaction</td>
</tr>
<tr>
<td style="text-align: left">owner</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Public key of the wallet address</td>
</tr>
</tbody>
</table>

<h5 id="toc_270">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">not allowed to sign asset transfer transaction</td>
<td style="text-align: left">The <code>quantity</code> or <code>target</code> is not empty</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">invalid transaction format</td>
<td style="text-align: left">The <code>data_size</code> is zero or <code>data_root</code> is empty</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">303</td>
<td style="text-align: left">Invalid currency</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
</tbody>
</table>

<h5 id="toc_271"><a href="#table-of-contents">Back to top</a></h5>

<h1 id="toc_272">Deposit / Withdrawal Wallet Common API</h1>

<p><a name="query-callback-history"></a></p>

<h3 id="toc_273">Query Callback History</h3>

<p>Used to query some kind of callbacks within a time interval.</p>

<h5 id="toc_274">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/notifications?from_time=<code>from</code>&amp;to_time=<code>to</code>&amp;type=<code>type</code></p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-callback-history">Sample curl command</a></li>
</ul>

<h5 id="toc_275">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_276">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/677414/notifications?from_time=1561651200&amp;to_time=1562255999&amp;type=2</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_277">Query Parameters</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">from_time</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">optional, default <code>0</code></td>
<td style="text-align: left">Start date (unix time in UTC)</td>
</tr>
<tr>
<td style="text-align: left">to_time</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">optional, default <code>current time</code></td>
<td style="text-align: left">End date (unix time in UTC)</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, default <code>-1</code></td>
<td style="text-align: left">Refer to <a href="#callback-type-definition">Callback Type</a></td>
</tr>
</tbody>
</table>

<h5 id="toc_278">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;notifications&quot;: [
    {
      &quot;type&quot;: 2,
      &quot;serial&quot;: 90000000003,
      &quot;order_id&quot;: &quot;a206&quot;,
      &quot;currency&quot;: &quot;BNB&quot;,
      &quot;txid&quot;: &quot;76B8B2B1E25472FFE7B8FCE85742E0964FEDB1B679DE963FA19F430E8B287F93&quot;,
      &quot;block_height&quot;: 25844472,
      &quot;tindex&quot;: 2,
      &quot;vout_index&quot;: 0,
      &quot;amount&quot;: &quot;15000000&quot;,
      &quot;fees&quot;: &quot;37500&quot;,
      &quot;memo&quot;: &quot;CC&quot;,
      &quot;broadcast_at&quot;: 0,
      &quot;chain_at&quot;: 1562234190,
      &quot;from_address&quot;: &quot;tbnb1f805kv6z8nq2whrcnkagjte3jjss2sxf2rfls0&quot;,
      &quot;to_address&quot;: &quot;tbnb1655kasahedvaeudaeq6jggr7kal8qgwygu9xqk&quot;,
      &quot;wallet_id&quot;: 677414,
      &quot;state&quot;: 3,
      &quot;confirm_blocks&quot;: 1,
      &quot;processing_state&quot;: 1,
      &quot;addon&quot;: {}
    }
  ]
}
</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">notifications</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Arrary of callbacks, refer to <a href="#callback-definition">Callback Definition</a></td>
</tr>
</tbody>
</table>

<h5 id="toc_279">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
</tbody>
</table>

<h5 id="toc_280"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-callback-detail"></a></p>

<h3 id="toc_281">Query Callback Detail</h3>

<p>Query the detailed information of the callback by its serial ID. It can be used to reconfirm whether a deposit callback exists.</p>

<h5 id="toc_282">Request</h5>

<p><code>VIEW</code> <strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/notifications/get_by_id</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-callback-detail">Sample curl command</a></li>
</ul>

<h5 id="toc_283">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_284">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/677414/notifications/get_by_id</code></pre></div>

<h6 id="toc_285">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;ids&quot;: [
    90000000140,
    90000000139    
  ]
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_286">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">ids</td>
<td style="text-align: left">array</td>
<td style="text-align: left">requried</td>
<td style="text-align: left">Specify the IDs for query</td>
</tr>
</tbody>
</table>

<h5 id="toc_287">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;notifications&quot;: [
    {
      &quot;type&quot;: 3,
      &quot;serial&quot;: 90000000139,
      &quot;order_id&quot;: &quot;&quot;,
      &quot;currency&quot;: &quot;ADA&quot;,
      &quot;txid&quot;: &quot;35c283a6f13f5886240fe2e815bc149154ec066cd2061202318dd4e4bf8af35e&quot;,
      &quot;block_height&quot;: 1003304,
      &quot;tindex&quot;: 0,
      &quot;vout_index&quot;: 0,
      &quot;amount&quot;: &quot;24447&quot;,
      &quot;fees&quot;: &quot;0&quot;,
      &quot;memo&quot;: &quot;&quot;,
      &quot;broadcast_at&quot;: 1584088556,
      &quot;chain_at&quot;: 1584088556,
      &quot;from_address&quot;: &quot;&quot;,
      &quot;to_address&quot;: &quot;37btjrVyb4KG8gKeZjJguinwdsbcRV65ngHhBUaJWf36QxiakTV3UHiNUP9arReXMZQnpRBVVdkcBB4GyiWzPRSTmg41mTzMpxgfhtfRHtaBCKJNbX&quot;,
      &quot;wallet_id&quot;: 677414,
      &quot;state&quot;: 3,
      &quot;confirm_blocks&quot;: 2,
      &quot;processing_state&quot;: 1,
      &quot;addon&quot;: {}
    },
    {
      &quot;type&quot;: 3,
      &quot;serial&quot;: 90000000140,
      &quot;order_id&quot;: &quot;&quot;,
      &quot;currency&quot;: &quot;ADA&quot;,
      &quot;txid&quot;: &quot;fa120b6283509f0ab2b136a3ac8b613aa3ca2f36ce7c2744e122668d013cfdb5&quot;,
      &quot;block_height&quot;: 1003305,
      &quot;tindex&quot;: 0,
      &quot;vout_index&quot;: 0,
      &quot;amount&quot;: &quot;55497180&quot;,
      &quot;fees&quot;: &quot;0&quot;,
      &quot;memo&quot;: &quot;&quot;,
      &quot;broadcast_at&quot;: 1584088576,
      &quot;chain_at&quot;: 1584088576,
      &quot;from_address&quot;: &quot;&quot;,
      &quot;to_address&quot;: &quot;37btjrVyb4KDKCyAPRUPxpGiUPWunpBAkGRX8U3h7LYzS2UrHUnEQozcCyqR2GfBVnM3frTaUNEb8DoNGo9JakrskAtaWt6vED6R6ohkmaJ2qr4oCg&quot;,
      &quot;wallet_id&quot;: 677414,
      &quot;state&quot;: 3,
      &quot;confirm_blocks&quot;: 1,
      &quot;processing_state&quot;: 1,
      &quot;addon&quot;: {}
    }
  ]
}
</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">notifications</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Arrary of callbacks, refer to <a href="#callback-definition">Callback Definition</a></td>
</tr>
</tbody>
</table>

<h5 id="toc_288">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
</tbody>
</table>

<h5 id="toc_289"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-wallet-synchronization-info"></a></p>

<h3 id="toc_290">Query Wallet Synchronization Info</h3>

<p>Get the blockchain synchronization status of a wallet.</p>

<h5 id="toc_291">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/blocks</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-wallet-synchronization-info">Sample curl command</a></li>
</ul>

<h5 id="toc_292">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_293">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/677414/blocks</code></pre></div>

<h5 id="toc_294">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;latest_block_height&quot;: 29317651,
  &quot;synced_block_height&quot;: 28529203
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">latest_block_height</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">The latest block height on blockchain</td>
</tr>
<tr>
<td style="text-align: left">synced_block_height</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">The current synced block height</td>
</tr>
</tbody>
</table>

<h5 id="toc_295">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
</tbody>
</table>

<h5 id="toc_296"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-transaction-average-fee"></a></p>

<h3 id="toc_297">Query Transaction Average Fee</h3>

<p>Query average blockchain fee within latest N blocks.</p>

<h5 id="toc_298">Request</h5>

<p><code>VIEW</code> <strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/autofee</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-transaction-average-fee">Sample curl command</a></li>
</ul>

<h5 id="toc_299">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_300">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/635718/autofee</code></pre></div>

<h6 id="toc_301">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;block_num&quot;: 1
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_302">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">block_num</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, default <code>1</code>, range <code>1~100</code></td>
<td style="text-align: left">Query the average blockchain fee in the last N blocks</td>
</tr>
</tbody>
</table>

<h5 id="toc_303">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
    &quot;auto_fee&quot;: &quot;1&quot;
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">auto_fee</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Mining fee denominated in the smallest cryptocurrency unit</td>
</tr>
</tbody>
</table>

<h5 id="toc_304">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The <code>block_num</code> is out of range</td>
</tr>
</tbody>
</table>

<h5 id="toc_305"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="batch-query-transaction-average-fees"></a></p>

<h3 id="toc_306">Batch Query Transaction Average Fees</h3>

<p>Batch Query average blockchain fee within latest N blocks.</p>

<h5 id="toc_307">Request</h5>

<p><code>VIEW</code> <strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/autofees</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-batch-query-transaction-average-fees">Sample curl command</a></li>
</ul>

<h5 id="toc_308">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_309">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/854714/autofees</code></pre></div>

<h6 id="toc_310">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;block_nums&quot;: [
    1,
    5,
    10
  ]
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_311">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">block_nums</td>
<td style="text-align: left">array</td>
<td style="text-align: left">required, max 5 entries, each entry is range <code>1~100</code></td>
<td style="text-align: left">Batch query the average blockchain fee in the last N blocks</td>
</tr>
</tbody>
</table>

<h5 id="toc_312">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;auto_fees&quot;: [
    {
      &quot;auto_fee&quot;: &quot;49000000000&quot;,
      &quot;block_num&quot;: 1
    },
    {
      &quot;auto_fee&quot;: &quot;49000000000&quot;,
      &quot;block_num&quot;: 5
    },
    {
      &quot;auto_fee&quot;: &quot;38000000000&quot;,
      &quot;block_num&quot;: 10
    }
  ]
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">auto_fees</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Result of the inquiry</td>
</tr>
<tr>
<td style="text-align: left">block_num</td>
<td style="text-align: left">int</td>
<td style="text-align: left">Inquiry block number</td>
</tr>
<tr>
<td style="text-align: left">auto_fee</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Mining fee denominated in the smallest cryptocurrency unit</td>
</tr>
</tbody>
</table>

<h5 id="toc_313">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Exceeds 5 entries or each entry not in range</td>
</tr>
</tbody>
</table>

<h5 id="toc_314"><a href="#table-of-contents">Back to top</a></h5>

<h1 id="toc_315">Vault Wallet API</h1>

<p><a name="query-vault-wallet-transaction-history"></a></p>

<h3 id="toc_316">Query Vault Wallet Transaction History</h3>

<p>Get transaction history of vault wallets.</p>

<h5 id="toc_317">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/transactions?from_time=<code>from</code>&amp;to_time=<code>to</code>&amp;start_index=<code>start</code>&amp;request_number=<code>count</code>&amp;state=<code>state</code></p>

<blockquote>
<p><code>Vault Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-vault-wallet-transaction-history">Sample curl command</a></li>
</ul>

<h5 id="toc_318">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_319">API with parameters</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/488471/transactions?from_time=1559664000&amp;to_time=1562255999&amp;start_index=0&amp;request_number=1</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_320">Query Parameters</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">from_time</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">optional, default <code>0</code></td>
<td style="text-align: left">Start date (unix time in UTC)</td>
</tr>
<tr>
<td style="text-align: left">to_time</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">optional, default <code>current time</code></td>
<td style="text-align: left">End date (unix time in UTC)</td>
</tr>
<tr>
<td style="text-align: left">start_index</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, default <code>0</code></td>
<td style="text-align: left">Index of starting transaction record</td>
</tr>
<tr>
<td style="text-align: left">request_number</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, default <code>1000</code>, max <code>5000</code></td>
<td style="text-align: left">Count of returning transaction record</td>
</tr>
<tr>
<td style="text-align: left">state</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, default <code>-1</code></td>
<td style="text-align: left">Refer to <a href="#transaction-state-filter">Transaction State Filter Definition</a> bellow</td>
</tr>
</tbody>
</table>

<p><a name="transaction-state-filter"></a></p>

<h6 id="toc_321">Transaction State Filter Definition</h6>

<table>
<thead>
<tr>
<th style="text-align: left">ID</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">0</td>
<td style="text-align: left">WaitApproval</td>
</tr>
<tr>
<td style="text-align: left">1</td>
<td style="text-align: left">Rejected</td>
</tr>
<tr>
<td style="text-align: left">2</td>
<td style="text-align: left">Approved</td>
</tr>
<tr>
<td style="text-align: left">3</td>
<td style="text-align: left">Failed</td>
</tr>
<tr>
<td style="text-align: left">4</td>
<td style="text-align: left">NextLevel</td>
</tr>
<tr>
<td style="text-align: left">5</td>
<td style="text-align: left">Cancelled</td>
</tr>
<tr>
<td style="text-align: left">6</td>
<td style="text-align: left">BatchDone</td>
</tr>
<tr>
<td style="text-align: left">-1</td>
<td style="text-align: left">All states (for inquiry)</td>
</tr>
</tbody>
</table>

<h5 id="toc_322">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;transaction_count&quot;: 3,
  &quot;transaction_item&quot;: [
    {
      &quot;issue_user_id&quot;: 3,
      &quot;issue_user_name&quot;: &quot;wallet owner (user@gmail.com)&quot;,
      &quot;description&quot;: &quot;TO SND&quot;,
      &quot;wallet_id&quot;: 488471,
      &quot;wallet_name&quot;: &quot;BNB I&quot;,
      &quot;wallet_address&quot;: &quot;tbnb1655kasahedvaeudaeq6jggr7kal8qgwygu9xqk&quot;,
      &quot;token_address&quot;: &quot;&quot;,
      &quot;txid&quot;: &quot;3E6D61D1D39FA5DD3B86C2C28FFAD3D98CD7AFDB62346468D3C4FFE710CAAF85&quot;,
      &quot;currency&quot;: 714,
      &quot;currency_name&quot;: &quot;BNB&quot;,
      &quot;outgoing_address&quot;: &quot;tbnb1f805kv6z8nq2whrcnkagjte3jjss2sxf2rfls0&quot;,
      &quot;outgoing_address_name&quot;: &quot;BNB SND&quot;,
      &quot;amount&quot;: &quot;2&quot;,
      &quot;fee&quot;: &quot;0&quot;,
      &quot;txno&quot;: 100087,
      &quot;approval_item&quot;: [
        {
          &quot;approval_id&quot;: 3,
          &quot;approval_user&quot;: &quot;wallet owner (user@gmail.com)&quot;,
          &quot;approval_time&quot;: 1562210142,
          &quot;user_message&quot;: &quot;&quot;,
          &quot;level&quot;: 0,
          &quot;owner&quot;: 1,
          &quot;confirm&quot;: 1,
          &quot;state&quot;: 2,
          &quot;error_code&quot;: 0
        }
      ],
      &quot;state&quot;: 2,
      &quot;create_time&quot;: 1562210129,
      &quot;transaction_time&quot;: 1562210142,
      &quot;scheduled_name&quot;: &quot;&quot;,
      &quot;transaction_type&quot;: 0,
      &quot;eos_transaction_type&quot;: 0,
      &quot;real_amount&quot;: &quot;2&quot;,
      &quot;chain_fee&quot;: &quot;0.000375&quot;,
      &quot;platform_fee&quot;: &quot;0&quot;,
      &quot;tx_category&quot;: &quot;&quot;,
      &quot;memo&quot;: &quot;TO SND&quot;
    }
  ]
}
</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">transaction_count</td>
<td style="text-align: left">int</td>
<td style="text-align: left">Total transactions in specified date duration</td>
</tr>
<tr>
<td style="text-align: left">transaction_item</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Array of transaction record</td>
</tr>
</tbody>
</table>

<blockquote>
<p>Refer to <a href="#currency-definition">Currency Definition</a> or <a href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md">here</a> for more detailed currency definitions</p>
</blockquote>

<h5 id="toc_323">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
</tbody>
</table>

<h5 id="toc_324"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-vault-wallet-balance"></a></p>

<h3 id="toc_325">Query Vault Wallet Balance</h3>

<p>Get the vault wallet balance. Facilitate to establish a real-time balance monitoring mechanism.</p>

<h5 id="toc_326">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/vault/balance</p>

<blockquote>
<p><code>Vault Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-vault-wallet-balance">Sample curl command</a></li>
</ul>

<h5 id="toc_327">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_328">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/488471/vault/balance</code></pre></div>

<h5 id="toc_329">Response Format</h5>

<p>An example of a successful response:</p>

<p>BTC vault wallet</p>

<div><pre><code class="language-javascript">{
  &quot;balance&quot;: &quot;0.00009798&quot;,
  &quot;currency&quot;: 0,
  &quot;token_address&quot;: &quot;&quot;,
  &quot;token_balance&quot;: &quot;&quot;,
  &quot;unconfirm_balance&quot;: &quot;0&quot;,
  &quot;unconfirm_token_balance&quot;: &quot;&quot;,
  &quot;wallet_address&quot;: &quot;2Mw1iJnQvAt3hNEvEZKdHkij8TNtzjaF3LH&quot;
}</code></pre></div>

<p>USDT-Omni vault wallet that mapping to above BTC vault wallet</p>

<div><pre><code class="language-javascript">{
  &quot;balance&quot;: &quot;0.00009798&quot;,
  &quot;currency&quot;: 0,
  &quot;token_address&quot;: &quot;31&quot;,
  &quot;token_balance&quot;: &quot;0.1&quot;,
  &quot;unconfirm_balance&quot;: &quot;0&quot;,
  &quot;unconfirm_token_balance&quot;: &quot;&quot;,
  &quot;wallet_address&quot;: &quot;2Mw1iJnQvAt3hNEvEZKdHkij8TNtzjaF3LH&quot;
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">currency</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Registered coin types. Refer to <a href="#currency-definition">Currency Definition</a></td>
</tr>
<tr>
<td style="text-align: left">wallet_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Wallet address</td>
</tr>
<tr>
<td style="text-align: left">token_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token contract address</td>
</tr>
<tr>
<td style="text-align: left">balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Withdrawal wallet balance</td>
</tr>
<tr>
<td style="text-align: left">token_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Withdrawal wallet token balance</td>
</tr>
<tr>
<td style="text-align: left">unconfirm_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Unconfirmed withdrawal wallet balance</td>
</tr>
<tr>
<td style="text-align: left">unconfirm_token_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Unconfirmed withdrawal wallet token balance</td>
</tr>
</tbody>
</table>

<blockquote>
<p>The currencies that support the unconfirmed balance are BTC, LTC, ETH, BCH, BSV, DASH</p>
</blockquote>

<h5 id="toc_330">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">404</td>
<td style="text-align: left">304</td>
<td style="text-align: left">Wallet ID invalid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The wallet is not allowed to perform this request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
</tbody>
</table>

<h5 id="toc_331"><a href="#table-of-contents">Back to top</a></h5>

<h1 id="toc_332">Common API</h1>

<p><a name="activate-api-code"></a></p>

<h3 id="toc_333">Activate API Code</h3>

<p>Activate the API code of a certain wallet. Once activated, the currently activated API code will immediately become invalid.</p>

<h5 id="toc_334">Request</h5>

<p><strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/apisecret/activate</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-activate-api-code">Sample curl command</a></li>
</ul>

<h5 id="toc_335">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_336">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/488471/apisecret/activate</code></pre></div>

<h5 id="toc_337">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;api_code&quot;: &quot;4PcdE9VjXfrk7WjC1&quot;,
  &quot;exp&quot;: 1609646716
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">api_code</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The activated API code</td>
</tr>
<tr>
<td style="text-align: left">exp</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">The API code expiration unix time in UTC</td>
</tr>
</tbody>
</table>

<h5 id="toc_338">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
</tbody>
</table>

<h5 id="toc_339"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-api-code-status"></a></p>

<h3 id="toc_340">Query API Code Status</h3>

<p>Query the API code info of a certain wallet. Use the <code>inactivated</code> API code in any request will activate it. Once activated, the currently activated API code will immediately become invalid.</p>

<h5 id="toc_341">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/apisecret</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-api-code-status">Sample curl command</a></li>
</ul>

<h5 id="toc_342">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_343">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/488471/apisecret</code></pre></div>

<h5 id="toc_344">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;valid&quot;: {
    &quot;api_code&quot;: &quot;H4Q6xFZgiTZb37GN&quot;,
    &quot;exp&quot;: 1583144863
  },
  &quot;inactivated&quot;: {
    &quot;api_code&quot;: &quot;32PmGCjNzXda4mNHX&quot;
  }
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">valid</td>
<td style="text-align: left">object</td>
<td style="text-align: left">The activated API code</td>
</tr>
<tr>
<td style="text-align: left">inactivated</td>
<td style="text-align: left">object</td>
<td style="text-align: left">Not active API code</td>
</tr>
<tr>
<td style="text-align: left">api_code</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The API code for querying wallet</td>
</tr>
<tr>
<td style="text-align: left">exp</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">The API code expiration unix time in UTC</td>
</tr>
</tbody>
</table>

<blockquote>
<p>Use an invalid API-CODE, the caller will get a 403 Forbidden error.</p>
</blockquote>

<h5 id="toc_345">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
</tbody>
</table>

<h5 id="toc_346"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="refresh-api-code"></a></p>

<h3 id="toc_347">Refresh API Code</h3>

<p>Use paired refresh code to acquire the new inactive API code/secret of the wallet.</p>

<h5 id="toc_348">Request</h5>

<p><strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/refreshsecret</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-refresh-api-code">Sample curl command</a></li>
</ul>

<h5 id="toc_349">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_350">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/357818/refreshsecret</code></pre></div>

<h6 id="toc_351">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;refresh_code&quot;:&quot;3EbaSPUpKzHJ9wYgYZqy6W4g43NT365bm9vtTfYhMPra&quot;
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_352">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">refresh_code</td>
<td style="text-align: left">string</td>
<td style="text-align: left">required</td>
<td style="text-align: left">The corresponding refresh code of the API code specified in the X-API-CODE header</td>
</tr>
</tbody>
</table>

<h5 id="toc_353">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;api_code&quot;: &quot;4QjbY3qES4tEh19PU&quot;,
  &quot;api_secret&quot;: &quot;3jC1qjr4mrKxfoXkxoN27Uhmbm1E&quot;,
  &quot;refresh_code&quot;: &quot;HcN17gxZ3ojrBYSXnjKsU9Pun8krP6J9Pn678k4rZ13m&quot;
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">api_code</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The new inactive API code</td>
</tr>
<tr>
<td style="text-align: left">api_secret</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The API secret</td>
</tr>
<tr>
<td style="text-align: left">refresh_code</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The paired refresh code</td>
</tr>
</tbody>
</table>

<h5 id="toc_354">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body or the refresh code is invalid</td>
</tr>
</tbody>
</table>

<h5 id="toc_355"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-wallet-info"></a></p>

<h3 id="toc_356">Query Wallet Info</h3>

<p>Get wallet basic information.</p>

<h5 id="toc_357">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/info</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-query-wallet-info">Sample curl command</a></li>
</ul>

<h5 id="toc_358">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_359">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/488471/info</code></pre></div>

<h5 id="toc_360">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;currency&quot;: 60,
  &quot;currency_name&quot;: &quot;ETH&quot;,
  &quot;address&quot;: &quot;0xd11Bd6E308b8DC1c5243D54cf41A427Ca0F46943&quot;,
  &quot;token_name&quot;: &quot;TTF TOKEN&quot;,
  &quot;token_symbol&quot;: &quot;TTF&quot;,
  &quot;token_contract_address&quot;: &quot;0xd0ee17a4e1866c1ac53a54cc2cd4dd64b503cf40&quot;,
  &quot;token_decimals&quot;: &quot;18&quot;
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">currency</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Registered coin types. Refer to <a href="#currency-definition">Currency Definition</a></td>
</tr>
<tr>
<td style="text-align: left">currency_name</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Name of currency</td>
</tr>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Wallet address</td>
</tr>
</tbody>
</table>

<blockquote>
<p>Refer to <a href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md">here</a> for more detailed currency definitions</p>
</blockquote>

<p>If <code>WALLET_ID</code> is a token wallet, the following fields present:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">token_name</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token name</td>
</tr>
<tr>
<td style="text-align: left">token_symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token symbol</td>
</tr>
<tr>
<td style="text-align: left">token_contract_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token contract address</td>
</tr>
<tr>
<td style="text-align: left">token_decimals</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token decimals</td>
</tr>
</tbody>
</table>

<h5 id="toc_361">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
</tbody>
</table>

<h5 id="toc_362"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="verify-addresses"></a></p>

<h3 id="toc_363">Verify Addresses</h3>

<p>Check if the address conforms to the wallet cryptocurrency address format (for example, ETH must have the prefix 0x, BTC should start with 1, 3 or bc1, etc).</p>

<blockquote>
<p>If the wallet&#39;s cryptocurrency is BNB or XRP, there will be a <code>must_need_memo</code> flag to indicate whether the address needs a memo / destination tag when transferring cryptocurrency to that address.</p>
</blockquote>

<h5 id="toc_364">Request</h5>

<p><code>VIEW</code> <strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/addresses/verify</p>

<blockquote>
<p>Wallet ID must be a deposit or withdraw wallet&#39;s ID</p>
</blockquote>

<ul>
<li><a href="#curl-verify-addresses">Sample curl command</a></li>
</ul>

<h5 id="toc_365">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_366">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/488471/addresses/verify</code></pre></div>

<h6 id="toc_367">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;addresses&quot;: [
    &quot;0x635B4764D1939DfAcD3a8014726159abC277BecC&quot;,
    &quot;1CK6KHY6MHgYvmRQ4PAafKYDrg1ejbH1cE&quot;
  ]
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_368">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">addresses</td>
<td style="text-align: left">array</td>
<td style="text-align: left">requried</td>
<td style="text-align: left">Specify the address for verification</td>
</tr>
</tbody>
</table>

<h5 id="toc_369">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;result&quot;: [
    {
      &quot;address&quot;: &quot;0x635B4764D1939DfAcD3a8014726159abC277BecC&quot;,
      &quot;valid&quot;: true,
      &quot;must_need_memo&quot;: false
    },
    {
      &quot;address&quot;: &quot;1CK6KHY6MHgYvmRQ4PAafKYDrg1ejbH1cE&quot;,
      &quot;valid&quot;: false,
      &quot;must_need_memo&quot;: false
    }
  ]
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">result</td>
<td style="text-align: left">array</td>
<td style="text-align: left">Array of addresses&#39; verification result</td>
</tr>
<tr>
<td style="text-align: left">must_need_memo</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">Indicate whether the address needs a memo / destination tag when transferring cryptocurrency to that address</td>
</tr>
</tbody>
</table>

<h5 id="toc_370">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
</tbody>
</table>

<h5 id="toc_371"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="inspect-callback-endpoint"></a></p>

<h3 id="toc_372">Inspect Callback Endpoint</h3>

<p>Use to inspect the notification and withdrawal authentication endpoint.</p>

<h5 id="toc_373">Request</h5>

<p><code>VIEW</code> <strong>POST</strong> /v1/sofa/wallets/<code>WALLET_ID</code>/notifications/inspect</p>

<blockquote>
<p><code>Withdrawal Wallet</code> <code>Deposit Wallet</code> <code>Deposit-withdrawal Wallet</code> <code>Delegated Wallet</code></p>
</blockquote>

<ul>
<li><a href="#curl-inspect-callback-endpoint">Sample curl command</a></li>
</ul>

<h5 id="toc_374">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_375">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/896541/notifications/inspect</code></pre></div>

<h6 id="toc_376">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;test_number&quot;: 102999
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_377">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">test_number</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">requried</td>
<td style="text-align: left">The test number will be sent to the notification endpoint in the format <code>{&quot;msg&quot;:&quot;CONNECTION TEST&quot;,&quot;server_time&quot;:1622195270,&quot;client_ip&quot;:&quot;xxx.xxx.xxx.xxx&quot;,&quot;test_number&quot;:102999}</code>.</td>
</tr>
</tbody>
</table>

<h5 id="toc_378">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;server_time&quot;: 1622195253,
  &quot;client_ip&quot;: &quot;::1&quot;,
  &quot;notification_endpoint&quot;: {
    &quot;url&quot;: &quot;http%3A%2F%2Flocalhost%3A8889%2Fv1%2Fmock%2Fwallets%2Fcallback&quot;,
    &quot;status_code&quot;: 400,
    &quot;response&quot;: &quot;NDAw&quot;
  },
  &quot;withdrawal_authentication_endpoint&quot;: {
    &quot;error&quot;: &quot;no endpoint found&quot;
  }
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">server_time</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Current server unix time in UTC</td>
</tr>
<tr>
<td style="text-align: left">client_ip</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The request client IP</td>
</tr>
<tr>
<td style="text-align: left">notification_endpoint</td>
<td style="text-align: left">struct</td>
<td style="text-align: left">Specify the test result of notification endpoint</td>
</tr>
<tr>
<td style="text-align: left">withdrawal_authentication_endpoint</td>
<td style="text-align: left">struct</td>
<td style="text-align: left">Specify the test result of withdrawal authentication endpoint</td>
</tr>
<tr>
<td style="text-align: left">url</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The escaped endpoint URL</td>
</tr>
<tr>
<td style="text-align: left">status_code</td>
<td style="text-align: left">int</td>
<td style="text-align: left">The HTTP response status code from endpoint</td>
</tr>
<tr>
<td style="text-align: left">response</td>
<td style="text-align: left">string</td>
<td style="text-align: left">The base64 encoded response from endpoint</td>
</tr>
<tr>
<td style="text-align: left">error</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Specify the connection error if any</td>
</tr>
</tbody>
</table>

<h5 id="toc_379">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">112</td>
<td style="text-align: left">Invalid parameter</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Malformatted post body</td>
</tr>
</tbody>
</table>

<h5 id="toc_380"><a href="#table-of-contents">Back to top</a></h5>

<h1 id="toc_381">Read-only API code API</h1>

<p><a name="list-wallets"></a></p>

<h3 id="toc_382">List Wallets</h3>

<p>List all wallets can be accessed by the inquiry read-only API code.</p>

<h5 id="toc_383">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/readonly/walletlist</p>

<blockquote>
<p>The API code must be a read-only API code. Use wallet ID 0 to register API code with the mock server.</p>
</blockquote>

<ul>
<li><a href="#curl-list-wallets">Sample curl command</a></li>
</ul>

<h5 id="toc_384">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_385">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/readonly/walletlist</code></pre></div>

<h5 id="toc_386">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;total&quot;: 2,
  &quot;wallets&quot;: [
    {
      &quot;address&quot;: &quot;2NAnSkEp6SpUPLsdP3ChvN6K5qPMZyoB3RF&quot;,
      &quot;currency&quot;: 0,
      &quot;currency_name&quot;: &quot;BTC&quot;,
      &quot;decimals&quot;: &quot;8&quot;,
      &quot;type&quot;: 2,
      &quot;wallet_id&quot;: 101645
    },
    {
      &quot;address&quot;: &quot;0x85AfD8F88C0347aFF89AFc6C0749322719396616&quot;,
      &quot;currency&quot;: 60,
      &quot;currency_name&quot;: &quot;ETH&quot;,
      &quot;decimals&quot;: &quot;18&quot;,
      &quot;token_contract_address&quot;: &quot;0xdf2ce4af00b10644d00316b3d99e029d82d5d2f3&quot;,
      &quot;token_decimals&quot;: &quot;18&quot;,
      &quot;token_name&quot;: &quot;JGB2&quot;,
      &quot;token_symbol&quot;: &quot;JGB2&quot;,
      &quot;type&quot;: 0,
      &quot;wallet_id&quot;: 118970
    }
  ]
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Wallet address</td>
</tr>
<tr>
<td style="text-align: left">currency</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Registered coin types. Refer to <a href="#currency-definition">Currency Definition</a></td>
</tr>
<tr>
<td style="text-align: left">currency_name</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Name of currency</td>
</tr>
<tr>
<td style="text-align: left">decimals</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Decimals of currency</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">int</td>
<td style="text-align: left">Wallet Type. Refer to <a href="#wallet-type-definition">Wallet Type Definition</a></td>
</tr>
<tr>
<td style="text-align: left">wallet_id</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Wallet ID</td>
</tr>
<tr>
<td style="text-align: left">token_name</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token name</td>
</tr>
<tr>
<td style="text-align: left">token_symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token symbol</td>
</tr>
<tr>
<td style="text-align: left">token_contract_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token contract address</td>
</tr>
<tr>
<td style="text-align: left">token_decimals</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token decimals</td>
</tr>
</tbody>
</table>

<h5 id="toc_387">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
</tbody>
</table>

<h5 id="toc_388"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-wallets-balance"></a></p>

<h3 id="toc_389">Query Wallets Balance</h3>

<p>Query balance of all wallets can be accessed by the inquiry read-only API code.</p>

<h5 id="toc_390">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/wallets/readonly/walletlist/balances?type=<code>type</code>&amp;start_index=<code>start_index</code>&amp;request_number=<code>request_number</code></p>

<blockquote>
<p>The API code must be a read-only API code. Use wallet ID 0 to register API code with the mock server.</p>
</blockquote>

<ul>
<li><a href="#curl-query-wallets-balance">Sample curl command</a></li>
</ul>

<h5 id="toc_391">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_392">API</h6>

<div><pre><code class="language-none">/v1/sofa/wallets/readonly/walletlist/balances</code></pre></div>

<p>The request includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, default <code>-1</code></td>
<td style="text-align: left">Specify the wallet type want to query. Supports Vault, Deposit and Withdrawal wallet type. Refer to <a href="#wallet-type-definition">Wallet Type Definition</a></td>
</tr>
<tr>
<td style="text-align: left">start_index</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, default <code>0</code></td>
<td style="text-align: left">Specify start index</td>
</tr>
<tr>
<td style="text-align: left">request_number</td>
<td style="text-align: left">int</td>
<td style="text-align: left">optional, default <code>50</code>, max <code>100</code></td>
<td style="text-align: left">Request count</td>
</tr>
</tbody>
</table>

<h5 id="toc_393">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;total&quot;: 104,
  &quot;wallet_balances&quot;: [
    {
      &quot;balance&quot;: &quot;1&quot;,
      &quot;type&quot;: 0,
      &quot;wallet_id&quot;: 417702
    },
    {
      &quot;balance&quot;: &quot;0.35673727953125&quot;,
      &quot;token_balance&quot;: &quot;0.00000099&quot;,
      &quot;type&quot;: 0,
      &quot;wallet_id&quot;: 426493
    },
    {
      &quot;balance&quot;: &quot;4.661838507219943297&quot;,
      &quot;token_id_balances&quot;: [
        {
          &quot;balance&quot;: &quot;4&quot;,
          &quot;token_id&quot;: &quot;2001&quot;
        },
        {
          &quot;balance&quot;: &quot;50000&quot;,
          &quot;token_id&quot;: &quot;2004&quot;
        },
        {
          &quot;balance&quot;: &quot;0&quot;,
          &quot;token_id&quot;: &quot;2005&quot;
        }
      ],
      &quot;type&quot;: 0,
      &quot;wallet_id&quot;: 661159
    },
    {
      &quot;balance&quot;: &quot;0.010000000000000000&quot;,
      &quot;pool_balance&quot;: &quot;0.414979&quot;,
      &quot;type&quot;: 2,
      &quot;wallet_id&quot;: 520474
    },
    {
      &quot;balance&quot;: &quot;27.46735753510800289&quot;,
      &quot;token_balance&quot;: &quot;0&quot;,
      &quot;type&quot;: 3,
      &quot;wallet_id&quot;: 100587
    }
  ]
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">wallet_id</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Wallet ID</td>
</tr>
<tr>
<td style="text-align: left">wallet_name</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Wallet Name</td>
</tr>
<tr>
<td style="text-align: left">address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Wallet address</td>
</tr>
<tr>
<td style="text-align: left">currency</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Registered coin types. Refer to <a href="#currency-definition">Currency Definition</a></td>
</tr>
<tr>
<td style="text-align: left">currency_name</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Name of currency</td>
</tr>
<tr>
<td style="text-align: left">decimals</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Decimals of currency</td>
</tr>
<tr>
<td style="text-align: left">type</td>
<td style="text-align: left">int</td>
<td style="text-align: left">Wallet Type. Refer to <a href="#wallet-type-definition">Wallet Type Definition</a></td>
</tr>
<tr>
<td style="text-align: left">token_name</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token name</td>
</tr>
<tr>
<td style="text-align: left">token_symbol</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token symbol</td>
</tr>
<tr>
<td style="text-align: left">token_contract_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token contract address</td>
</tr>
<tr>
<td style="text-align: left">token_decimals</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token decimals</td>
</tr>
<tr>
<td style="text-align: left">error</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">Set to true if the balance query fails</td>
</tr>
<tr>
<td style="text-align: left">balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Wallet balance. For token wallet this is the mapped wallet&#39;s balance.</td>
</tr>
<tr>
<td style="text-align: left">unconfirm_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Unconfirmed wallet balance. For token wallet this is the mapped wallet&#39;s unconfirmed balance.</td>
</tr>
<tr>
<td style="text-align: left">token_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Wallet token balance</td>
</tr>
<tr>
<td style="text-align: left">unconfirm_token_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Unconfirmed wallet token balance</td>
</tr>
<tr>
<td style="text-align: left">pool_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Wallet pool address balance</td>
</tr>
<tr>
<td style="text-align: left">pool_unconfirm_token_balance</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Wallet Pool address unconfirmed balance</td>
</tr>
<tr>
<td style="text-align: left">token_id_balances</td>
<td style="text-align: left">array</td>
<td style="text-align: left">For ERC1155, ERC721 token wallet</td>
</tr>
</tbody>
</table>

<blockquote>
<p>Refer to <a href="#support-unconfirmed-balance-currency">Support Unconfirmed Balance Currency</a> for the currencies that support the unconfirmed balance.</p>

<p>For delegated ERC721 and ERC1155 token wallets, use the <a href="#query-delegated-address-balance">Query Delegated Address Balance</a> API to query detailed <code>token_id_balances</code> information.</p>
</blockquote>

<h5 id="toc_394">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid ID</td>
<td style="text-align: left">-</td>
<td style="text-align: left">No wallet ID found</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
</tbody>
</table>

<h5 id="toc_395"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-currency-prices"></a></p>

<h3 id="toc_396">Query Currency Prices</h3>

<p>Query the prices of all currencies available in the SOFA system.</p>

<blockquote>
<p>The prices provided by the API are averages for some exchanges and may not be real-time and accurate, so please be aware of the risk of possible price fluctuations when using the API.</p>
</blockquote>

<h5 id="toc_397">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/currency/prices?convert=<code>currency</code></p>

<blockquote>
<p>The API code must be a read-only API code. Use wallet ID 0 to register API code with the mock server.</p>
</blockquote>

<ul>
<li><a href="#curl-query-currency-prices">Sample curl command</a></li>
</ul>

<h5 id="toc_398">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_399">API</h6>

<div><pre><code class="language-none">/v1/sofa/currency/prices?convert=USD,GBP</code></pre></div>

<p>The request includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">convert</td>
<td style="text-align: left">string</td>
<td style="text-align: left">optional, default <code>USD</code></td>
<td style="text-align: left">The legal tender to be converted, concats with &quot;,&quot;</td>
</tr>
</tbody>
</table>

<blockquote>
<p>All legal tender currencies supported are AUD, BRL, CAD, EUR, GBP, INR, JPY, KRW, NZD, PLN, RUB, SEK, SGD, THB, TWD, USD, ZAR.</p>
</blockquote>

<h5 id="toc_400">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;currency_prices&quot;: [
    {
      &quot;currency&quot;: 145,
      &quot;currency_symbol&quot;: &quot;BCH&quot;,
      &quot;prices&quot;: {
        &quot;GBP&quot;: 238.67160135,
        &quot;USD&quot;: 323.05
      }
    },
    {
      &quot;currency&quot;: 0,
      &quot;currency_symbol&quot;: &quot;BTC&quot;,
      &quot;prices&quot;: {
        &quot;GBP&quot;: 30967.87854042,
        &quot;USD&quot;: 41916.06
      }
    },
    {
      &quot;currency&quot;: 60,
      &quot;currency_symbol&quot;: &quot;ETH&quot;,
      &quot;prices&quot;: {
        &quot;GBP&quot;: 2116.74115956,
        &quot;USD&quot;: 2865.08
      }
    }
  ],
  &quot;last_refresh_attempt_time&quot;: 1644811648,
  &quot;last_refresh_success_time&quot;: 1644811650
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">currency</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Registered coin types. Refer to <a href="#currency-definition">Currency Definition</a></td>
</tr>
<tr>
<td style="text-align: left">token_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Token contract address</td>
</tr>
<tr>
<td style="text-align: left">prices</td>
<td style="text-align: left">key-value</td>
<td style="text-align: left">Currency-Price pair</td>
</tr>
<tr>
<td style="text-align: left">last<em>refresh</em>attempt_time</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Last attempt to update prices (unix time in UTC)</td>
</tr>
<tr>
<td style="text-align: left">last<em>refresh</em>success_time</td>
<td style="text-align: left">int64</td>
<td style="text-align: left">Last successful price update time (unix time in UTC)</td>
</tr>
</tbody>
</table>

<h5 id="toc_401">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
</tbody>
</table>

<h5 id="toc_402"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-contract-token-meta"></a></p>

<h3 id="toc_403">Query Contract Token Meta</h3>

<p>Used to query token meta information for a specific contract.</p>

<h5 id="toc_404">Request</h5>

<p><code>VIEW</code> <strong>POST</strong> /v1/sofa/currency/<code>CURRENCY</code>/contract/get-multiple-tokenuri</p>

<blockquote>
<p>The API code must be a read-only API code. Use wallet ID 0 to register API code with the mock server.</p>

<p>All EVM compatible currencies are supported. Refer to <a href="#evm-compatible-currency">EVM Compatible Currency</a>.</p>
</blockquote>

<ul>
<li><a href="#curl-query-contract-token-meta">Sample curl command</a></li>
</ul>

<h5 id="toc_405">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_406">API</h6>

<div><pre><code class="language-none">/v1/sofa/currency/60/contract/get-multiple-tokenuri</code></pre></div>

<h6 id="toc_407">Post body</h6>

<div><pre><code class="language-javascript">{
  &quot;requests&quot;: [
    {
      &quot;token_address&quot;: &quot;0x9fceceda8a781e493a0eba6a59c6e6c731fd5ee5&quot;,
      &quot;token_id&quot;: &quot;1&quot;
    }
  ]
}</code></pre></div>

<p>The request includes the following parameters:</p>

<h6 id="toc_408">Post body</h6>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Note</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">requests</td>
<td style="text-align: left">array</td>
<td style="text-align: left">requried</td>
<td style="text-align: left">Specify all inquiry contracts</td>
</tr>
<tr>
<td style="text-align: left">token_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">requried</td>
<td style="text-align: left">Specify token contract address</td>
</tr>
<tr>
<td style="text-align: left">token_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">requried if token_adress is a ERC1155 contract</td>
<td style="text-align: left">Specify token ID in an ERC1155 contract</td>
</tr>
</tbody>
</table>

<h5 id="toc_409">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;responses&quot;: [
    {
      &quot;error_message&quot;: null,
      &quot;token_address&quot;: &quot;0x9fceceda8a781e493a0eba6a59c6e6c731fd5ee5&quot;,
      &quot;token_id&quot;: &quot;1&quot;,
      &quot;uri_info&quot;: {
        &quot;description&quot;: &quot;Elementos character&quot;,
        &quot;image&quot;: &quot;https://gateway.pinata.cloud/ipfs/QmQRzm4tzvboKqseZFWV1MYjbwVQFeeQfyc4Vf9EqEnQHm&quot;,
        &quot;name&quot;: 1,
        &quot;token_uri&quot;: &quot;https://gateway.pinata.cloud/ipfs/QmNW6R5J5vTxcRHpiMP4KNwRbtUyJExH6buXqhHLUwfHum&quot;
      }
    }
  ]
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">error_message</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Description of any errors that occurred</td>
</tr>
<tr>
<td style="text-align: left">token_address</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Inquiry token contract</td>
</tr>
<tr>
<td style="text-align: left">token_id</td>
<td style="text-align: left">string</td>
<td style="text-align: left">Inquiry token ID</td>
</tr>
<tr>
<td style="text-align: left">uri_info</td>
<td style="text-align: left">struct</td>
<td style="text-align: left">Meta information, please refer to <a href="https://eips.ethereum.org/EIPS/eip-721#specification">EIP-721</a>, <a href="https://eips.ethereum.org/EIPS/eip-1155#metadata">EIP-1155</a>.</td>
</tr>
</tbody>
</table>

<h5 id="toc_410">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
<tr>
<td style="text-align: left">400</td>
<td style="text-align: left">965</td>
<td style="text-align: left">Not Supported</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Not supported currency</td>
</tr>
</tbody>
</table>

<h5 id="toc_411"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="query-service-health-status"></a></p>

<h3 id="toc_412">Query Service Health Status</h3>

<p>Used to query service health status.</p>

<h5 id="toc_413">Request</h5>

<p><code>VIEW</code> <strong>GET</strong> /v1/sofa/healthcheck</p>

<blockquote>
<p>The API code must be a read-only API code. Use wallet ID 0 to register API code with the mock server.</p>
</blockquote>

<ul>
<li><a href="#curl-query-service-health-status">Sample curl command</a></li>
</ul>

<h5 id="toc_414">Request Format</h5>

<p>An example of the request:</p>

<h6 id="toc_415">API</h6>

<div><pre><code class="language-none">/v1/sofa/healthcheck</code></pre></div>

<h5 id="toc_416">Response Format</h5>

<p>An example of a successful response:</p>

<div><pre><code class="language-javascript">{
  &quot;cc_state&quot;: 1,
  &quot;ww_state&quot;: 1,
  &quot;kms_state&quot;: 1,
  &quot;mpc_enabled&quot;: true,
  &quot;mpc_state&quot;: 1
}</code></pre></div>

<p>The response includes the following parameters:</p>

<table>
<thead>
<tr>
<th style="text-align: left">Field</th>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">cc_state</td>
<td style="text-align: left">int</td>
<td style="text-align: left">1 means the service is live, 0 means the service is down</td>
</tr>
<tr>
<td style="text-align: left">ww_state</td>
<td style="text-align: left">int</td>
<td style="text-align: left">1 means the service is live, 0 means the service is down</td>
</tr>
<tr>
<td style="text-align: left">kms_state</td>
<td style="text-align: left">int</td>
<td style="text-align: left">1 means the service is live, 0 means the service is down</td>
</tr>
<tr>
<td style="text-align: left">mpc_enabled</td>
<td style="text-align: left">boolean</td>
<td style="text-align: left">true means MPC enabled, false means no MPC</td>
</tr>
<tr>
<td style="text-align: left">mpc_state</td>
<td style="text-align: left">int</td>
<td style="text-align: left">1 means the service is live, 0 means the service is down</td>
</tr>
</tbody>
</table>

<h5 id="toc_417">Error Code</h5>

<table>
<thead>
<tr>
<th style="text-align: left">HTTP Code</th>
<th style="text-align: left">Error Code</th>
<th style="text-align: left">Error</th>
<th style="text-align: left">Message</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Header not found</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Missing <code>X-API-CODE</code>, <code>X-CHECKSUM</code> header or query param <code>t</code></td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid timestamp</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The timestamp <code>t</code> is not in the valid time range</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid checksum</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The request is considered a replay request</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Invalid API code</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-API-CODE</code> header contains invalid API code</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code for wallet {WALLET_ID}</td>
<td style="text-align: left">-</td>
<td style="text-align: left">The API code mismatched</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Checksum unmatch</td>
<td style="text-align: left">-</td>
<td style="text-align: left"><code>X-CHECKSUM</code> header contains wrong checksum</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Forbidden. Call too frequently ({THROTTLING_COUNT} calls/minute)</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Send requests too frequently</td>
</tr>
<tr>
<td style="text-align: left">403</td>
<td style="text-align: left">385</td>
<td style="text-align: left">API Secret not valid</td>
<td style="text-align: left">-</td>
<td style="text-align: left">Invalid API code permission</td>
</tr>
</tbody>
</table>

<h5 id="toc_418"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="mock-server"></a></p>

<h1 id="toc_419">Mock Server</h1>

<h3 id="toc_420">How to compile</h3>

<ul>
<li>Put sample code to {YOUR_GO_PATH}/github.com/cybavo/SOFA_MOCK_SERVER</li>
<li>Execute

<ul>
<li>go mod vendor</li>
<li>go build ./mockserver.go</li>
<li>./mockserver</li>
</ul></li>
</ul>

<h3 id="toc_421">Setup configuration</h3>

<blockquote>
<p>Configure CYBAVO API server URL in mockserver.app.conf</p>
</blockquote>

<div><pre><code class="language-none">api_server_url=&quot;BACKEND_SERVER_URL&quot;</code></pre></div>

<h3 id="toc_422">Put wallet API code/secret into mock server</h3>

<ul>
<li>  Get API code/secret on web control panel

<ul>
<li>  API_CODE, API_SECRET, WALLET_ID</li>
</ul></li>
<li>  Put API code/secret to mock server&#39;s database</li>
<li> For the read-only API code/secret, use wallet ID <code>0</code> to register.</li>
</ul>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;api_code&quot;:&quot;API_CODE&quot;,&quot;api_secret&quot;:&quot;API_SECRET&quot;}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/apitoken</code></pre></div>

<h3 id="toc_423">Register mock server callback URL</h3>

<blockquote>
<p>Operate on web control panel</p>
</blockquote>

<p>Notification Callback URL</p>

<div><pre><code class="language-none">http://localhost:8889/v1/mock/wallets/callback</code></pre></div>

<p>Withdrawal Authentication Callback URL</p>

<div><pre><code class="language-none">http://localhost:8889/v1/mock/wallets/withdrawal/callback</code></pre></div>

<blockquote>
<p>The withdrawal authentication callback URL once set, every withdrawal request will callback this URL to get authentication to proceed withdrawal request.</p>

<p>Refer to <a href="https://github.com/CYBAVO/SOFA_MOCK_SERVER/blob/master/controllers/OuterController.go#L183">WithdrawalCallback()</a> function in mock server OuterController.go</p>
</blockquote>

<h5 id="toc_424"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="curl-testing-commands"></a></p>

<h1 id="toc_425">cURL Testing Commands</h1>

<p><a name="curl-create-deposit-addresses"></a></p>

<h3 id="toc_426">Create Deposit Addresses</h3>

<p>For BNB, XLM, XRP or EOS wallet:</p>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;count&quot;:2,&quot;memos&quot;:[&quot;10001&quot;,&quot;10002&quot;]}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/addresses</code></pre></div>

<p>For wallet excepts BNB, XLM, XRP and EOS:</p>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;count&quot;:2}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/addresses</code></pre></div>

<ul>
<li><a href="#create-deposit-addresses">API definition</a></li>
</ul>

<p><a name="curl-query-deposit-addresses"></a></p>

<h3 id="toc_427">Query Deposit Addresses</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/addresses?start_index=0&amp;request_number=1000</code></pre></div>

<ul>
<li><a href="#query-deposit-addresses">API definition</a></li>
</ul>

<p><a name="curl-query-deployed-contract-deposit-addresses"></a></p>

<h3 id="toc_428">Query Deployed Contract Deposit Addresses</h3>

<div><pre><code class="language-none">curl &#39;http://localhost:8889/v1/mock/wallets/{WALLET_ID}/addresses/contract_txid?txids={TXID1},{TXID2}&#39;</code></pre></div>

<ul>
<li><a href="#query-deployed-contract-deposit-addresses">API definition</a></li>
</ul>

<p><a name="curl-query-pool-address"></a></p>

<h3 id="toc_429">Query Pool Address</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/pooladdress</code></pre></div>

<ul>
<li><a href="#query-pool-address">API definition</a></li>
</ul>

<p><a name="curl-query-pool-address-balance"></a></p>

<h3 id="toc_430">Query Pool Address Balance</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/pooladdress/balance</code></pre></div>

<ul>
<li><a href="#query-pool-address-balance">API definition</a></li>
</ul>

<p><a name="curl-query-invalid-deposit-addresses"></a></p>

<h3 id="toc_431">Query Invalid Deposit Addresses</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/addresses/invalid-deposit</code></pre></div>

<ul>
<li><a href="#query-invalid-deposit-addresses">API definition</a></li>
</ul>

<p><a name="curl-query-deposit-callback-detail"></a></p>

<h3 id="toc_432">Query Deposit Callback Detail</h3>

<div><pre><code class="language-none">curl &#39;http://localhost:8889/v1/mock/wallets/{WALLET_ID}/receiver/notifications/txid/{TX_ID}/{VOUT_INDEX}&#39;</code></pre></div>

<ul>
<li><a href="#query-deposit-callback-detail">API definition</a></li>
</ul>

<p><a name="curl-resend-deposit-callbacks"></a></p>

<h3 id="toc_433">Resend Deposit/Collection Callbacks</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;notification_id&quot;:0}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/collection/notifications/manual</code></pre></div>

<ul>
<li><a href="#resend-deposit-callbacks">API definition</a></li>
</ul>

<p><a name="curl-query-deposit-wallet-balance"></a></p>

<h3 id="toc_434">Query Deposit Wallet Balance</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/receiver/balance</code></pre></div>

<ul>
<li><a href="#query-deposit-wallet-balance">API definition</a></li>
</ul>

<p><a name="curl-update-deposit-address-label"></a></p>

<h3 id="toc_435">Update Deposit Address Label</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;address&quot;:&quot;0x2B974a3e0b491bB26e0bF146E6cDaC36EFD574a&quot;,&quot;label&quot;:&quot;take-some-notes&quot;}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/addresses/label</code></pre></div>

<ul>
<li><a href="#update-deposit-address-label">API definition</a></li>
</ul>

<p><a name="curl-query-deposit-address-label"></a></p>

<h3 id="toc_436">Query Deposit Address Label</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;addresses&quot;:[&quot;0x2B974a3De0b491bB26e0bF146E6cDaC36EFD574a&quot;,&quot;0xF401AC94D9672e79c68e56A6f822b666E5A7d644&quot;]}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/addresses/get_labels</code></pre></div>

<ul>
<li><a href="#query-deposit-address-label">API definition</a></li>
</ul>

<p><a name="curl-query-delegated-address-balance"></a></p>

<h3 id="toc_437">Query Delegated Address Balance</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;addresses&quot;:[&quot;0x6A2969E4496d5b27967a68b411D7e0218943c1B6&quot;,&quot;0x1EA22Ed0347E6C9f852cfcBEFE752A026450164b&quot;,&quot;0x2baB9B3af6041960322a248d5315850fc79a3881&quot;]}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/receiver/get-balances</code></pre></div>

<ul>
<li><a href="#query-delegated-address-balance">API definition</a></li>
</ul>

<p><a name="curl-verify-deposit-addresses"></a></p>

<h3 id="toc_438">Verify Deposit Addresses</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;addresses&quot;:[&quot;0x46d4AD967F68253f61D45a044dC7dC7B13E5A4B3&quot;,&quot;0x107FF19Ea5fB7de78392e7AcC2A2C7eace891bDc&quot;]}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/receiver/addresses/verify</code></pre></div>

<ul>
<li><a href="#verify-deposit-addresses">API definition</a></li>
</ul>

<p><a name="curl-withdraw-assets"></a></p>

<h3 id="toc_439">Withdraw Assets</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;requests&quot;:[{&quot;order_id&quot;:&quot;888888_1&quot;,&quot;address&quot;:&quot;0x60589A749AAC632e9A830c8aBE042D1899d8Dd15&quot;,&quot;amount&quot;:&quot;0.0001&quot;,&quot;memo&quot;:&quot;memo-001&quot;,&quot;user_id&quot;:&quot;USER01&quot;,&quot;message&quot;:&quot;message-001&quot;},{&quot;order_id&quot;:&quot;888888_2&quot;,&quot;address&quot;:&quot;0xf16B7B8900F0d2f682e0FFe207a553F52B6C7015&quot;,&quot;amount&quot;:&quot;0.0002&quot;,&quot;memo&quot;:&quot;memo-002&quot;,&quot;user_id&quot;:&quot;USER01&quot;,&quot;message&quot;:&quot;message-002&quot;}]}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/transactions</code></pre></div>

<ul>
<li><a href="#withdraw-assets">API definition</a></li>
</ul>

<p><a name="curl-cancel-withdrawal-request"></a></p>

<h3 id="toc_440">Cancel Withdrawal Request</h3>

<div><pre><code class="language-none">curl -X POST http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/transactions/{ORDER_ID}/cancel</code></pre></div>

<ul>
<li><a href="#cancel-withdrawal-request">API definition</a></li>
</ul>

<p><a name="curl-query-latest-withdrawal-transaction-state"></a></p>

<h3 id="toc_441">Query Latest Withdrawal Transaction State</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/transactions/{ORDER_ID}</code></pre></div>

<ul>
<li><a href="#query-latest-withdrawal-transaction-state">API definition</a></li>
</ul>

<p><a name="curl-query-all-withdrawal-transaction-states"></a></p>

<h3 id="toc_442">Query All Withdrawal Transaction States</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/transactions/{ORDER_ID}/all</code></pre></div>

<ul>
<li><a href="#query-all-withdrawal-transaction-states">API definition</a></li>
</ul>

<p><a name="curl-query-withdrawal-transaction-event-logs"></a></p>

<h3 id="toc_443">Query Withdrawal Transaction Event Logs</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/transactions/eventlog?txid={TXID}</code></pre></div>

<ul>
<li><a href="#query-withdrawal-transaction-event-logs">API definition</a></li>
</ul>

<p><a name="curl-query-withdrawal-wallet-balance"></a></p>

<h3 id="toc_444">Query Withdrawal Wallet Balance</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/balance</code></pre></div>

<ul>
<li><a href="#query-withdrawal-wallet-balance">API definition</a></li>
</ul>

<p><a name="curl-query-withdrawal-callback-detail"></a></p>

<h3 id="toc_445">Query Withdrawal Callback Detail</h3>

<div><pre><code class="language-none">curl &#39;http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/notifications/order_id/{ORDER_ID}&#39;</code></pre></div>

<ul>
<li><a href="#query-withdrawal-callback-detail">API definition</a></li>
</ul>

<p><a name="curl-set-withdrawal-request-acl"></a></p>

<h3 id="toc_446">Set Withdrawal Request ACL</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;acl&quot;:&quot;192.168.101.55&quot;}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/transactions/acl</code></pre></div>

<ul>
<li><a href="#set-withdrawal-request-acl">API definition</a></li>
</ul>

<p><a name="curl-query-withdrawal-whitelist-configuration"></a></p>

<h3 id="toc_447">Query Withdrawal Whitelist Configuration</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/whitelist/config</code></pre></div>

<ul>
<li><a href="#query-withdrawal-whitelist-configuration">API definition</a></li>
</ul>

<p><a name="curl-query-withdrawal-wallet-transaction-history"></a></p>

<h3 id="toc_448">Query Withdrawal Wallet Transaction History</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/transactions</code></pre></div>

<ul>
<li><a href="#query-withdrawal-wallet-transaction-history">API definition</a></li>
</ul>

<p><a name="curl-sign-message"></a></p>

<h3 id="toc_449">Sign Message</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;message&quot;:&quot;This is proof that I, user A, have access to this address.&quot;}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/signmessage</code></pre></div>

<ul>
<li><a href="#sign-message">API definition</a></li>
</ul>

<p><a name="curl-call-contract-read-abi"></a></p>

<h3 id="toc_450">Call Contract Read ABI</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/contract/read?contract=0xad6d458402f60fd3bd25163575031acdce07538d&amp;data=0xdd62ed3e000000000000000000000000d11bd6e308b8dc1c5243d54cf41a427ca0f46943000000000000000000000000e592427a0aece92de3edee1f18e0157c05861564</code></pre></div>

<ul>
<li><a href="#call-contract-read-abi">API definition</a></li>
</ul>

<p><a name="curl-arweave-sign-transaction"></a></p>

<h3 id="toc_451">Arweave Sign Transaction</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;ar_tx&quot;:&quot;{\&quot;format\&quot;:2,\&quot;id\&quot;:\&quot;\&quot;,\&quot;last_tx\&quot;:\&quot;4z4iqqw4j_bBC1jXvm-pbMDg5eSYOGPjRz2fB1nsai6cVtvTd7Ucn-_Qau_bZh\&quot;,\&quot;owner\&quot;:\&quot;KkTVKjrry_aieBmqNOuUGtJam-3yT6zMABY89pinlcY\&quot;,\&quot;tags\&quot;:[{\&quot;name\&quot;:\&quot;Q29udGVudC1UeXBl\&quot;,\&quot;value\&quot;:\&quot;aW1hZ2UvanBlZw\&quot;}],\&quot;target\&quot;:\&quot;\&quot;,\&quot;quantity\&quot;:\&quot;0\&quot;,\&quot;data\&quot;:\&quot;\&quot;,\&quot;data_size\&quot;:\&quot;23782\&quot;,\&quot;data_root\&quot;:\&quot;Ve1yivS-iMklYK6xyPT58IeZRu-TtnAYkW5Ih4pb-S4\&quot;,\&quot;reward\&quot;:\&quot;73874553\&quot;,\&quot;signature\&quot;:\&quot;\&quot;,\&quot;chunks\&quot;:\&quot;\&quot;}&quot;}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/signtransaction</code></pre></div>

<ul>
<li><a href="#arweave-sign-transaction">API definition</a></li>
</ul>

<p><a name="curl-add-withdrawal-whitelist-entry"></a></p>

<h3 id="toc_452">Add Withdrawal Whitelist Entry</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;items&quot;:[{&quot;address&quot;:&quot;GCIFMEYIEWSX3K6EOPMEJ3FHW5AAPD6NW76J7LPBRAKD4JZKTISKUPHJ&quot;,&quot;memo&quot;:&quot;85666&quot;,&quot;user_id&quot;:&quot;USER002&quot;}]}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/whitelist</code></pre></div>

<ul>
<li><a href="#add-withdrawal-whitelist-entry">API definition</a></li>
</ul>

<p><a name="curl-remove-withdrawal-whitelist-entry"></a></p>

<h3 id="toc_453">Remove Withdrawal Whitelist Entry</h3>

<div><pre><code class="language-none">curl -X DELETE -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;items&quot;:[{&quot;address&quot;:&quot;GCIFMEYIEWSX3K6EOPMEJ3FHW5AAPD6NW76J7LPBRAKD4JZKTISKUPHJ&quot;,&quot;memo&quot;:&quot;85666&quot;,&quot;user_id&quot;:&quot;USER002&quot;}]}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/whitelist</code></pre></div>

<ul>
<li><a href="#remove-withdrawal-whitelist-entry">API definition</a></li>
</ul>

<p><a name="curl-check-withdrawal-whitelist"></a></p>

<h3 id="toc_454">Check Withdrawal Whitelist</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;address&quot;:&quot;GCIFMEYIEWSX3K6EOPMEJ3FHW5AAPD6NW76J7LPBRAKD4JZKTISKUPHJ&quot;,&quot;memo&quot;:&quot;85666&quot;,&quot;user_id&quot;:&quot;USER002&quot;}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/whitelist/check</code></pre></div>

<ul>
<li><a href="#check-withdrawal-whitelist">API definition</a></li>
</ul>

<p><a name="curl-query-withdrawal-whitelist"></a></p>

<h3 id="toc_455">Query Withdrawal Whitelist</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/whitelist</code></pre></div>

<ul>
<li><a href="#query-withdrawal-whitelist">API definition</a></li>
</ul>

<p><a name="curl-resend-withdrawal-callbacks"></a></p>

<h3 id="toc_456">Resend Withdrawal Callbacks</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;notification_id&quot;:0}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/sender/notifications/manual</code></pre></div>

<ul>
<li><a href="#resend-withdrawal-callbacks">API definition</a></li>
</ul>

<p><a name="curl-query-callback-history"></a></p>

<h3 id="toc_457">Query Callback History</h3>

<div><pre><code class="language-none">curl &#39;http://localhost:8889/v1/mock/wallets/{WALLET_ID}/notifications?from_time=1561651200&amp;to_time=1562255999&amp;type=2&#39;</code></pre></div>

<ul>
<li><a href="#query-callback-history">API definition</a></li>
</ul>

<p><a name="curl-query-callback-detail"></a></p>

<h3 id="toc_458">Query Callback Detail</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;ids&quot;:[90000000140,90000000139]}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/notifications/get_by_id</code></pre></div>

<ul>
<li><a href="#query-callback-detail">API definition</a></li>
</ul>

<p><a name="curl-query-wallet-synchronization-info"></a></p>

<h3 id="toc_459">Query Wallet Synchronization Info</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/blocks</code></pre></div>

<ul>
<li><a href="#query-wallet-synchronization-info">API definition</a></li>
</ul>

<p><a name="curl-query-transaction-average-fee"></a></p>

<h3 id="toc_460">Query Transaction Average Fee</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;block_num&quot;:1}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/autofee</code></pre></div>

<ul>
<li><a href="#query-transaction-average-fee">API definition</a></li>
</ul>

<p><a name="curl-batch-query-transaction-average-fees"></a></p>

<h3 id="toc_461">Batch Query Transaction Average Fees</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;block_nums&quot;:[1,5,10]}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/autofees</code></pre></div>

<ul>
<li><a href="#batch-query-transaction-average-fees">API definition</a></li>
</ul>

<p><a name="curl-query-vault-wallet-transaction-history"></a></p>

<h3 id="toc_462">Query Vault Wallet Transaction History</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/transactions?start_index=0&amp;from_time=1559664000&amp;to_time=1562255999&amp;request_number=8</code></pre></div>

<ul>
<li><a href="#query-vault-wallet-transaction-history">API definition</a></li>
</ul>

<p><a name="curl-query-vault-wallet-balance"></a></p>

<h3 id="toc_463">Query Vault Wallet Balance</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/vault/balance</code></pre></div>

<ul>
<li><a href="#query-vault-wallet-balance">API definition</a></li>
</ul>

<p><a name="curl-activate-api-code"></a></p>

<h3 id="toc_464">Activate API Code</h3>

<div><pre><code class="language-none">curl -X POST http://localhost:8889/v1/mock/wallets/{WALLET_ID}/apisecret/activate</code></pre></div>

<ul>
<li><a href="#activate-api-code">API definition</a></li>
</ul>

<p><a name="curl-query-api-code-status"></a></p>

<h3 id="toc_465">Query API Code Status</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/apisecret</code></pre></div>

<ul>
<li><a href="#query-api-code-status">API definition</a></li>
</ul>

<p><a name="curl-refresh-api-code"></a></p>

<h3 id="toc_466">Refresh API Code</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;refresh_code&quot;:&quot;3EbaSPUpKzHJ9wYgYZqy6W4g43NT365bm9vtTfYhMPra&quot;}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/refreshsecret</code></pre></div>

<ul>
<li><a href="#refresh-api-code">API definition</a></li>
</ul>

<p><a name="curl-query-wallet-info"></a></p>

<h3 id="toc_467">Query Wallet Info</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/{WALLET_ID}/info</code></pre></div>

<ul>
<li><a href="#query-wallet-info">API definition</a></li>
</ul>

<p><a name="curl-verify-addresses"></a></p>

<h3 id="toc_468">Verify Addresses</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;addresses&quot;:[&quot;0x635B4764D1939DfAcD3a8014726159abC277BecC&quot;,&quot;1CK6KHY6MHgYvmRQ4PAafKYDrg1ejbH1cE&quot;]}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/addresses/verify</code></pre></div>

<ul>
<li><a href="#verify-addresses">API definition</a></li>
</ul>

<p><a name="curl-inspect-callback-endpoint"></a></p>

<h3 id="toc_469">Inspect Callback Endpoint</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;test_number&quot;:102999}&#39; \
http://localhost:8889/v1/mock/wallets/{WALLET_ID}/notifications/inspect</code></pre></div>

<ul>
<li><a href="#inspect-callback-endpoint">API definition</a></li>
</ul>

<p><a name="curl-list-wallets"></a></p>

<h3 id="toc_470">List Wallets</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/readonly/walletlist</code></pre></div>

<ul>
<li><a href="#list-wallets">API definition</a></li>
</ul>

<p><a name="curl-query-wallets-balance"></a></p>

<h3 id="toc_471">Query Wallets Balance</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/wallets/readonly/walletlist/balances</code></pre></div>

<ul>
<li><a href="#query-wallets-balance">API definition</a></li>
</ul>

<p><a name="curl-query-currency-prices"></a></p>

<h3 id="toc_472">Query Currency Prices</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/currency/prices</code></pre></div>

<ul>
<li><a href="#query-currency-prices">API definition</a></li>
</ul>

<p><a name="curl-query-contract-token-meta"></a></p>

<h3 id="toc_473">Query Contract Token Meta</h3>

<div><pre><code class="language-none">curl -X POST -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;requests&quot;:[{&quot;token_address&quot;:&quot;0x9fceceda8a781e493a0eba6a59c6e6c731fd5ee5&quot;,&quot;token_id&quot;:&quot;1&quot;}]}&#39; \
http://localhost:8889/v1/mock/currency/{CURRENCY}/contract/get-multiple-tokenuri</code></pre></div>

<ul>
<li><a href="#query-contract-token-meta">API definition</a></li>
</ul>

<p><a name="curl-query-service-health-status"></a></p>

<h3 id="toc_474">Query Service Health Status</h3>

<div><pre><code class="language-none">curl http://localhost:8889/v1/mock/healthcheck</code></pre></div>

<ul>
<li><a href="#query-service-health-status">API definition</a></li>
</ul>

<h5 id="toc_475"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="other-language-versions"></a></p>

<h1 id="toc_476">Other Language Versions</h1>

<ul>
<li><a href="https://github.com/CYBAVO/SOFA_MOCK_SERVER_JAVA">Java</a></li>
<li><a href="https://github.com/CYBAVO/SOFA_MOCK_SERVER_JAVASCRIPT">Javascript</a></li>
<li><a href="https://github.com/CYBAVO/SOFA_MOCK_SERVER_PHP">PHP</a></li>
</ul>

<h5 id="toc_477"><a href="#table-of-contents">Back to top</a></h5>

<h1 id="toc_478">Appendix</h1>

<p><a name="callback-definition"></a></p>

<h3 id="toc_479">Callback Definition</h3>

<table>
  <tr>
    <td>Field</td>
    <td>Type</td>
    <td>Description</td>
  </tr>
  <tr>
    <td>type</td>
    <td>int</td>
    <td>
        <table>
          <thead><tr><td>ID</td><td>Type</td></tr></thead>
          <tbody>
            <tr><td>1</td><td>Deposit</td></tr>
            <tr><td>2</td><td>Withdraw</td></tr>
            <tr><td>3</td><td>Collect</td></tr>
            <tr><td>4</td><td>Airdrop</td></tr>
          </tbody>
        </table>
    </td>
  </tr>
  <tr>
    <td>serial</td>
    <td>int</td>
    <td>The unique serial of callback</td>
  </tr>
  <tr>
    <td>order_id</td>
    <td>string</td>
    <td>The unique order ID of withdrawal request</td>
  </tr>
  <tr>
    <td>currency</td>
    <td>string</td>
    <td>Cryptocurrency of the callback<br>This field is for human reading only and may change in the future. Do not use this string as currency definition, use the fields <b>currency_bip44</b> and <b>token_address</b> as currency definition.</td>
  </tr>
  <tr>
    <td>txid</td>
    <td>string</td>
    <td>Transaction identifier</td>
  </tr>
  <tr>
    <td>block_height</td>
    <td>int64</td>
    <td>The block height show the transaction was packed in which block</td>
  </tr>
  <tr>
    <td>tindex</td>
    <td>int</td>
    <td>The index of transaction in its block</td>
  </tr>
  <tr>
    <td>vout_index</td>
    <td>int</td>
    <td>The index of vout in its transaction</td>
  </tr>
  <tr>
    <td>amount</td>
    <td>string</td>
    <td>Transaction amount denominated in the smallest cryptocurrency unit</td>
  </tr>
  <tr>
    <td>fees</td>
    <td>string</td>
    <td>Mining fee denominated in the smallest cryptocurrency unit</td>
  </tr>
  <tr>
    <td>broadcast_at</td>
    <td>int64</td>
    <td>When to broadcast the transaction in UTC time</td>
  </tr>
  <tr>
    <td>chain_at</td>
    <td>int64</td>
    <td>When was the transaction packed into block (in chain) in UTC time</td>
  </tr>
  <tr>
    <td>from_address</td>
    <td>string</td>
    <td>The source address of the transaction</td>
  </tr>
  <tr>
    <td>to_address</td>
    <td>string</td>
    <td>The destination address of the transaction</td>
  </tr>
  <tr>
    <td>wallet_id</td>
    <td>int64</td>
    <td>The wallet ID of the callback</td>
  </tr>
  <tr>
    <td>state</td>
    <td>int</td>
    <td>
      Possible states (listed in the Transaction State Definition table)
        <table>
          <thead><tr><td>ID</td><td>Description</td></tr></thead>
          <tbody>
            <tr><td>1</td><td>Processing</td></tr>
            <tr><td>2</td><td>TXID in pool</td></tr>
            <tr><td>3</td><td>TXID in chain</td></tr>
            <tr><td>5</td><td>Failed (the err_reason of addon field will contain detailed error reason)</td></tr>
            <tr><td>8</td><td>Cancelled</td></tr>
            <tr><td>10</td><td>Dropped</td></tr>
            <tr><td>11</td><td>Transaction Failed</td></tr>
          </tbody>
        </table>
    </td>
  </tr>
  <tr>
    <td>confirm_blocks</td>
    <td>int64</td>
    <td>Number of confirmations</td>
  </tr>
  <tr>
    <td>processing_state</td>
    <td>int</td>
    <td>
        <table>
          <thead><tr><td>ID</td><td>Description</td></tr></thead>
          <tbody>
            <tr><td>-1</td><td>If the state is 5(failed), 8(cacelled), 10(dropped) or 11(transaction failed)</td></tr>
            <tr><td>0</td><td>In fullnode mempool</td></tr>
            <tr><td>1</td><td>In chain (the transaction is already on the blockchain but the confirmations have not been met)</td></tr>
            <tr><td>2</td><td>Done (the transaction is already on the blockchain and satisfy confirmations)</td></tr>
          </tbody>
        </table>
    </td>
  </tr>
  <tr>
    <td>addon</td>
    <td>key-value pairs</td>
    <td>
    The extra information of this callback
        <table>
          <thead><tr><td>Key</td><td>Value (Description)</td></tr></thead>
          <tbody>
            <tr><td>err_reason</td><td>Will contain detail error reason if state is 5(Failed)</td></tr>
            <tr><td>fee_decimal</td><td>The decimal of cryptocurrency miner fee</td></tr>
            <tr><td>blocklist_tags</td><td>The tags of CYBAVO AML detection</td></tr>
            <tr><td>address_label</td><td>The label of the deposit address</td></tr>
            <tr><td>contract_abi</td><td>The contract ABI of the withdrawal request</td></tr>
            <tr><td>token_id</td><td>Transferred token ID</td></tr>
            <tr><td>aml_tags</td><td>Detailed CYBAVO AML detection information includes score, tags and blocked flag</td></tr>
            <tr><td>aml_screen_pass</td><td>Pass or fail CYBAVO AML screening</td></tr>
          </tbody>
        </table>
    </td>
  </tr>
  <tr>
    <td>decimal</td>
    <td>int</td>
    <td>The decimal of cryptocurrency</td>
  </tr>
  <tr>
    <td>currency_bip44</td>
    <td>int64</td>
    <td>
        Refer to <a href="https://github.com/CYBAVO/SOFA_MOCK_SERVER#currency-definition" target="_top"> Currency Definition</a> table
    </td>
  </tr>
  <tr>
    <td>token_address</td>
    <td>string</td>
    <td>The contract address of cryptocurrency</td>
  </tr>
  <tr>
    <td>memo</td>
    <td>string</td>
    <td>The memo/destination tag of the transaction</td>
  </tr>
</table>

<p><a name="transaction-state-definition"></a></p>

<h3 id="toc_480">Transaction State Definition</h3>

<table>
<thead>
<tr>
<th style="text-align: center">ID</th>
<th style="text-align: left">State</th>
<th style="text-align: left">Description</th>
<th style="text-align: center">Callback</th>
<th style="text-align: left">Callback Type</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: center">0</td>
<td style="text-align: left">Init</td>
<td style="text-align: left">The withdrawal request has been enqueued in the CYBAVO SOFA system</td>
<td style="text-align: center">-</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: center">1</td>
<td style="text-align: left">Processing</td>
<td style="text-align: left">The withdrawal request is processing in the CYBAVO SOFA system</td>
<td style="text-align: center">O</td>
<td style="text-align: left">Withdrawal(2)</td>
</tr>
<tr>
<td style="text-align: center">2</td>
<td style="text-align: left">TXID in pool</td>
<td style="text-align: left">The withdrawal transaction is pending in the fullnode mempool</td>
<td style="text-align: center">O</td>
<td style="text-align: left">Withdrawal(2)</td>
</tr>
<tr>
<td style="text-align: center">3</td>
<td style="text-align: left">TXID in chain</td>
<td style="text-align: left">The transaction is already on the blockchain</td>
<td style="text-align: center">O</td>
<td style="text-align: left">Deposit(1), Withdrawal(2), Collect(3)</td>
</tr>
<tr>
<td style="text-align: center">4</td>
<td style="text-align: left">TXID confirmed in N blocks</td>
<td style="text-align: left">The withdrawal transaction is already on the blockchain and satisfy confirmations</td>
<td style="text-align: center">-</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: center">5</td>
<td style="text-align: left">Failed</td>
<td style="text-align: left">Fail to create the withdrawal transaction</td>
<td style="text-align: center">O</td>
<td style="text-align: left">Withdrawal(2)</td>
</tr>
<tr>
<td style="text-align: center">6</td>
<td style="text-align: left">Resent</td>
<td style="text-align: left">The transaction has been successfully resent</td>
<td style="text-align: center">-</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: center">7</td>
<td style="text-align: left">Blocked due to risk controlled</td>
<td style="text-align: left">The deposit or withdrawal transaction was temporarily blocked due to a violation of the risk control rules</td>
<td style="text-align: center">-</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: center">8</td>
<td style="text-align: left">Cancelled</td>
<td style="text-align: left">The withdrawal request is cancelled via web console</td>
<td style="text-align: center">O</td>
<td style="text-align: left">Withdrawal(2)</td>
</tr>
<tr>
<td style="text-align: center">9</td>
<td style="text-align: left">UTXO temporarily not available</td>
<td style="text-align: left">The withdrawal request has been set as pending due to no available UTXO</td>
<td style="text-align: center">-</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: center">10</td>
<td style="text-align: left">Dropped</td>
<td style="text-align: left">A long-awaited withdrawal transaction that does not appear in the memory pool of the fullnode will be regarded as dropped</td>
<td style="text-align: center">O</td>
<td style="text-align: left">Withdrawal(2)</td>
</tr>
<tr>
<td style="text-align: center">11</td>
<td style="text-align: left">Transaction Failed</td>
<td style="text-align: left">The withdrawal transaction is regarded as a failed transaction by the fullnode</td>
<td style="text-align: center">O</td>
<td style="text-align: left">Withdrawal(2)</td>
</tr>
<tr>
<td style="text-align: center">12</td>
<td style="text-align: left">Paused</td>
<td style="text-align: left">The withdrawal request has been paused</td>
<td style="text-align: center">-</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: center">13</td>
<td style="text-align: left">Retrying</td>
<td style="text-align: left">Automatic transaction retry in progress</td>
<td style="text-align: center">-</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: center">14</td>
<td style="text-align: left">Query transaction status fail</td>
<td style="text-align: left">Unable to query transaction status from fullnode</td>
<td style="text-align: center">-</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: center">15</td>
<td style="text-align: left">Init-Locked</td>
<td style="text-align: left">Transaction is being processed in the KMS module</td>
<td style="text-align: center">-</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: center">20</td>
<td style="text-align: left">Preparing transaction fee</td>
<td style="text-align: left">Preparing transaction fee (delegated wallet only)</td>
<td style="text-align: center">-</td>
<td style="text-align: left">-</td>
</tr>
<tr>
<td style="text-align: center">21</td>
<td style="text-align: left">Transaction fee is ready</td>
<td style="text-align: left">Transaction fee is ready (delegated wallet only)</td>
<td style="text-align: center">-</td>
<td style="text-align: left">-</td>
</tr>
</tbody>
</table>

<p>Callback sample:</p>

<blockquote>
<p>If the <code>state</code> of callback is 5 (Failed), the detailed failure reason will put in <code>addon</code> field (key is <code>err_reason</code>). See the callback sample bellow.</p>
</blockquote>

<div><pre><code class="language-javascript">{
  &quot;type&quot;: 1,
  &quot;serial&quot;: 90000000619,
  &quot;order_id&quot;: &quot;&quot;,
  &quot;currency&quot;: &quot;ETH&quot;,
  &quot;txid&quot;: &quot;0xc99a4941f87364c9679fe834f99bc12cbacfc577dedf4f34c4fd8833a68a0b00&quot;,
  &quot;block_height&quot;: 8336269,
  &quot;tindex&quot;: 43,
  &quot;vout_index&quot;: 0,
  &quot;amount&quot;: &quot;500000000000000000&quot;,
  &quot;fees&quot;: &quot;945000000000000&quot;,
  &quot;memo&quot;: &quot;&quot;,
  &quot;broadcast_at&quot;: 1595296751,
  &quot;chain_at&quot;: 1595296751,
  &quot;from_address&quot;: &quot;0x8382Cc1B05649AfBe179e341179fa869C2A9862b&quot;,
  &quot;to_address&quot;: &quot;0x32d638773cB85965422b3B98e9312Fc9392307BC&quot;,
  &quot;wallet_id&quot;: 5,
  &quot;state&quot;: 3,
  &quot;confirm_blocks&quot;: 2,
  &quot;processing_state&quot;: 2,
  &quot;addon&quot;: {
    &quot;fee_decimal&quot;: 18
  },
  &quot;decimal&quot;: 18,
  &quot;currency_bip44&quot;: 60,
  &quot;token_address&quot;: &quot;&quot;
}</code></pre></div>

<p>Callback with state 5 (Failed) sample:</p>

<div><pre><code class="language-javascript">{
  &quot;type&quot;: 2,
  &quot;serial&quot;: 20000000155,
  &quot;order_id&quot;: &quot;1_69&quot;,
  &quot;currency&quot;: &quot;ETH&quot;,
  &quot;txid&quot;: &quot;&quot;,
  &quot;block_height&quot;: 0,
  &quot;tindex&quot;: 0,
  &quot;vout_index&quot;: 0,
  &quot;amount&quot;: &quot;1000000000000000&quot;,
  &quot;fees&quot;: &quot;&quot;,
  &quot;memo&quot;: &quot;&quot;,
  &quot;broadcast_at&quot;: 0,
  &quot;chain_at&quot;: 0,
  &quot;from_address&quot;: &quot;&quot;,
  &quot;to_address&quot;: &quot;0x60589A749AAC632e9A830c8aBE041899d8Dd15&quot;,
  &quot;wallet_id&quot;: 2,
  &quot;state&quot;: 5,
  &quot;confirm_blocks&quot;: 0,
  &quot;processing_state&quot;: 0,
  &quot;addon&quot;: {
    &quot;err_reason&quot;: &quot;Illegal Transaction Format: To 0x60589A749AAC632e9A830c8aBE041899d8Dd15&quot;
  },
  &quot;decimal&quot;: 18,
  &quot;currency_bip44&quot;: 60,
  &quot;token_address&quot;: &quot;&quot;
}</code></pre></div>

<p>Deposit callback with blocklist_tags sample:</p>

<div><pre><code class="language-javascript">{
  &quot;type&quot;: 1,
  &quot;serial&quot;: 90000002797,
  &quot;order_id&quot;: &quot;&quot;,
  &quot;currency&quot;: &quot;ETH&quot;,
  &quot;txid&quot;: &quot;0xbb38e22c33cbc33ad5a58a88bfee0905968062fe34e33eb6e28861771686cf45&quot;,
  &quot;block_height&quot;: 11075566,
  &quot;tindex&quot;: 7,
  &quot;vout_index&quot;: 0,
  &quot;amount&quot;: &quot;10000000000000000&quot;,
  &quot;fees&quot;: &quot;31500000315000&quot;,
  &quot;memo&quot;: &quot;&quot;,
  &quot;broadcast_at&quot;: 1632195931,
  &quot;chain_at&quot;: 1632195931,
  &quot;from_address&quot;: &quot;0xD5909BacFc1faD78e4e45E9e2feF8b4e61c8Fd0d&quot;,
  &quot;to_address&quot;: &quot;0x319b269ef02AB7e6660f7e6cb181D0CD06E2E4a0&quot;,
  &quot;wallet_id&quot;: 854512,
  &quot;processing_state&quot;: 2,
  &quot;addon&quot;: {
    &quot;address_label&quot;: &quot;&quot;,
    &quot;aml_screen_pass&quot;: false,
    &quot;aml_tags&quot;: {
      &quot;cybavo&quot;: {
        &quot;score&quot;: 100,
        &quot;tags&quot;: [
          &quot;TEST&quot;
        ],
        &quot;blocked&quot;: true
      }
    },
    &quot;blocklist_tags&quot;: [
      &quot;cybavo(100): TEST&quot;
    ],
    &quot;fee_decimal&quot;: 18
  },
  &quot;decimal&quot;: 18,
  &quot;currency_bip44&quot;: 60,
  &quot;token_address&quot;: &quot;&quot;
}</code></pre></div>

<h5 id="toc_481"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="callback-type-definition"></a></p>

<h3 id="toc_482">Callback Type Definition</h3>

<table>
<thead>
<tr>
<th style="text-align: left">ID</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">1</td>
<td style="text-align: left">Deposit Callback</td>
</tr>
<tr>
<td style="text-align: left">2</td>
<td style="text-align: left">Withdraw Callback</td>
</tr>
<tr>
<td style="text-align: left">3</td>
<td style="text-align: left">Collect Callback</td>
</tr>
<tr>
<td style="text-align: left">4</td>
<td style="text-align: left">Airdrop Callback</td>
</tr>
<tr>
<td style="text-align: left">127</td>
<td style="text-align: left">In-pool Transaction Callback</td>
</tr>
<tr>
<td style="text-align: left">-1</td>
<td style="text-align: left">All callbacks (for inquiry)</td>
</tr>
</tbody>
</table>

<h5 id="toc_483"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="currency-definition"></a></p>

<h3 id="toc_484">Currency Definition</h3>

<table>
<thead>
<tr>
<th style="text-align: left">ID</th>
<th style="text-align: left">Currency Symbol</th>
<th style="text-align: left">Decimals</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">0</td>
<td style="text-align: left">BTC</td>
<td style="text-align: left">8</td>
</tr>
<tr>
<td style="text-align: left">2</td>
<td style="text-align: left">LTC</td>
<td style="text-align: left">8</td>
</tr>
<tr>
<td style="text-align: left">3</td>
<td style="text-align: left">DOGE</td>
<td style="text-align: left">8</td>
</tr>
<tr>
<td style="text-align: left">5</td>
<td style="text-align: left">DASH</td>
<td style="text-align: left">8</td>
</tr>
<tr>
<td style="text-align: left">60</td>
<td style="text-align: left">ETH</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">118</td>
<td style="text-align: left">ATOM</td>
<td style="text-align: left">6</td>
</tr>
<tr>
<td style="text-align: left">144</td>
<td style="text-align: left">XRP</td>
<td style="text-align: left">6</td>
</tr>
<tr>
<td style="text-align: left">145</td>
<td style="text-align: left">BCH (BCHN)</td>
<td style="text-align: left">8</td>
</tr>
<tr>
<td style="text-align: left">148</td>
<td style="text-align: left">XLM</td>
<td style="text-align: left">7</td>
</tr>
<tr>
<td style="text-align: left">194</td>
<td style="text-align: left">EOS</td>
<td style="text-align: left">4</td>
</tr>
<tr>
<td style="text-align: left">195</td>
<td style="text-align: left">TRX</td>
<td style="text-align: left">6</td>
</tr>
<tr>
<td style="text-align: left">236</td>
<td style="text-align: left">BSV</td>
<td style="text-align: left">8</td>
</tr>
<tr>
<td style="text-align: left">283</td>
<td style="text-align: left">ALGO</td>
<td style="text-align: left">6</td>
</tr>
<tr>
<td style="text-align: left">354</td>
<td style="text-align: left">DOT</td>
<td style="text-align: left">10</td>
</tr>
<tr>
<td style="text-align: left">434</td>
<td style="text-align: left">KSM</td>
<td style="text-align: left">12</td>
</tr>
<tr>
<td style="text-align: left">461</td>
<td style="text-align: left">FIL</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">472</td>
<td style="text-align: left">AR</td>
<td style="text-align: left">12</td>
</tr>
<tr>
<td style="text-align: left">501</td>
<td style="text-align: left">SOL</td>
<td style="text-align: left">9</td>
</tr>
<tr>
<td style="text-align: left">539</td>
<td style="text-align: left">FLOW</td>
<td style="text-align: left">8</td>
</tr>
<tr>
<td style="text-align: left">700</td>
<td style="text-align: left">XDAI</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">714</td>
<td style="text-align: left">BNB</td>
<td style="text-align: left">8</td>
</tr>
<tr>
<td style="text-align: left">966</td>
<td style="text-align: left">MATIC</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">1001</td>
<td style="text-align: left">TT</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">1023</td>
<td style="text-align: left">ONE</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">1776</td>
<td style="text-align: left">L-BTC</td>
<td style="text-align: left">8</td>
</tr>
<tr>
<td style="text-align: left">1815</td>
<td style="text-align: left">ADA</td>
<td style="text-align: left">6</td>
</tr>
<tr>
<td style="text-align: left">5353</td>
<td style="text-align: left">HNS</td>
<td style="text-align: left">6</td>
</tr>
<tr>
<td style="text-align: left">52752</td>
<td style="text-align: left">CELO</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">99999999982*</td>
<td style="text-align: left">AXL</td>
<td style="text-align: left">6</td>
</tr>
<tr>
<td style="text-align: left">99999999983*</td>
<td style="text-align: left">BLD</td>
<td style="text-align: left">6</td>
</tr>
<tr>
<td style="text-align: left">99999999984*</td>
<td style="text-align: left">OSMO</td>
<td style="text-align: left">6</td>
</tr>
<tr>
<td style="text-align: left">99999999986*</td>
<td style="text-align: left">KUB</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">99999999986*</td>
<td style="text-align: left">KUB</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">99999999987*</td>
<td style="text-align: left">KOVAN</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">99999999988*</td>
<td style="text-align: left">AVAX-C</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">99999999989*</td>
<td style="text-align: left">PALM</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">99999999990*</td>
<td style="text-align: left">FTM</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">99999999991*</td>
<td style="text-align: left">OKT</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">99999999992*</td>
<td style="text-align: left">OPTIMISM</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">99999999993*</td>
<td style="text-align: left">ARBITRUM</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">99999999994*</td>
<td style="text-align: left">HECO</td>
<td style="text-align: left">18</td>
</tr>
<tr>
<td style="text-align: left">99999999996*</td>
<td style="text-align: left">WND</td>
<td style="text-align: left">12</td>
</tr>
<tr>
<td style="text-align: left">99999999997*</td>
<td style="text-align: left">BSC</td>
<td style="text-align: left">18</td>
</tr>
</tbody>
</table>

<blockquote>
<p>Refer to <a href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md">here</a> for more detailed currency definitions</p>

<p>The * mark represents the definition of pseudo-cryptocurrency in the CYBAVO SOFA system</p>

<p>KOVAN is PoA testnet for Ethereum.</p>
</blockquote>

<h5 id="toc_485"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="support-unconfirmed-balance-currency"></a></p>

<h3 id="toc_486">Support Unconfirmed Balance Currency</h3>

<table>
<thead>
<tr>
<th style="text-align: left">ID</th>
<th style="text-align: left">Currency Symbol</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">0</td>
<td style="text-align: left">BTC</td>
</tr>
<tr>
<td style="text-align: left">2</td>
<td style="text-align: left">LTC</td>
</tr>
<tr>
<td style="text-align: left">3</td>
<td style="text-align: left">DOGE</td>
</tr>
<tr>
<td style="text-align: left">5</td>
<td style="text-align: left">DASH</td>
</tr>
<tr>
<td style="text-align: left">60</td>
<td style="text-align: left">ETH</td>
</tr>
<tr>
<td style="text-align: left">145</td>
<td style="text-align: left">BCH (BCHN)</td>
</tr>
<tr>
<td style="text-align: left">236</td>
<td style="text-align: left">BSV</td>
</tr>
<tr>
<td style="text-align: left">700</td>
<td style="text-align: left">XDAI</td>
</tr>
<tr>
<td style="text-align: left">966</td>
<td style="text-align: left">MATIC</td>
</tr>
<tr>
<td style="text-align: left">1023</td>
<td style="text-align: left">ONE</td>
</tr>
<tr>
<td style="text-align: left">1776</td>
<td style="text-align: left">L-BTC</td>
</tr>
<tr>
<td style="text-align: left">52752</td>
<td style="text-align: left">CELO</td>
</tr>
<tr>
<td style="text-align: left">99999999986</td>
<td style="text-align: left">KUB</td>
</tr>
<tr>
<td style="text-align: left">99999999987</td>
<td style="text-align: left">KOVAN</td>
</tr>
<tr>
<td style="text-align: left">99999999988</td>
<td style="text-align: left">AVAX-C</td>
</tr>
<tr>
<td style="text-align: left">99999999989</td>
<td style="text-align: left">PALM</td>
</tr>
<tr>
<td style="text-align: left">99999999990</td>
<td style="text-align: left">FTM</td>
</tr>
<tr>
<td style="text-align: left">99999999991</td>
<td style="text-align: left">OKT</td>
</tr>
<tr>
<td style="text-align: left">99999999992</td>
<td style="text-align: left">OPTIMISM</td>
</tr>
<tr>
<td style="text-align: left">99999999993</td>
<td style="text-align: left">ARBITRUM</td>
</tr>
<tr>
<td style="text-align: left">99999999994</td>
<td style="text-align: left">HECO</td>
</tr>
<tr>
<td style="text-align: left">99999999997</td>
<td style="text-align: left">BSC</td>
</tr>
</tbody>
</table>

<blockquote>
<p>L-BTC only shows the unconfirmed incoming balance, no outgoing balance.</p>
</blockquote>

<h5 id="toc_487"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="memo-requirement"></a></p>

<h3 id="toc_488">Memo Requirement</h3>

<table>
<thead>
<tr>
<th style="text-align: left">Currency</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">XRP</td>
<td style="text-align: left">Up to 32-bit unsigned integer (max 4294967295)</td>
</tr>
<tr>
<td style="text-align: left">XLM</td>
<td style="text-align: left">Up to 20 chars</td>
</tr>
<tr>
<td style="text-align: left">EOS</td>
<td style="text-align: left">Up to 256 chars</td>
</tr>
<tr>
<td style="text-align: left">BNB</td>
<td style="text-align: left">Up to 128 chars</td>
</tr>
<tr>
<td style="text-align: left">ATOM</td>
<td style="text-align: left">Up to 180 chars</td>
</tr>
</tbody>
</table>

<h5 id="toc_489"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="wallet-type-definition"></a></p>

<h3 id="toc_490">Wallet Type Definition</h3>

<table>
<thead>
<tr>
<th style="text-align: left">Type</th>
<th style="text-align: left">Description</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">0</td>
<td style="text-align: left">Vault wallet</td>
</tr>
<tr>
<td style="text-align: left">1</td>
<td style="text-align: left">Batch wallet</td>
</tr>
<tr>
<td style="text-align: left">2</td>
<td style="text-align: left">Deposit wallet</td>
</tr>
<tr>
<td style="text-align: left">3</td>
<td style="text-align: left">Withdrawal wallet</td>
</tr>
<tr>
<td style="text-align: left">5</td>
<td style="text-align: left">Deposit-withdrawal wallet</td>
</tr>
<tr>
<td style="text-align: left">6</td>
<td style="text-align: left">Delegated wallet</td>
</tr>
</tbody>
</table>

<h5 id="toc_491"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="delegated-wallet-supported-currency"></a></p>

<h3 id="toc_492">Delegated Wallet Supported Currency</h3>

<table>
<thead>
<tr>
<th style="text-align: left">ID</th>
<th style="text-align: left">Currency Symbol</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">60</td>
<td style="text-align: left">ETH</td>
</tr>
<tr>
<td style="text-align: left">700</td>
<td style="text-align: left">XDAI</td>
</tr>
<tr>
<td style="text-align: left">966</td>
<td style="text-align: left">MATIC</td>
</tr>
<tr>
<td style="text-align: left">1001</td>
<td style="text-align: left">TT</td>
</tr>
<tr>
<td style="text-align: left">1023</td>
<td style="text-align: left">ONE</td>
</tr>
<tr>
<td style="text-align: left">52752</td>
<td style="text-align: left">CELO</td>
</tr>
<tr>
<td style="text-align: left">99999999986*</td>
<td style="text-align: left">KUB</td>
</tr>
<tr>
<td style="text-align: left">99999999987*</td>
<td style="text-align: left">KOVAN</td>
</tr>
<tr>
<td style="text-align: left">99999999988*</td>
<td style="text-align: left">AVAX-C</td>
</tr>
<tr>
<td style="text-align: left">99999999989*</td>
<td style="text-align: left">PALM</td>
</tr>
<tr>
<td style="text-align: left">99999999990*</td>
<td style="text-align: left">FTM</td>
</tr>
<tr>
<td style="text-align: left">99999999991*</td>
<td style="text-align: left">OKT</td>
</tr>
<tr>
<td style="text-align: left">99999999992*</td>
<td style="text-align: left">OPTIMISM</td>
</tr>
<tr>
<td style="text-align: left">99999999993*</td>
<td style="text-align: left">ARBITRUM</td>
</tr>
<tr>
<td style="text-align: left">99999999994*</td>
<td style="text-align: left">HECO</td>
</tr>
<tr>
<td style="text-align: left">99999999997*</td>
<td style="text-align: left">BSC</td>
</tr>
</tbody>
</table>

<h5 id="toc_493"><a href="#table-of-contents">Back to top</a></h5>

<p><a name="evm-compatible-currency"></a></p>

<h3 id="toc_494">EVM Compatible Currency</h3>

<table>
<thead>
<tr>
<th style="text-align: left">ID</th>
<th style="text-align: left">Currency Symbol</th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align: left">60</td>
<td style="text-align: left">ETH</td>
</tr>
<tr>
<td style="text-align: left">700</td>
<td style="text-align: left">XDAI</td>
</tr>
<tr>
<td style="text-align: left">966</td>
<td style="text-align: left">MATIC</td>
</tr>
<tr>
<td style="text-align: left">1001</td>
<td style="text-align: left">TT</td>
</tr>
<tr>
<td style="text-align: left">1023</td>
<td style="text-align: left">ONE</td>
</tr>
<tr>
<td style="text-align: left">52752</td>
<td style="text-align: left">CELO</td>
</tr>
<tr>
<td style="text-align: left">99999999986*</td>
<td style="text-align: left">KUB</td>
</tr>
<tr>
<td style="text-align: left">99999999987*</td>
<td style="text-align: left">KOVAN</td>
</tr>
<tr>
<td style="text-align: left">99999999988*</td>
<td style="text-align: left">AVAX-C</td>
</tr>
<tr>
<td style="text-align: left">99999999989*</td>
<td style="text-align: left">PALM</td>
</tr>
<tr>
<td style="text-align: left">99999999990*</td>
<td style="text-align: left">FTM</td>
</tr>
<tr>
<td style="text-align: left">99999999991*</td>
<td style="text-align: left">OKT</td>
</tr>
<tr>
<td style="text-align: left">99999999992*</td>
<td style="text-align: left">OPTIMISM</td>
</tr>
<tr>
<td style="text-align: left">99999999993*</td>
<td style="text-align: left">ARBITRUM</td>
</tr>
<tr>
<td style="text-align: left">99999999994*</td>
<td style="text-align: left">HECO</td>
</tr>
<tr>
<td style="text-align: left">99999999997*</td>
<td style="text-align: left">BSC</td>
</tr>
</tbody>
</table>

<h5 id="toc_495"><a href="#table-of-contents">Back to top</a></h5>




</body>

</html>
